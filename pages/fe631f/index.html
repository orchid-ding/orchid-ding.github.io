<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Hadoop Ha高可用环境搭建 | clivia‘s blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/img/favicon.ico">
    <script data-ad-client="ca-pub-7828333725993554" async="async" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <meta name="description" content="Java后端、大数据等技术博客，专注于各种技术总结。Java、高并发、hadoop、spark、hbase、hive、zookeeper、mysql、mongodb、redis">
    <meta name="keywords" content="前端博客,个人技术博客,前端,前端开发,前端框架,web前端,前端面试题,技术文档,学习,面试,JavaScript,js,ES6,TypeScript,vue,python,css3,html5,Node,git,github,markdown">
    <meta name="baidu-site-verification" content="7F55weZDDc">
    <meta name="theme-color" content="#11a8cd">
    <link rel="preload" href="/assets/css/0.styles.027adcb0.css" as="style"><link rel="preload" href="/assets/js/app.06f86fe0.js" as="script"><link rel="preload" href="/assets/js/2.ed69dcfc.js" as="script"><link rel="preload" href="/assets/js/3.b6cd915d.js" as="script"><link rel="preload" href="/assets/js/132.5dd5eece.js" as="script"><link rel="prefetch" href="/assets/js/10.2b0a2d8d.js"><link rel="prefetch" href="/assets/js/100.16d5c2bc.js"><link rel="prefetch" href="/assets/js/101.c4ff0a78.js"><link rel="prefetch" href="/assets/js/102.4e574824.js"><link rel="prefetch" href="/assets/js/103.ac1661b8.js"><link rel="prefetch" href="/assets/js/104.dfdf274c.js"><link rel="prefetch" href="/assets/js/105.f792ba33.js"><link rel="prefetch" href="/assets/js/106.4347b2a7.js"><link rel="prefetch" href="/assets/js/107.7248a258.js"><link rel="prefetch" href="/assets/js/108.a3c43671.js"><link rel="prefetch" href="/assets/js/109.e8c087b3.js"><link rel="prefetch" href="/assets/js/11.0c3d61f1.js"><link rel="prefetch" href="/assets/js/110.2b89ad56.js"><link rel="prefetch" href="/assets/js/111.d35e07d0.js"><link rel="prefetch" href="/assets/js/112.2402331a.js"><link rel="prefetch" href="/assets/js/113.82a39665.js"><link rel="prefetch" href="/assets/js/114.4c8d3fcb.js"><link rel="prefetch" href="/assets/js/115.f038010e.js"><link rel="prefetch" href="/assets/js/116.c7865d0c.js"><link rel="prefetch" href="/assets/js/117.2729b824.js"><link rel="prefetch" href="/assets/js/118.b8c9bb1f.js"><link rel="prefetch" href="/assets/js/119.a9eea003.js"><link rel="prefetch" href="/assets/js/12.e4b75a11.js"><link rel="prefetch" href="/assets/js/120.06f1eb1b.js"><link rel="prefetch" href="/assets/js/121.354a7fd4.js"><link rel="prefetch" href="/assets/js/122.af00dd2b.js"><link rel="prefetch" href="/assets/js/123.976e22ad.js"><link rel="prefetch" href="/assets/js/124.de810dba.js"><link rel="prefetch" href="/assets/js/125.2c17fa05.js"><link rel="prefetch" href="/assets/js/126.ffeb8997.js"><link rel="prefetch" href="/assets/js/127.6b2f64dd.js"><link rel="prefetch" href="/assets/js/128.f9b62119.js"><link rel="prefetch" href="/assets/js/129.ce5c5c0e.js"><link rel="prefetch" href="/assets/js/13.2c54c92b.js"><link rel="prefetch" href="/assets/js/130.7db38d34.js"><link rel="prefetch" href="/assets/js/131.5abdd66a.js"><link rel="prefetch" href="/assets/js/133.651d4b9b.js"><link rel="prefetch" href="/assets/js/134.68173250.js"><link rel="prefetch" href="/assets/js/135.ca520569.js"><link rel="prefetch" href="/assets/js/136.1515cd12.js"><link rel="prefetch" href="/assets/js/137.d783808b.js"><link rel="prefetch" href="/assets/js/138.05efd534.js"><link rel="prefetch" href="/assets/js/139.a65dce22.js"><link rel="prefetch" href="/assets/js/14.5cb33b3a.js"><link rel="prefetch" href="/assets/js/140.44dc5c4e.js"><link rel="prefetch" href="/assets/js/141.0632e3aa.js"><link rel="prefetch" href="/assets/js/142.66ac9883.js"><link rel="prefetch" href="/assets/js/143.8a75f55a.js"><link rel="prefetch" href="/assets/js/144.349bba43.js"><link rel="prefetch" href="/assets/js/15.06dff62d.js"><link rel="prefetch" href="/assets/js/16.ad74e0a9.js"><link rel="prefetch" href="/assets/js/17.e0d7a93c.js"><link rel="prefetch" href="/assets/js/18.0c217b19.js"><link rel="prefetch" href="/assets/js/19.33d29011.js"><link rel="prefetch" href="/assets/js/20.5c47e53a.js"><link rel="prefetch" href="/assets/js/21.4623dcf3.js"><link rel="prefetch" href="/assets/js/22.1d2819bf.js"><link rel="prefetch" href="/assets/js/23.da3264cc.js"><link rel="prefetch" href="/assets/js/24.a3976766.js"><link rel="prefetch" href="/assets/js/25.52b1b746.js"><link rel="prefetch" href="/assets/js/26.527a58d4.js"><link rel="prefetch" href="/assets/js/27.1a611ca9.js"><link rel="prefetch" href="/assets/js/28.19848920.js"><link rel="prefetch" href="/assets/js/29.0399b7cc.js"><link rel="prefetch" href="/assets/js/30.f4967fc4.js"><link rel="prefetch" href="/assets/js/31.ec15c096.js"><link rel="prefetch" href="/assets/js/32.ea29ed83.js"><link rel="prefetch" href="/assets/js/33.2506e8df.js"><link rel="prefetch" href="/assets/js/34.b317cb6a.js"><link rel="prefetch" href="/assets/js/35.e98b1f8e.js"><link rel="prefetch" href="/assets/js/36.5a3c937d.js"><link rel="prefetch" href="/assets/js/37.d8e66f15.js"><link rel="prefetch" href="/assets/js/38.583bd78a.js"><link rel="prefetch" href="/assets/js/39.02884927.js"><link rel="prefetch" href="/assets/js/4.4f8d037f.js"><link rel="prefetch" href="/assets/js/40.11d31d5e.js"><link rel="prefetch" href="/assets/js/41.e3b7229f.js"><link rel="prefetch" href="/assets/js/42.ed31fd5c.js"><link rel="prefetch" href="/assets/js/43.71601b99.js"><link rel="prefetch" href="/assets/js/44.7235eb98.js"><link rel="prefetch" href="/assets/js/45.8adef6f7.js"><link rel="prefetch" href="/assets/js/46.44d68224.js"><link rel="prefetch" href="/assets/js/47.ec6b4de8.js"><link rel="prefetch" href="/assets/js/48.ee56118d.js"><link rel="prefetch" href="/assets/js/49.0f6101ee.js"><link rel="prefetch" href="/assets/js/5.0e4db68d.js"><link rel="prefetch" href="/assets/js/50.2d01b40c.js"><link rel="prefetch" href="/assets/js/51.ddf132cb.js"><link rel="prefetch" href="/assets/js/52.fbc9619b.js"><link rel="prefetch" href="/assets/js/53.089b304e.js"><link rel="prefetch" href="/assets/js/54.34c0d377.js"><link rel="prefetch" href="/assets/js/55.41e71cff.js"><link rel="prefetch" href="/assets/js/56.ed6b0ac8.js"><link rel="prefetch" href="/assets/js/57.538bf884.js"><link rel="prefetch" href="/assets/js/58.d0051104.js"><link rel="prefetch" href="/assets/js/59.00792d53.js"><link rel="prefetch" href="/assets/js/6.6a15c5c7.js"><link rel="prefetch" href="/assets/js/60.44529245.js"><link rel="prefetch" href="/assets/js/61.6a6e2fe6.js"><link rel="prefetch" href="/assets/js/62.b02509d6.js"><link rel="prefetch" href="/assets/js/63.c865f599.js"><link rel="prefetch" href="/assets/js/64.7aafe0f4.js"><link rel="prefetch" href="/assets/js/65.029254a7.js"><link rel="prefetch" href="/assets/js/66.1d8c00be.js"><link rel="prefetch" href="/assets/js/67.191949ec.js"><link rel="prefetch" href="/assets/js/68.fc11d430.js"><link rel="prefetch" href="/assets/js/69.5e5d346e.js"><link rel="prefetch" href="/assets/js/7.4353a828.js"><link rel="prefetch" href="/assets/js/70.61cd3f71.js"><link rel="prefetch" href="/assets/js/71.1a87ddd4.js"><link rel="prefetch" href="/assets/js/72.f561b5cf.js"><link rel="prefetch" href="/assets/js/73.d1c67ae7.js"><link rel="prefetch" href="/assets/js/74.3725d6d7.js"><link rel="prefetch" href="/assets/js/75.310c7556.js"><link rel="prefetch" href="/assets/js/76.b8a53386.js"><link rel="prefetch" href="/assets/js/77.e04be33a.js"><link rel="prefetch" href="/assets/js/78.17c06f28.js"><link rel="prefetch" href="/assets/js/79.3ff2fb40.js"><link rel="prefetch" href="/assets/js/8.248194f5.js"><link rel="prefetch" href="/assets/js/80.96d575dc.js"><link rel="prefetch" href="/assets/js/81.770ca2a4.js"><link rel="prefetch" href="/assets/js/82.8900493c.js"><link rel="prefetch" href="/assets/js/83.4716d242.js"><link rel="prefetch" href="/assets/js/84.5ae9874f.js"><link rel="prefetch" href="/assets/js/85.924e7d3d.js"><link rel="prefetch" href="/assets/js/86.5073d16d.js"><link rel="prefetch" href="/assets/js/87.1148acd0.js"><link rel="prefetch" href="/assets/js/88.629d8beb.js"><link rel="prefetch" href="/assets/js/89.36b4cdb0.js"><link rel="prefetch" href="/assets/js/9.85151a25.js"><link rel="prefetch" href="/assets/js/90.fac275aa.js"><link rel="prefetch" href="/assets/js/91.93484ec9.js"><link rel="prefetch" href="/assets/js/92.01e42c63.js"><link rel="prefetch" href="/assets/js/93.50a55dd7.js"><link rel="prefetch" href="/assets/js/94.6a3f96c8.js"><link rel="prefetch" href="/assets/js/95.7dd7befb.js"><link rel="prefetch" href="/assets/js/96.38d049b2.js"><link rel="prefetch" href="/assets/js/97.a129eb48.js"><link rel="prefetch" href="/assets/js/98.f848c937.js"><link rel="prefetch" href="/assets/js/99.2dc3271b.js">
    <link rel="stylesheet" href="/assets/css/0.styles.027adcb0.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/img/C-logo.png" alt="clivia‘s blog" class="logo"> <span class="site-name can-hide">clivia‘s blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/bigdata/" class="nav-link">大数据</a></div><div class="nav-item"><a href="/technology/" class="nav-link">技术</a></div><div class="nav-item"><a href="/project/" class="nav-link">项目</a></div><div class="nav-item"><a href="/more/" class="nav-link">更多</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://gitee.com/kflys/clivia-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    Gitee
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/img/logo.png"> <div class="blogger-info"><h3>clivia’s blog</h3> <span>专注于后端开发，致力于简洁知识。</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/bigdata/" class="nav-link">大数据</a></div><div class="nav-item"><a href="/technology/" class="nav-link">技术</a></div><div class="nav-item"><a href="/project/" class="nav-link">项目</a></div><div class="nav-item"><a href="/more/" class="nav-link">更多</a></div><div class="nav-item"><a href="/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/pages/beb6c0bd8a66cea6/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/archives/" class="nav-link">归档</a></li></ul></div></div> <a href="https://gitee.com/kflys/clivia-blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    Gitee
    <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Hadoop环境</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/6b18b5/" class="sidebar-link">Linux环境搭建</a></li><li><a href="/pages/a3177d/" class="sidebar-link">Hadoop环境搭建</a></li><li><a href="/pages/fe631f/" aria-current="page" class="active sidebar-link">Hadoop Ha高可用环境搭建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/fe631f/#_1-虚拟机环境准备" class="sidebar-link">1. 虚拟机环境准备</a></li><li class="sidebar-sub-header"><a href="/pages/fe631f/#_2-安装zookeeper集群" class="sidebar-link">2. 安装ZooKeeper集群</a></li><li class="sidebar-sub-header"><a href="/pages/fe631f/#_3-五节点hadoop-ha搭建" class="sidebar-link">3. 五节点Hadoop HA搭建</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/fe631f/#_3-1-解压hadoop压缩包" class="sidebar-link">3.1 解压hadoop压缩包</a></li><li class="sidebar-sub-header"><a href="/pages/fe631f/#_3-2-修改hadoop-env-sh" class="sidebar-link">3.2 修改hadoop-env.sh</a></li><li class="sidebar-sub-header"><a href="/pages/fe631f/#_3-3-修改core-site-xml" class="sidebar-link">3.3 修改core-site.xml</a></li><li class="sidebar-sub-header"><a href="/pages/fe631f/#_3-4-修改hdfs-site-xml" class="sidebar-link">3.4 修改hdfs-site.xml</a></li><li class="sidebar-sub-header"><a href="/pages/fe631f/#_3-5-修改mapred-site-xml" class="sidebar-link">3.5 修改mapred-site.xml</a></li><li class="sidebar-sub-header"><a href="/pages/fe631f/#_3-6-修改yarn-site-xml" class="sidebar-link">3.6 修改yarn-site.xml</a></li><li class="sidebar-sub-header"><a href="/pages/fe631f/#_3-7-修改slaves" class="sidebar-link">3.7 修改slaves</a></li><li class="sidebar-sub-header"><a href="/pages/fe631f/#_3-8-远程拷贝hadoop文件夹" class="sidebar-link">3.8 远程拷贝hadoop文件夹</a></li><li class="sidebar-sub-header"><a href="/pages/fe631f/#_3-9-修改两个rm的yarn-site-xml" class="sidebar-link">3.9 修改两个RM的yarn-site.xml</a></li><li class="sidebar-sub-header"><a href="/pages/fe631f/#_3-10-配置环境变量" class="sidebar-link">3.10 配置环境变量</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/fe631f/#_4-启动与初始化hadoop集群" class="sidebar-link">4. 启动与初始化hadoop集群</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/fe631f/#_4-1-启动zookeeper集群" class="sidebar-link">4.1 启动zookeeper集群</a></li><li class="sidebar-sub-header"><a href="/pages/fe631f/#_4-2-启动hdfs" class="sidebar-link">4.2 启动HDFS</a></li><li class="sidebar-sub-header"><a href="/pages/fe631f/#_4-3-启动yarn" class="sidebar-link">4.3 启动YARN</a></li><li class="sidebar-sub-header"><a href="/pages/fe631f/#_4-4-启动jobhistory" class="sidebar-link">4.4 启动JobHistory</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/fe631f/#_5-验证集群是否可用" class="sidebar-link">5. 验证集群是否可用</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/fe631f/#_5-1-验证hdfs-ha" class="sidebar-link">5.1 验证HDFS HA</a></li><li class="sidebar-sub-header"><a href="/pages/fe631f/#_5-2-验证yarn-ha" class="sidebar-link">5.2 验证Yarn HA</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/fe631f/#_6-集群常用命令" class="sidebar-link">6. 集群常用命令</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/fe631f/#_6-1-关闭hadoop-ha集群" class="sidebar-link">6.1 关闭Hadoop HA集群</a></li><li class="sidebar-sub-header"><a href="/pages/fe631f/#_6-2-常用命令" class="sidebar-link">6.2 常用命令</a></li></ul></li></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>缓冲层搭建</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>计算层搭建</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据存储</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据采集</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据检索</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>辅助工具</span> <span class="arrow right"></span></p> <!----></section></li></ul> <div class="sidebar-slot sidebar-slot-bottom"><!-- 正方形 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="3508773082"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div></aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-70a2d273><div class="articleInfo" data-v-70a2d273><ul class="breadcrumbs" data-v-70a2d273><li data-v-70a2d273><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-70a2d273></a></li> <li data-v-70a2d273><a href="/categories/?category=%E3%80%8A%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA%E3%80%8B%E7%AC%94%E8%AE%B0" title="分类" data-v-70a2d273>《大数据环境搭建》笔记</a></li> <li data-v-70a2d273><a href="/categories/?category=Hadoop%E7%8E%AF%E5%A2%83" title="分类" data-v-70a2d273>Hadoop环境</a></li> <!----></ul> <div class="info" data-v-70a2d273><div title="作者" class="author iconfont icon-touxiang" data-v-70a2d273><a href="https://gitee.com/kflys" target="_blank" title="作者" class="beLink" data-v-70a2d273>kflys</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-70a2d273><a href="javascript:;" data-v-70a2d273>2021-09-28</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">
          Hadoop Ha高可用环境搭建
        </h1> <div class="page-slot page-slot-top"><!-- 固定100% * 90px可显示，max-height:90px未见显示-->
     <ins class="adsbygoogle"
          style="display:inline-block;width:100%;max-height:90px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6625304284"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="theme-vdoing-content content__default"><br> <p><a name="7d6b13f7"></a></p> <h1 id="zookeeper实现hadoop高可用环境"><a href="#zookeeper实现hadoop高可用环境" class="header-anchor">#</a> zookeeper实现hadoop高可用环境</h1> <blockquote><p>说明：</p> <ul><li>集群共5个节点，主机名分别是node01、node02、node03、node04、node05</li> <li>初始启动集群
<ul><li>node01上运行active namenode即主namenode；node02上运行standby namenode即从namenode</li> <li>node04上运行主resourcemanager；node05上运行从resourcemanager</li></ul></li></ul></blockquote> <ul><li>每个节点运行的进程如下表</li></ul> <table><thead><tr><th>机器名</th> <th>运行进程</th></tr></thead> <tbody><tr><td>node01</td> <td>NameNode/zkfc/Zookeeper/Journalnode/DataNode/NodeManager</td></tr> <tr><td>node02</td> <td>NameNode/zkfc/Zookeeper/Journalnode/DataNode/NodeManager</td></tr> <tr><td>node03</td> <td>Zookeeper/Journalnode/DataNode/NodeManager/JobHistoryServer</td></tr> <tr><td>node04</td> <td>ResourceManager</td></tr> <tr><td>node05</td> <td>ResourceManager</td></tr></tbody></table> <p><a name="8e8b5ed0"></a></p> <h1 id="hadoop-ha搭建"><a href="#hadoop-ha搭建" class="header-anchor">#</a> Hadoop HA搭建</h1> <p><a name="c8b16434"></a></p> <h2 id="_1-虚拟机环境准备"><a href="#_1-虚拟机环境准备" class="header-anchor">#</a> 1. 虚拟机环境准备</h2> <ul><li>准备<strong>5台</strong>虚拟机</li> <li>在做五节点hadoop HA集群搭建之前，要求先完成<strong>每台</strong>虚拟机的<strong>基本环境准备</strong> <ul><li>每个节点都要做好“在node01上开始解压hadoop的tar.gz包之前的环境配置”</li> <li>主要包括如下步骤（三节点Hadoop集群搭建时已讲解过，不再赘述）
<ul><li>windows|mac安装VMWare虚拟化软件</li> <li>VMWare下安装CenoOS7</li> <li>虚拟机关闭防火墙</li> <li>禁用selinux</li> <li>配置虚拟网卡</li> <li>配置虚拟机网络</li> <li>安装JDK</li> <li>配置时间同步</li> <li>修改主机名</li> <li>修改ip地址</li> <li>修改/etc/hosts</li> <li>各节点免密钥登陆</li> <li>重启虚拟机</li></ul></li></ul></li></ul> <p><a name="00e0cfe8"></a></p> <h2 id="_2-安装zookeeper集群"><a href="#_2-安装zookeeper集群" class="header-anchor">#</a> 2. 安装ZooKeeper集群</h2> <blockquote><p>Hadoop高可用集群需要使用ZooKeeper集群做分布式协调；所以先安装ZooKeeper集群</p></blockquote> <ul><li>在node01、node02、node03上安装ZooKeeper集群（详见三节点ZooKeeper集群搭建，不再赘述）</li></ul> <p><a name="fb37d444"></a></p> <h2 id="_3-五节点hadoop-ha搭建"><a href="#_3-五节点hadoop-ha搭建" class="header-anchor">#</a> 3. 五节点Hadoop HA搭建</h2> <blockquote><p><strong>注意：</strong>
①3.1到3.8在<strong>node01</strong>上操作
②<strong>此文档使用普通用户操作，如hadoop</strong>
③<strong>hadoop安装到用户主目录下，如/kfly/install</strong> <strong>请根据自己的实际情况修改</strong></p></blockquote> <p><a name="5496b244"></a></p> <h3 id="_3-1-解压hadoop压缩包"><a href="#_3-1-解压hadoop压缩包" class="header-anchor">#</a> 3.1 解压hadoop压缩包</h3> <ul><li>hadoop压缩包hadoop-2.6.0-cdh5.14.2_after_compile.tar.gz上传到node01的/kfly/soft路径中</li> <li>解压hadoop压缩包到/kfly/install</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#解压hadoop压缩包到/kfly/install</span>
<span class="token punctuation">[</span>hadoop@node01 ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">cd</span>
<span class="token punctuation">[</span>hadoop@node01 ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">cd</span> /kfly/soft/
<span class="token punctuation">[</span>hadoop@node01 soft<span class="token punctuation">]</span>$ <span class="token function">tar</span> -xzvf hadoop-2.6.0-cdh5.14.2_after_compile.tar.gz -C /kfly/install/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><a name="71efc8fb"></a></p> <h3 id="_3-2-修改hadoop-env-sh"><a href="#_3-2-修改hadoop-env-sh" class="header-anchor">#</a> 3.2 修改hadoop-env.sh</h3> <ul><li>进入hadoop配置文件路径$HADOOP_HOME/etc/hadoop</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>hadoop@node01 soft<span class="token punctuation">]</span>$ <span class="token builtin class-name">cd</span> /kfly/install/hadoop-2.6.0-cdh5.14.2/
<span class="token punctuation">[</span>hadoop@node01 hadoop-2.6.0-cdh5.14.2<span class="token punctuation">]</span>$ <span class="token builtin class-name">cd</span> etc/hadoop/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>修改hadoop-env.sh，修改JAVA_HOME值为jdk解压路径；保存退出</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">JAVA_HOME</span><span class="token operator">=</span>/kfly/install/jdk1.8.0_141
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><blockquote><p>注意：JAVA_HOME值修改为<strong>自己jdk的实际目录</strong></p></blockquote> <p><a name="924b274b"></a></p> <h3 id="_3-3-修改core-site-xml"><a href="#_3-3-修改core-site-xml" class="header-anchor">#</a> 3.3 修改core-site.xml</h3> <blockquote><p><strong>注意：</strong> <strong>情况一：值/kfly/install/hadoop-2.6.0-cdh5.14.2/tmp根据实际情况修改</strong> <strong>情况二：值node01:2181,node02:2181,node03:2181根据实际情况修改，修改成安装了zookeeper的虚拟机的主机名</strong></p></blockquote> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 指定hdfs的nameservice id为ns1 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>fs.defaultFS<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>hdfs://ns1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 指定hadoop临时文件存储的基目录 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>hadoop.tmp.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/kfly/install/hadoop-2.6.0-cdh5.14.2/tmp<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 指定zookeeper地址，ZKFailoverController使用 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>ha.zookeeper.quorum<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node01:2181,node02:2181,node03:2181<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><a name="e27e2828"></a></p> <h3 id="_3-4-修改hdfs-site-xml"><a href="#_3-4-修改hdfs-site-xml" class="header-anchor">#</a> 3.4 修改hdfs-site.xml</h3> <blockquote><p><strong>注意：</strong> <strong>情况一：属性值qjournal://node01:8485;node02:8485;node03:8485/ns1中的主机名，修改成实际安装zookeeper的虚拟机的主机名</strong> <strong>情况二：属性值/kfly/install/hadoop-2.6.0-cdh5.14.2/journal中”/kfly/install/hadoop-2.6.0-cdh5.14.2”替换成实际hadoop文件夹的路径</strong> <strong>情况三：属性值/home/hadoop/.ssh/id_rsa中/home/hadoop根据实际情况替换</strong></p></blockquote> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!--指定hdfs的nameservice列表，多个之前逗号分隔；此处只有一个ns1，需要和core-site.xml中的保持一致 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.nameservices<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>ns1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- ns1下面有两个NameNode，分别是nn1，nn2 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.ha.namenodes.ns1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>nn1,nn2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- nn1的RPC通信地址 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.rpc-address.ns1.nn1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node01:8020<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- nn1的http通信地址,web访问地址 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.http-address.ns1.nn1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node01:50070<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- nn2的RPC通信地址 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.rpc-address.ns1.nn2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node02:8020<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- nn2的http通信地址,web访问地址 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.http-address.ns1.nn2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node02:50070<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 指定NameNode的元数据在JournalNode上的存放位置 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.namenode.shared.edits.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>qjournal://node01:8485;node02:8485;node03:8485/ns1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 指定JournalNode在本地磁盘存放数据的位置 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.journalnode.edits.dir<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/kfly/install/hadoop-2.6.0-cdh5.14.2/journal<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 开启NameNode失败自动切换 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.ha.automatic-failover.enabled<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 此类决定哪个namenode是active，切换active和standby --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.client.failover.proxy.provider.ns1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>org.apache.hadoop.hdfs.server.namenode.ha.ConfiguredFailoverProxyProvider<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 配置隔离机制方法，多个机制用换行分割，即每个机制暂用一行--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.ha.fencing.methods<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>
		sshfence
		shell(/bin/true)
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 使用sshfence隔离机制时需要ssh免密登陆到目标机器 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.ha.fencing.ssh.private-key-files<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>/home/hadoop/.ssh/id_rsa<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 配置sshfence隔离机制超时时间 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>dfs.ha.fencing.ssh.connect-timeout<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>30000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br></div></div><p><a name="e33a42af"></a></p> <h3 id="_3-5-修改mapred-site-xml"><a href="#_3-5-修改mapred-site-xml" class="header-anchor">#</a> 3.5 修改mapred-site.xml</h3> <ul><li>重命名文件</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>hadoop@node01 hadoop<span class="token punctuation">]</span>$ <span class="token function">mv</span> mapred-site.xml.template mapred-site.xml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>修改mapred-site.xml</li></ul> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 指定运行mr job的运行时框架为yarn --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mapreduce.framework.name<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>yarn<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- MapReduce JobHistory Server IPC host:port --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mapreduce.jobhistory.address<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node03:10020<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- MapReduce JobHistory Server Web UI host:port --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>mapreduce.jobhistory.webapp.address<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node03:19888<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><a name="472e4cba"></a></p> <h3 id="_3-6-修改yarn-site-xml"><a href="#_3-6-修改yarn-site-xml" class="header-anchor">#</a> 3.6 修改yarn-site.xml</h3> <blockquote><p><strong>注意：</strong> <strong>情况一：属性yarn.resourcemanager.hostname.rm1的值node04根据实际情况替换</strong> <strong>情况二：属性yarn.resourcemanager.hostname.rm2的值node05根据实际情况替换</strong> <strong>情况三：属性值node01:2181,node02:2181,node03:2181根据实际情况替换；替换成实际安装zookeeper的虚拟机的主机名</strong></p></blockquote> <div class="language-xml line-numbers-mode"><pre class="language-xml"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>configuration</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 是否启用日志聚合.应用程序完成后,日志汇总收集每个容器的日志,这些日志移动到文件系统,例如HDFS. --&gt;</span>
	<span class="token comment">&lt;!-- 用户可以通过配置&quot;yarn.nodemanager.remote-app-log-dir&quot;、&quot;yarn.nodemanager.remote-app-log-dir-suffix&quot;来确定日志移动到的位置 --&gt;</span>
	<span class="token comment">&lt;!-- 用户可以通过应用程序时间服务器访问日志 --&gt;</span>
	<span class="token comment">&lt;!-- 启用日志聚合功能，应用程序完成后，收集各个节点的日志到一起便于查看 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.log-aggregation-enable<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
			<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 开启RM高可靠 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.ha.enabled<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 指定RM的cluster id为yrc，意为yarn cluster --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.cluster-id<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>yrc<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 指定RM的名字 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.ha.rm-ids<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>rm1,rm2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 指定第一个RM的地址 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.hostname.rm1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node04<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 指定第二个RM的地址 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.hostname.rm2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node05<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 配置第一台机器的resourceManager通信地址 --&gt;</span>
	<span class="token comment">&lt;!--客户端通过该地址向RM提交对应用程序操作--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.address.rm1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node04:8032<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!--向RM调度资源地址--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.scheduler.address.rm1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node04:8030<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!--NodeManager通过该地址交换信息--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.resource-tracker.address.rm1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node04:8031<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!--管理员通过该地址向RM发送管理命令--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.admin.address.rm1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node04:8033<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!--RM HTTP访问地址,查看集群信息--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.webapp.address.rm1<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node04:8088<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 配置第二台机器的resourceManager通信地址 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.address.rm2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node05:8032<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.scheduler.address.rm2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node05:8030<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.resource-tracker.address.rm2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node05:8031<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.admin.address.rm2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node05:8033<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.webapp.address.rm2<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node05:8088<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--开启resourcemanager自动恢复功能--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.recovery.enabled<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>true<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!--在node4上配置rm1,在node5上配置rm2,注意：一般都喜欢把配置好的文件远程复制到其它机器上，但这个在YARN的另一个机器上一定要修改，其他机器上不配置此项--&gt;</span>
	<span class="token comment">&lt;!--
    &lt;property&gt;
		&lt;name&gt;yarn.resourcemanager.ha.id&lt;/name&gt;
		&lt;value&gt;rm1&lt;/value&gt;
	   &lt;description&gt;If we want to launch more than one RM in single node, we need this configuration&lt;/description&gt;
	&lt;/property&gt;
	--&gt;</span>
	<span class="token comment">&lt;!--用于持久存储的类。尝试开启--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.store.class<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token comment">&lt;!-- 基于zookeeper的实现 --&gt;</span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>org.apache.hadoop.yarn.server.resourcemanager.recovery.ZKRMStateStore<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 单个任务可申请最少内存，默认1024MB --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.scheduler.minimum-allocation-mb<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>512<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!--多长时间聚合删除一次日志 此处--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.log-aggregation.retain-seconds<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>2592000<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--30 day--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!--时间在几秒钟内保留用户日志。只适用于如果日志聚合是禁用的--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.nodemanager.log.retain-seconds<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>604800<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span><span class="token comment">&lt;!--7 day--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
	<span class="token comment">&lt;!-- 指定zk集群地址 --&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.resourcemanager.zk-address<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>node01:2181,node02:2181,node03:2181<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
    <span class="token comment">&lt;!-- 逗号隔开的服务列表，列表名称应该只包含a-zA-Z0-9_,不能以数字开始--&gt;</span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>property</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>name</span><span class="token punctuation">&gt;</span></span>yarn.nodemanager.aux-services<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>name</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>value</span><span class="token punctuation">&gt;</span></span>mapreduce_shuffle<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>value</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>property</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>configuration</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br></div></div><p><a name="922f4c7b"></a></p> <h3 id="_3-7-修改slaves"><a href="#_3-7-修改slaves" class="header-anchor">#</a> 3.7 修改slaves</h3> <blockquote><p>node01、node02、node03上运行了datanode、nodemanager，所以修改slaves内容<strong>替换</strong>为：</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>node01
node02
node03
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><a name="fdf6e914"></a></p> <h3 id="_3-8-远程拷贝hadoop文件夹"><a href="#_3-8-远程拷贝hadoop文件夹" class="header-anchor">#</a> 3.8 远程拷贝hadoop文件夹</h3> <blockquote><p>拷贝到node02~node05</p></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>hadoop@node01 hadoop<span class="token punctuation">]</span>$ <span class="token function">scp</span> -r /kfly/install/hadoop-2.6.0-cdh5.14.2/ node02:/kfly/install/
<span class="token punctuation">[</span>hadoop@node01 hadoop<span class="token punctuation">]</span>$ <span class="token function">scp</span> -r /kfly/install/hadoop-2.6.0-cdh5.14.2/ node03:/kfly/install/
<span class="token punctuation">[</span>hadoop@node01 hadoop<span class="token punctuation">]</span>$ <span class="token function">scp</span> -r /kfly/install/hadoop-2.6.0-cdh5.14.2/ node04:/kfly/install/
<span class="token punctuation">[</span>hadoop@node01 hadoop<span class="token punctuation">]</span>$ <span class="token function">scp</span> -r /kfly/install/hadoop-2.6.0-cdh5.14.2/ node05:/kfly/install/
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p><a name="bb1a4a22"></a></p> <h3 id="_3-9-修改两个rm的yarn-site-xml"><a href="#_3-9-修改两个rm的yarn-site-xml" class="header-anchor">#</a> 3.9 修改两个RM的yarn-site.xml</h3> <ul><li>在<strong>node04</strong>上，找到属性<code>yarn.resourcemanager.ha.id</code>去除注释①、②</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>hadoop@node04 ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">cd</span> /kfly/install/hadoop-2.6.0-cdh5.14.2/etc/hadoop
<span class="token punctuation">[</span>hadoop@node04 hadoop<span class="token punctuation">]</span>$ <span class="token function">vim</span> yarn-site.xml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><br><img src="http://kflys.gitee.io/upic/2020/03/31/uPic/kfly-top/zookeeper%E5%88%86%E5%B8%83%E5%BC%8F%E5%8D%8F%E8%B0%83%E6%A1%86%E6%9E%B6-hadoop%E9%AB%98%E5%8F%AF%E7%94%A8%E6%96%B9%E6%A1%88/assets/Image201909232016.png#height=184&amp;id=ZgKwJ&amp;originHeight=184&amp;originWidth=1556&amp;originalType=binary&amp;ratio=1&amp;status=done&amp;style=none&amp;width=1556" alt=""><br></p> <ul><li>在<strong>node05</strong>上
<ul><li>找到属性<code>yarn.resourcemanager.ha.id</code>去除注释<strong>①、②</strong></li> <li><strong>③</strong>修改成rm2</li></ul></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token punctuation">[</span>hadoop@node05 ~<span class="token punctuation">]</span>$ <span class="token builtin class-name">cd</span> /kfly/install/hadoop-2.6.0-cdh5.14.2/etc/hadoop/
<span class="token punctuation">[</span>hadoop@node05 hadoop<span class="token punctuation">]</span>$ <span class="token function">vim</span> yarn-site.xml
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><br><img src="http://kflys.gitee.io/upic/2020/03/31/uPic/kfly-top/zookeeper%E5%88%86%E5%B8%83%E5%BC%8F%E5%8D%8F%E8%B0%83%E6%A1%86%E6%9E%B6-hadoop%E9%AB%98%E5%8F%AF%E7%94%A8%E6%96%B9%E6%A1%88/assets/Image201909232022.png#height=187&amp;id=SmPDQ&amp;originHeight=187&amp;originWidth=1551&amp;originalType=binary&amp;ratio=1&amp;status=done&amp;style=none&amp;width=1551" alt=""><br></p> <ul><li>修改后，结果如下</li></ul> <p><br><img src="http://kflys.gitee.io/upic/2020/03/31/uPic/kfly-top/zookeeper%E5%88%86%E5%B8%83%E5%BC%8F%E5%8D%8F%E8%B0%83%E6%A1%86%E6%9E%B6-hadoop%E9%AB%98%E5%8F%AF%E7%94%A8%E6%96%B9%E6%A1%88/assets/Image201909232024.png#height=187&amp;id=FmrUx&amp;originHeight=187&amp;originWidth=1555&amp;originalType=binary&amp;ratio=1&amp;status=done&amp;style=none&amp;width=1555" alt=""><br></p> <p><a name="66e739b4"></a></p> <h3 id="_3-10-配置环境变量"><a href="#_3-10-配置环境变量" class="header-anchor">#</a> 3.10 配置环境变量</h3> <ul><li><strong>node01到node05五个节点都配置环境变量</strong></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token comment">#将hadoop添加到环境变量中</span>
<span class="token function">vim</span> /etc/profile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>添加内容如下（注意：若HADOOP_HOME已经存在，则修改）：</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">export</span> <span class="token assign-left variable">HADOOP_HOME</span><span class="token operator">=</span>/kfly/install/hadoop-2.6.0-cdh5.14.2/
<span class="token builtin class-name">export</span> <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span><span class="token builtin class-name">:</span><span class="token variable">$HADOOP_HOME</span>/bin:<span class="token variable">$HADOOP_HOME</span>/sbin
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>编译文件，使新增环境变量生效</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token builtin class-name">source</span> /etc/profile
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><a name="974249f9"></a></p> <h2 id="_4-启动与初始化hadoop集群"><a href="#_4-启动与初始化hadoop集群" class="header-anchor">#</a> 4. 启动与初始化hadoop集群</h2> <blockquote><p>**注意：**严格按照下面的步骤 先检查各台hadoop环境变量是否设置好</p></blockquote> <p><a name="0a76e926"></a></p> <h3 id="_4-1-启动zookeeper集群"><a href="#_4-1-启动zookeeper集群" class="header-anchor">#</a> 4.1 启动zookeeper集群</h3> <blockquote><p>注意：根据zookeeper实际安装情况，启动zookeeper</p></blockquote> <p><br>分别在node01、node02、node03上启动zookeeper<br></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>zkServer.sh start
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><br>#查看状态：一个为leader，另外两个为follower<br></p> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>zkServer.sh status
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><a name="add08e7f"></a></p> <h3 id="_4-2-启动hdfs"><a href="#_4-2-启动hdfs" class="header-anchor">#</a> 4.2 启动HDFS</h3> <p><a name="544b6a6a"></a></p> <h4 id="_4-2-1-格式化zk"><a href="#_4-2-1-格式化zk" class="header-anchor">#</a> 4.2.1 格式化ZK</h4> <blockquote><p>在<strong>node01</strong>上执行即可</p> <ul><li>集群有两个namenode，分别在node01、node02上</li> <li>每个namenode对应一个zkfc进程；</li> <li>在主namenode node01上格式化zkfc</li></ul></blockquote> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>hdfs zkfc -formatZK
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><a name="2ffd3fb5"></a></p> <h4 id="_4-2-2-启动journalnode"><a href="#_4-2-2-启动journalnode" class="header-anchor">#</a> 4.2.2 启动journalnode</h4> <ul><li>在<strong>node01</strong>上执行
<ul><li>会启动node01、node02、node03上的journalnode</li> <li>因为使用的是hadoop-daemon<strong>s</strong>.sh</li></ul></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>hadoop-daemons.sh start journalnode
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>运行jps命令检验，node01、node02、node03上多了JournalNode进程</li></ul> <p><a name="effc536f"></a></p> <h4 id="_4-2-3-格式化hdfs"><a href="#_4-2-3-格式化hdfs" class="header-anchor">#</a> 4.2.3 格式化HDFS</h4> <ul><li>在node01上执行</li> <li>根据集群规划node01、node02上运行namenode；所以<strong>只在主namenode节点</strong>即node01上执行命令:
<ul><li>此命令慎用；只在集群搭建（初始化）时使用一次；</li> <li>一旦再次使用，会将HDFS上之前的数据格式化删除掉</li></ul></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>hdfs namenode -format
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>下图表示格式化成功</li></ul> <p><br><img src="http://kflys.gitee.io/upic/2020/03/31/uPic/kfly-top/zookeeper%E5%88%86%E5%B8%83%E5%BC%8F%E5%8D%8F%E8%B0%83%E6%A1%86%E6%9E%B6-hadoop%E9%AB%98%E5%8F%AF%E7%94%A8%E6%96%B9%E6%A1%88/assets/Image201909241056.png#height=366&amp;id=iN6Bf&amp;originHeight=366&amp;originWidth=1558&amp;originalType=binary&amp;ratio=1&amp;status=done&amp;style=none&amp;width=1558" alt=""><br></p> <p><a name="8152e843"></a></p> <h4 id="_4-2-4-初始化元数据、启动主nn"><a href="#_4-2-4-初始化元数据、启动主nn" class="header-anchor">#</a> 4.2.4 初始化元数据、启动主NN</h4> <ul><li>node01上执行（主namenode）</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>hdfs namenode -initializeSharedEdits -force
<span class="token comment">#启动HDFS</span>
start-dfs.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><a name="840890f0"></a></p> <h4 id="_4-2-5-同步元数据信息、启动从nn"><a href="#_4-2-5-同步元数据信息、启动从nn" class="header-anchor">#</a> 4.2.5 同步元数据信息、启动从NN</h4> <ul><li><strong>node02</strong>上执行（从namenode）</li> <li>同步元数据信息，并且设置node02上namenode为standBy状态</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>hdfs namenode -bootstrapStandby
hadoop-daemon.sh start namenode
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><a name="62c3d7a8"></a></p> <h4 id="_4-2-5-jps查看进程"><a href="#_4-2-5-jps查看进程" class="header-anchor">#</a> 4.2.5 JPS查看进程</h4> <ul><li>node01上</li></ul> <p><br><img src="http://kflys.gitee.io/upic/2020/03/31/uPic/kfly-top/zookeeper%E5%88%86%E5%B8%83%E5%BC%8F%E5%8D%8F%E8%B0%83%E6%A1%86%E6%9E%B6-hadoop%E9%AB%98%E5%8F%AF%E7%94%A8%E6%96%B9%E6%A1%88/assets/Image201909241118.png#height=173&amp;id=m7Iuk&amp;originHeight=173&amp;originWidth=1061&amp;originalType=binary&amp;ratio=1&amp;status=done&amp;style=none&amp;width=1061" alt=""><br></p> <ul><li>node02上</li></ul> <p><br><img src="http://kflys.gitee.io/upic/2020/03/31/uPic/kfly-top/zookeeper%E5%88%86%E5%B8%83%E5%BC%8F%E5%8D%8F%E8%B0%83%E6%A1%86%E6%9E%B6-hadoop%E9%AB%98%E5%8F%AF%E7%94%A8%E6%96%B9%E6%A1%88/assets/Image201909241119.png#height=174&amp;id=XP8Ip&amp;originHeight=174&amp;originWidth=1035&amp;originalType=binary&amp;ratio=1&amp;status=done&amp;style=none&amp;width=1035" alt=""><br></p> <ul><li>node03上</li></ul> <p><br><img src="http://kflys.gitee.io/upic/2020/03/31/uPic/kfly-top/zookeeper%E5%88%86%E5%B8%83%E5%BC%8F%E5%8D%8F%E8%B0%83%E6%A1%86%E6%9E%B6-hadoop%E9%AB%98%E5%8F%AF%E7%94%A8%E6%96%B9%E6%A1%88/assets/Image201909241120.png#height=128&amp;id=t4kb2&amp;originHeight=128&amp;originWidth=1019&amp;originalType=binary&amp;ratio=1&amp;status=done&amp;style=none&amp;width=1019" alt=""><br></p> <p><a name="75a44d73"></a></p> <h3 id="_4-3-启动yarn"><a href="#_4-3-启动yarn" class="header-anchor">#</a> 4.3 启动YARN</h3> <p><a name="405d85c8"></a></p> <h4 id="_4-6-1-主resourcemanager"><a href="#_4-6-1-主resourcemanager" class="header-anchor">#</a> 4.6.1 <strong>主resourcemanager</strong></h4> <ul><li><strong>node04</strong>上执行（<strong>主resourcemanager</strong>）
<ul><li>把namenode和resourcemanager部署在不同节点，是因为性能问题，因为他们都要占用大量资源</li> <li>坑：在node04上启动yarn之前，先依次从node04 ssh远程连接到node01、node02、node03、node04、node05；因为初次ssh时，需要交互，输入yes，回车</li></ul></li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>start-yarn.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><a name="a0c3481c"></a></p> <h4 id="_4-6-2-从resourcemanager"><a href="#_4-6-2-从resourcemanager" class="header-anchor">#</a> 4.6.2 从resourcemanager</h4> <ul><li>在从resourcemanager即<strong>node05</strong>上启动rm</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>yarn-daemon.sh start resourcemanager
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><a name="a1de767c"></a></p> <h4 id="_4-6-3-查看resourcemanager状态"><a href="#_4-6-3-查看resourcemanager状态" class="header-anchor">#</a> 4.6.3 查看resourceManager状态</h4> <ul><li>node04上，它的resourcemanager的Id是rm1</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> rmadmin -getServiceState rm1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>node05上，它的resourcemanager的Id是rm2</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> rmadmin -getServiceState rm2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><a name="416428d8"></a></p> <h3 id="_4-4-启动jobhistory"><a href="#_4-4-启动jobhistory" class="header-anchor">#</a> 4.4 启动JobHistory</h3> <ul><li><strong>node03</strong>上执行</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>mr-jobhistory-daemon.sh start historyserver
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><a name="786872c6"></a></p> <h2 id="_5-验证集群是否可用"><a href="#_5-验证集群是否可用" class="header-anchor">#</a> 5. 验证集群是否可用</h2> <p><a name="96eb41d7"></a></p> <h3 id="_5-1-验证hdfs-ha"><a href="#_5-1-验证hdfs-ha" class="header-anchor">#</a> 5.1 验证HDFS HA</h3> <p><a name="7227b774"></a></p> <h4 id="_5-1-1-访问web-ui"><a href="#_5-1-1-访问web-ui" class="header-anchor">#</a> 5.1.1 访问WEB UI</h4> <blockquote><p>node01、node02一主一备</p></blockquote> <div class="language-html line-numbers-mode"><pre class="language-html"><code>http://node01:50070
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><br><img src="http://kflys.gitee.io/upic/2020/03/31/uPic/kfly-top/zookeeper%E5%88%86%E5%B8%83%E5%BC%8F%E5%8D%8F%E8%B0%83%E6%A1%86%E6%9E%B6-hadoop%E9%AB%98%E5%8F%AF%E7%94%A8%E6%96%B9%E6%A1%88/assets/Image201907271415.png#height=725&amp;id=F3fsh&amp;originHeight=725&amp;originWidth=1108&amp;originalType=binary&amp;ratio=1&amp;status=done&amp;style=none&amp;width=1108" alt=""><br></p> <div class="language- line-numbers-mode"><pre class="language-text"><code>http://node02:50070
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><br><img src="http://kflys.gitee.io/upic/2020/03/31/uPic/kfly-top/zookeeper%E5%88%86%E5%B8%83%E5%BC%8F%E5%8D%8F%E8%B0%83%E6%A1%86%E6%9E%B6-hadoop%E9%AB%98%E5%8F%AF%E7%94%A8%E6%96%B9%E6%A1%88/assets/Image201907271416.png#height=733&amp;id=xjWJ4&amp;originHeight=733&amp;originWidth=1116&amp;originalType=binary&amp;ratio=1&amp;status=done&amp;style=none&amp;width=1116" alt=""><br></p> <p><a name="230dbf5d"></a></p> <h4 id="_5-1-2-模拟主备切换"><a href="#_5-1-2-模拟主备切换" class="header-anchor">#</a> 5.1.2 模拟主备切换</h4> <ul><li>在主namenode节点，运行</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>hadoop-daemon.sh stop namenode
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>访问之前为&quot;备namenode&quot;的WEB UI；发现状态更新为active</li> <li>或者使用命令查看状态</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>hdfs haadmin -getServiceState nn2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><br><img src="http://kflys.gitee.io/upic/2020/03/31/uPic/kfly-top/zookeeper%E5%88%86%E5%B8%83%E5%BC%8F%E5%8D%8F%E8%B0%83%E6%A1%86%E6%9E%B6-hadoop%E9%AB%98%E5%8F%AF%E7%94%A8%E6%96%B9%E6%A1%88/assets/Image201907271417.png#height=724&amp;id=b4DcA&amp;originHeight=724&amp;originWidth=1117&amp;originalType=binary&amp;ratio=1&amp;status=done&amp;style=none&amp;width=1117" alt=""><br></p> <ul><li>启动刚才手动停掉的namenode</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>hadoop-daemon.sh start namenode
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>访问它的WEB UI，发现状态更新为standby</li> <li>或者使用命令查看状态</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>hdfs haadmin -getServiceState nn1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><br><img src="http://kflys.gitee.io/upic/2020/03/31/uPic/kfly-top/zookeeper%E5%88%86%E5%B8%83%E5%BC%8F%E5%8D%8F%E8%B0%83%E6%A1%86%E6%9E%B6-hadoop%E9%AB%98%E5%8F%AF%E7%94%A8%E6%96%B9%E6%A1%88/assets/Image201907271419.png#height=723&amp;id=gBPDX&amp;originHeight=723&amp;originWidth=1098&amp;originalType=binary&amp;ratio=1&amp;status=done&amp;style=none&amp;width=1098" alt=""><br></p> <p><a name="16b14187"></a></p> <h3 id="_5-2-验证yarn-ha"><a href="#_5-2-验证yarn-ha" class="header-anchor">#</a> 5.2 验证Yarn HA</h3> <blockquote><p>node04、node05主备切换</p></blockquote> <p><a name="b7dcc625"></a></p> <h4 id="_5-2-1-访问web-ui"><a href="#_5-2-1-访问web-ui" class="header-anchor">#</a> 5.2.1 访问WEB UI</h4> <ul><li>node04浏览器访问</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>http://node04:8088/cluster/cluster
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><br><img src="http://kflys.gitee.io/upic/2020/03/31/uPic/kfly-top/zookeeper%E5%88%86%E5%B8%83%E5%BC%8F%E5%8D%8F%E8%B0%83%E6%A1%86%E6%9E%B6-hadoop%E9%AB%98%E5%8F%AF%E7%94%A8%E6%96%B9%E6%A1%88/assets/Image201907271519.png#height=714&amp;id=vVVKI&amp;originHeight=714&amp;originWidth=1359&amp;originalType=binary&amp;ratio=1&amp;status=done&amp;style=none&amp;width=1359" alt=""><br></p> <ul><li>node05浏览器访问</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>http://node05:8088/cluster/cluster
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><br><img src="http://kflys.gitee.io/upic/2020/03/31/uPic/kfly-top/zookeeper%E5%88%86%E5%B8%83%E5%BC%8F%E5%8D%8F%E8%B0%83%E6%A1%86%E6%9E%B6-hadoop%E9%AB%98%E5%8F%AF%E7%94%A8%E6%96%B9%E6%A1%88/assets/Image201907271520.png#height=710&amp;id=CyyRY&amp;originHeight=710&amp;originWidth=1253&amp;originalType=binary&amp;ratio=1&amp;status=done&amp;style=none&amp;width=1253" alt=""><br></p> <p><a name="d4d72b2c"></a></p> <h4 id="_5-2-2-模拟主备切换"><a href="#_5-2-2-模拟主备切换" class="header-anchor">#</a> 5.2.2 模拟主备切换</h4> <ul><li>在主resourcemanager节点，运行</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>yarn-daemon.sh stop resourcemanager
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>访问之前为&quot;备resourcemanager&quot;的WEB UI；发现状态更新为active</li> <li>或者命令查看状态</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> rmadmin -getServiceState rm2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><br><img src="http://kflys.gitee.io/upic/2020/03/31/uPic/kfly-top/zookeeper%E5%88%86%E5%B8%83%E5%BC%8F%E5%8D%8F%E8%B0%83%E6%A1%86%E6%9E%B6-hadoop%E9%AB%98%E5%8F%AF%E7%94%A8%E6%96%B9%E6%A1%88/assets/Image201907271524.png#height=714&amp;id=qIuU4&amp;originHeight=714&amp;originWidth=1083&amp;originalType=binary&amp;ratio=1&amp;status=done&amp;style=none&amp;width=1083" alt=""><br></p> <ul><li>启动刚才手动停掉的resourcemanager</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>yarn-daemon.sh start resourcemanager
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>访问它的WEB UI，发现状态更新为standby</li> <li>或者命令查看状态</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> rmadmin -getServiceState rm1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><br><img src="http://kflys.gitee.io/upic/2020/03/31/uPic/kfly-top/zookeeper%E5%88%86%E5%B8%83%E5%BC%8F%E5%8D%8F%E8%B0%83%E6%A1%86%E6%9E%B6-hadoop%E9%AB%98%E5%8F%AF%E7%94%A8%E6%96%B9%E6%A1%88/assets/Image201907271526.png#height=711&amp;id=l9Tpe&amp;originHeight=711&amp;originWidth=973&amp;originalType=binary&amp;ratio=1&amp;status=done&amp;style=none&amp;width=973" alt=""><br></p> <p><a name="f0f899b7"></a></p> <h4 id="_5-2-3-运行mr示例"><a href="#_5-2-3-运行mr示例" class="header-anchor">#</a> 5.2.3 运行MR示例</h4> <ul><li>运行一下hadoop示例中的WordCount程序：</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>hadoop fs -put /kfly/install/hadoop-2.6.0-cdh5.14.2/LICENSE.txt /
hadoop jar /kfly/install/hadoop-2.6.0-cdh5.14.2/share/hadoop/mapreduce/hadoop-mapreduce-examples-2.6.0-cdh5.14.2.jar wordcount /LICENSE.txt /w0727
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p><a name="01192fac"></a></p> <h2 id="_6-集群常用命令"><a href="#_6-集群常用命令" class="header-anchor">#</a> 6. 集群常用命令</h2> <p><a name="fa6af8c3"></a></p> <h3 id="_6-1-关闭hadoop-ha集群"><a href="#_6-1-关闭hadoop-ha集群" class="header-anchor">#</a> 6.1 关闭Hadoop HA集群</h3> <blockquote><p>正确指令执行顺序如下</p></blockquote> <ul><li>主namenode上运行</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>stop-dfs.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>主resoucemanager上运行</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>stop-yarn.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>从resoucemanager上运行</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>yarn-daemon.sh stop resourcemanager
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>关闭zookeeper集群；每个zk服务器运行</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>zkServer.sh stop
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p><a name="710f0698"></a></p> <h3 id="_6-2-常用命令"><a href="#_6-2-常用命令" class="header-anchor">#</a> 6.2 常用命令</h3> <ul><li>单独启动namenode</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>hadoop-daemon.sh start namenode
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>单独启动datanode</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>hadoop-daemon.sh start datanode
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>单独启动journalnode</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>hadoop-daemon.sh start journalnode
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>启动zookeeper</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>./zkServer.sh start
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>启动hdfs</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>start-dfs.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>启动yarn</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>start-yarn.sh
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>单独启动resorucemanager</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>yarn-daemon.sh start resouremanger
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>查看namenode状态（namenode1）</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code>hdfs haadmin -getServiceState nn1
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><ul><li>查看resourcemanager状态（resourcemanager2）</li></ul> <div class="language-shell line-numbers-mode"><pre class="language-shell"><code><span class="token function">yarn</span> rmadmin -getServiceState rm2
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></div></div> <div class="page-slot page-slot-bottom"><!-- 横向自适应 -->
      <ins class="adsbygoogle"
          style="display:block"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="6620245489"
          data-ad-format="auto"
          data-full-width-responsive="true"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script></div> <div class="page-edit"><div class="edit-link"><a href="https://gitee.com/kflys/clivia-blog/edit/master/docs/《大数据环境搭建》笔记/10.Hadoop环境/03.Hadoop高可用环境搭建.md" target="_blank" rel="noopener noreferrer">编辑</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="tags"><a href="/tags/?tag=hadoop" title="标签">#hadoop</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">10/11/2021, 5:53:41 PM</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/a3177d/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">Hadoop环境搭建</div></a> <a href="/pages/0f9c06/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">Zookeeper环境搭建</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/a3177d/" class="prev">Hadoop环境搭建</a></span> <span class="next"><a href="/pages/0f9c06/">Zookeeper环境搭建</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/8e0b33/"><div>阿里官方Redis开发规范</div></a> <span>10-08</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/20a714/"><div>无监督学习</div></a> <span>01-26</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/e78220/"><div>模拟保存预加载</div></a> <span>01-26</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">更多文章&gt;</a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:clivia.pro@gmail.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://gitee.com/kflys" title="Gitee" target="_blank" class="iconfont icon-gitee"></a><a href="https://y.qq.com/n/ryqq/songDetail/003lgoEG1SWHmF" title="music" target="_blank" class="iconfont icon-erji"></a></div> <div><span> Theme by <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> | Powered by <a href="https://webify.cloudbase.net/" target="_blank">CloudBase Webify</a></span></div> <span>Clivia‘s <a href="https://gitee.com/kflys/clivia-blog" target="_blank">blog</a> </span>
    | Copyright © 2019-2022
    <span><a href="http://beian.miit.gov.cn/" target="_blank">皖ICP备2021014093号</a> </span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <!----> <!----> <div class="custom-html-window custom-html-window-rb" style="display:;"><div class="custom-wrapper"><i class="close-but">×</i> <div><!-- 固定160*160px -->
      <ins class="adsbygoogle"
          style="display:inline-block;max-width:160px;max-height:160px"
          data-ad-client="ca-pub-7828333725993554"
          data-ad-slot="8377369658"></ins>
      <script>
          (adsbygoogle = window.adsbygoogle || []).push({});
      </script>
      </div></div></div></div><div class="global-ui"><div id="live2d-widget" class="live2d-widget-container" style="position:fixed;left:65px;bottom:0px;width:135px;height:300px;z-index:99999;opacity:0.8;pointer-events:none;"><!----></div></div></div>
    <script src="/assets/js/app.06f86fe0.js" defer></script><script src="/assets/js/2.ed69dcfc.js" defer></script><script src="/assets/js/3.b6cd915d.js" defer></script><script src="/assets/js/132.5dd5eece.js" defer></script>
  </body>
</html>