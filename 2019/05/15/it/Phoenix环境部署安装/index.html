<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="天行健、君子以自强不息；地势坤，君子以厚德载物。">
    <meta name="keyword"  content="兰草">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        Phoenix环境部署安装 - kfly的博客 | kfly&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <link rel="stylesheet" href="//at.alicdn.com/t/font_1598291_q3el2wqimj.css" type="text/css">
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> 君子谦谦，温和有礼，有才而不骄，得志而不傲，居于谷而不卑。 </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar ">
            <img src="/img/avatar.jpg" />
        </div>
        <div class="name">
            <i>kfly</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont iconhome"></i>
                    <span>主页</span>
                </a>
            </li>
 	   <li >
                <a href="/spec/">
                    <i class="iconfont iconzhuanti"></i>
                    <span>专题</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archive">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>简历</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Phoenix安装部署"><span class="toc-text">Phoenix安装部署</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1、下载安装包"><span class="toc-text">1、下载安装包</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2、上传解压"><span class="toc-text">2、上传解压</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3、修改配置"><span class="toc-text">3、修改配置</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-拷贝jar包"><span class="toc-text">3.1 拷贝jar包</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-拷贝配置文件"><span class="toc-text">3.2 拷贝配置文件</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4、验证是否成功"><span class="toc-text">4、验证是否成功</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5、Phoenix使用"><span class="toc-text">5、Phoenix使用</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#5-1-批处理方式"><span class="toc-text">5.1 批处理方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-2-命令行方式"><span class="toc-text">5.2 命令行方式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-3-GUI方式"><span class="toc-text">5.3 GUI方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-1-准备两个文件"><span class="toc-text">5.3.1 准备两个文件</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-2-更新jar包"><span class="toc-text">5.3.2 更新jar包</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-3-3-通过dbeaver连接phoenix"><span class="toc-text">5.3.3 通过dbeaver连接phoenix</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-4-4-创建数据库表，并实现sql进行操作"><span class="toc-text">5.4.4 创建数据库表，并实现sql进行操作</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#5-4-JDBC调用方式"><span class="toc-text">5.4 JDBC调用方式</span></a></li></ol></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> 君子谦谦，温和有礼，有才而不骄，得志而不傲，居于谷而不卑。 </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        Phoenix环境部署安装
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2019-05-15 18:44:51</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#phoenix" title="phoenix">phoenix</a>
        <span>/</span>
        
        <a class="tag" href="/tags/#环境搭建" title="环境搭建">环境搭建</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <h1 id="Phoenix安装部署"><a href="#Phoenix安装部署" class="headerlink" title="Phoenix安装部署"></a>Phoenix安装部署</h1><ul>
<li>需要先安装好HBase集群</li>
<li>phoenix只是一个工具，只需要在一台机器上安装就可以了，这里我们选择node02服务器来进行安装一台即可</li>
</ul>
<h1 id="1、下载安装包"><a href="#1、下载安装包" class="headerlink" title="1、下载安装包"></a>1、下载安装包</h1><ul>
<li>从对应的地址下载：<a href="http://archive.apache.org/dist/phoenix/" target="_blank" rel="noopener">http://archive.apache.org/dist/phoenix/</a></li>
<li>注意版本兼容问题；这里我们使用的是<ul>
<li>apache-phoenix-4.14.0-cdh5.14.2-bin.tar.gz</li>
</ul>
</li>
</ul>
<h1 id="2、上传解压"><a href="#2、上传解压" class="headerlink" title="2、上传解压"></a>2、上传解压</h1><ul>
<li>将安装包上传到node02服务器的/kfly/soft路径下，然后进行解压</li>
</ul>
<pre><code class="shell">cd /kfly/soft/
tar -zxf apache-phoenix-4.14.0-cdh5.14.2-bin.tar.gz -C /kfly/install/
</code></pre>
<h1 id="3、修改配置"><a href="#3、修改配置" class="headerlink" title="3、修改配置"></a>3、修改配置</h1><h2 id="3-1-拷贝jar包"><a href="#3-1-拷贝jar包" class="headerlink" title="3.1 拷贝jar包"></a>3.1 拷贝jar包</h2><ul>
<li><p>将phoenix目录下的==phoenix-4.8.2-HBase-1.2-server.jar==、==phoenix-core-4.8.2-HBase-1.2.jar==拷贝到==各个 HBase节点的lib目录==下。</p>
</li>
<li><p>node02执行以下命令</p>
<pre><code class="shell">cd /kfly/install/apache-phoenix-4.14.0-cdh5.14.2-bin

scp phoenix-4.14.0-cdh5.14.2-server.jar phoenix-core-4.14.0-cdh5.14.2.jar node01:/kfly/install/hbase-1.2.0-cdh5.14.2/lib/ 

scp phoenix-4.14.0-cdh5.14.2-server.jar phoenix-core-4.14.0-cdh5.14.2.jar node02:/kfly/install/hbase-1.2.0-cdh5.14.2/lib/ 

scp phoenix-4.14.0-cdh5.14.2-server.jar phoenix-core-4.14.0-cdh5.14.2.jar node03:/kfly/install/hbase-1.2.0-cdh5.14.2/lib/ 
</code></pre>
</li>
</ul>
<h2 id="3-2-拷贝配置文件"><a href="#3-2-拷贝配置文件" class="headerlink" title="3.2 拷贝配置文件"></a>3.2 拷贝配置文件</h2><ul>
<li><p>将HBase的配置文件==hbase-site.xml==、 hadoop下的配置文件==core-site.xml== 、==hdfs-site.xml==放到phoenix/bin/下，替换phoenix原来的配置文件。</p>
<p>node02执行以下命令，进行拷贝配置文件</p>
<pre><code class="shell">cp /kfly/install/hadoop-2.6.0/etc/hadoop/core-site.xml  /kfly/install/apache-phoenix-4.14.0-cdh5.14.2-bin/bin/

scp /kfly/install/hadoop-2.6.0/etc/hadoop/hdfs-site.xml /kfly/install/apache-phoenix-4.14.0-cdh5.14.2-bin/bin/

scp /kfly/install/hbase-1.2.0-cdh5.14.2/conf/hbase-site.xml /kfly/install/apache-phoenix-4.14.0-cdh5.14.2-bin/bin/
</code></pre>
</li>
<li><p>重启hbase集群，使Phoenix的jar包生效。</p>
<p>node01执行以下命令来重启hbase的集群</p>
<pre><code>cd /kfly/install/hbase-1.2.0-cdh5.14.2/
bin/stop-hbase.sh 
bin/start-hbase.sh 
</code></pre></li>
</ul>
<h1 id="4、验证是否成功"><a href="#4、验证是否成功" class="headerlink" title="4、验证是否成功"></a>4、验证是否成功</h1><ul>
<li><p>在phoenix/bin下输入命令, 进入到命令行，接下来就可以操作了</p>
</li>
<li><p>node02执行以下命令，进入phoenix客户端</p>
<pre><code class="shell">cd /kfly/install/apache-phoenix-4.14.0-cdh5.14.2-bin/
bin/sqlline.py node01:2181
</code></pre>
</li>
</ul>
<h1 id="5、Phoenix使用"><a href="#5、Phoenix使用" class="headerlink" title="5、Phoenix使用"></a>5、Phoenix使用</h1><h2 id="5-1-批处理方式"><a href="#5-1-批处理方式" class="headerlink" title="5.1 批处理方式"></a>5.1 批处理方式</h2><ul>
<li>node02执行以下命令创建user_phoenix.sql文件</li>
</ul>
<pre><code>mkdir -p /kfly/doc/phoenixsql
cd /kfly/install/phoenixsql/
vi user_phoenix.sql
</code></pre><p>​    内容如下</p>
<pre><code class="sql">create table if not exists user_phoenix (state varchar(10) NOT NULL,  city varchar(20) NOT NULL,  population BIGINT  CONSTRAINT my_pk PRIMARY KEY (state, city));
</code></pre>
<ul>
<li>node02执行以下命令，创建user_phoenix.csv数据文件</li>
</ul>
<pre><code>cd /kfly/install/phoenixsql/
vi user_phoenix.csv
</code></pre><p>​    内容如下</p>
<pre><code>NY,New York,8143197
CA,Los Angeles,3844829
IL,Chicago,2842518
TX,Houston,2016582
PA,Philadelphia,1463281
AZ,Phoenix,1461575
TX,San Antonio,1256509
CA,San Diego,1255540
TX,Dallas,1213825
CA,San Jose,912332
</code></pre><ul>
<li>创建user_phoenix_query.sql文件</li>
</ul>
<pre><code>cd /kfly/doc/phoenixsql
vi user_phoenix_query.sql
</code></pre><p>​        内容如下</p>
<pre><code class="sql">select state as &quot;userState&quot;,count(city) as &quot;City Count&quot;,sum(population) as &quot;Population Sum&quot; FROM user_phoenix GROUP BY state; 
</code></pre>
<ul>
<li>执行sql语句</li>
</ul>
<pre><code class="shell">cd /kfly/doc/phoenixsql

/kfly/install/apache-phoenix-4.14.0-cdh5.14.2-bin/bin/psql.py  node01:2181 user_phoenix.sql user_phoenix.csv user_phoenix_query.sql
</code></pre>
<h2 id="5-2-命令行方式"><a href="#5-2-命令行方式" class="headerlink" title="5.2 命令行方式"></a>5.2 命令行方式</h2><ul>
<li>执行命令</li>
</ul>
<pre><code class="shell">cd /kfly/install/apache-phoenix-4.14.0-cdh5.14.2-bin/
bin/sqlline.py node01:2181
</code></pre>
<ul>
<li><p>退出命令行方式</p>
<p>phoenix的命令都需要一个==感叹号==</p>
</li>
</ul>
<pre><code>!quit
</code></pre><ul>
<li><p>查看phoenix的帮助文档，显示所有命令；用!help</p>
<pre><code>0: jdbc:phoenix:node01:2181&gt; !help
!all                Execute the specified SQL against all the current
                  connections
!autocommit         Set autocommit mode on or off
!batch              Start or execute a batch of statements
!brief              Set verbose mode off
!call               Execute a callable statement
!close              Close the current connection to the database
!closeall           Close all current open connections
!columns            List all the columns for the specified table
!commit             Commit the current transaction (if autocommit is off)
!connect            Open a new connection to the database.
!dbinfo             Give metadata information about the database
!describe           Describe a table
!dropall            Drop all tables in the current database
!exportedkeys       List all the exported keys for the specified table
!go                 Select the current connection
!help               Print a summary of command usage
!history            Display the command history
!importedkeys       List all the imported keys for the specified table
!indexes            List all the indexes for the specified table
!isolation          Set the transaction isolation for this connection
!list               List the current connections
!manual             Display the SQLLine manual
!metadata           Obtain metadata information
!nativesql          Show the native SQL for the specified statement
!outputformat       Set the output format for displaying results
                  (table,vertical,csv,tsv,xmlattrs,xmlelements)
!primarykeys        List all the primary keys for the specified table
!procedures         List all the procedures
!properties         Connect to the database specified in the properties file(s)
!quit               Exits the program
!reconnect          Reconnect to the database
!record             Record all output to the specified file
!rehash             Fetch table and column names for command completion
!rollback           Roll back the current transaction (if autocommit is off)
!run                Run a script from the specified file
!save               Save the current variabes and aliases
!scan               Scan for installed JDBC drivers
!script             Start saving a script to a file
!set                Set a sqlline variable
</code></pre></li>
</ul>
<p>Variable        Value      Description<br>=============== ========== ================================<br>autoCommit      true/false Enable/disable automatic<br>                           transaction commit<br>autoSave        true/false Automatically save preferences<br>color           true/false Control whether color is used<br>                           for display<br>fastConnect     true/false Skip building table/column list<br>                           for tab-completion<br>force           true/false Continue running script even<br>                           after errors<br>headerInterval  integer    The interval between which<br>                           headers are displayed<br>historyFile     path       File in which to save command<br>                           history. Default is<br>                           $HOME/.sqlline/history (UNIX,<br>                           Linux, Mac OS),<br>                           $HOME/sqlline/history (Windows)<br>incremental     true/false Do not receive all rows from<br>                           server before printing the first<br>                           row. Uses fewer resources,<br>                           especially for long-running<br>                           queries, but column widths may<br>                           be incorrect.<br>isolation       LEVEL      Set transaction isolation level<br>maxColumnWidth  integer    The maximum width to use when<br>                           displaying columns<br>maxHeight       integer    The maximum height of the<br>                           terminal<br>maxWidth        integer    The maximum width of the<br>                           terminal<br>numberFormat    pattern    Format numbers using<br>                           DecimalFormat pattern<br>outputFormat    table/vertical/csv/tsv Format mode for<br>                           result display<br>propertiesFile  path       File from which SqlLine reads<br>                           properties on startup; default is<br>                           $HOME/.sqlline/sqlline.properties<br>                           (UNIX, Linux, Mac OS),<br>                           $HOME/sqlline/sqlline.properties<br>                           (Windows)<br>rowLimit        integer    Maximum number of rows returned<br>                           from a query; zero means no<br>                           limit<br>showElapsedTime true/false Display execution time when<br>                           verbose<br>showHeader      true/false Show column names in query<br>                           results<br>showNestedErrs  true/false Display nested errors<br>showWarnings    true/false Display connection warnings<br>silent          true/false Be more silent<br>timeout         integer    Query timeout in seconds; less<br>                           than zero means no timeout<br>trimScripts     true/false Remove trailing spaces from<br>                           lines read from script files<br>verbose         true/false Show verbose error messages and<br>                           debug info<br>!sql                Execute a SQL command<br>!tables             List all the tables in the database<br>!typeinfo           Display the type map for the current connection<br>!verbose            Set verbose mode on</p>
<pre><code>* 1、建立employee的映射表

  进入hbase客户端，创建一个普通表employee，并且有两个列族 company 和family

  ~~~
  cd /kfly/install/hbase-1.2.0-cdh5.14.2/
  bin/hbase shell
  hbase(main):001:0&gt; create &#39;employee&#39;,&#39;company&#39;,&#39;family&#39;
  ~~~

* 2、添加数据

  ~~~
  put &#39;employee&#39;,&#39;row1&#39;,&#39;company:name&#39;,&#39;ted&#39;
  put &#39;employee&#39;,&#39;row1&#39;,&#39;company:position&#39;,&#39;worker&#39;
  put &#39;employee&#39;,&#39;row1&#39;,&#39;family:tel&#39;,&#39;13600912345&#39;
  put &#39;employee&#39;,&#39;row2&#39;,&#39;company:name&#39;,&#39;michael&#39;
  put &#39;employee&#39;,&#39;row2&#39;,&#39;company:position&#39;,&#39;manager&#39;
  put &#39;employee&#39;,&#39;row2&#39;,&#39;family:tel&#39;,&#39;1894225698&#39;
  ~~~

* 3、建立hbase到phoenix的映射表

  node02进入到phoenix的客户端，然后创建映射表

  ~~~
  cd kflyb/install/apache-phoenix-4.14.0-cdh5.14.2-bin
  bin/sqlline.py node01:2181
  ~~~

  执行语句

  ```sql
  CREATE TABLE IF NOT EXISTS &quot;employee&quot; (&quot;no&quot; VARCHAR(10) NOT NULL PRIMARY KEY, &quot;company&quot;.&quot;name&quot; VARCHAR(30),&quot;company&quot;.&quot;position&quot; VARCHAR(20), &quot;family&quot;.&quot;tel&quot; VARCHAR(20), &quot;family&quot;.&quot;age&quot; INTEGER) column_encoded_bytes=0;

</code></pre><blockquote>
<p>说明</p>
<p>在建立映射表之前要说明的是，Phoenix是==大小写敏感==的，并且所有命令都是大写，如果你建的表名没有用双引号括起来，那么无论你输入的是大写还是小写，建立出来的表名都是大写的，如果你需要建立出同时包含大写和小写的表名和字段名，请把表名或者字段名用双引号括起来。 </p>
</blockquote>
<ul>
<li>4、查询映射表数据</li>
</ul>
<pre><code>0: jdbc:phoenix:node1:2181&gt; select * from &quot;employee&quot;;
+-------+----------+-----------+--------------+-------+
|  no   |   name   | position  |     tel      |  age  |
+-------+----------+-----------+--------------+-------+
| row1  | ted      | worker    | 13600912345  | null  |
| row2  | michael  | manager   | 1894225698   | null  |
+-------+----------+-----------+--------------+-------+

0: jdbc:phoenix:node01:2181&gt; select * from &quot;employee&quot; where &quot;tel&quot; = &#39;13600912345&#39;;
+-------+-------+-----------+--------------+-------+
|  no   | name  | position  |     tel      |  age  |
+-------+-------+-----------+--------------+-------+
| row1  | ted   | worker    | 13600912345  | null  |
+-------+-------+-----------+--------------+-------+


</code></pre><h2 id="5-3-GUI方式"><a href="#5-3-GUI方式" class="headerlink" title="5.3 GUI方式"></a>5.3 GUI方式</h2><ul>
<li>通过dbeaver来连接phoenix</li>
<li><a href="https://dbeaver.io/files/6.2.4/dbeaver-ce-6.2.4-macos.dmg" target="_blank" rel="noopener">点击下载</a></li>
</ul>
<h3 id="5-3-1-准备两个文件"><a href="#5-3-1-准备两个文件" class="headerlink" title="5.3.1 准备两个文件"></a>5.3.1 准备两个文件</h3><ul>
<li><p>我们通过dbeaver来连接phoenix需要两个文件</p>
<ul>
<li>第一个文件是phoenix-4.14.0-cdh5.14.2-client.jar</li>
<li>第二个文件是hbase-site.xml</li>
</ul>
</li>
<li><p>进入到phoenix的安装目录，获取第一个文件</p>
<p>node02执行以下命令，进入到以下路径，获取第一个文件</p>
<p>找到 phoenix-4.14.0-cdh5.14.2-client.jar  这个jar包，并将其下载下来备用</p>
</li>
</ul>
<pre><code class="shell">cd /kfly/install/apache-phoenix-4.14.0-cdh5.14.2-bin

</code></pre>
<ul>
<li><p>然后进入到node02服务器的hbase的安装配置文件路径，获取hbase-site.xml这个文件</p>
<p>找到hbase-site.xml，将其下载下来备用</p>
</li>
</ul>
<pre><code class="shell">cd /kfly/install/hbase-1.2.0-cdh5.14.2/conf/

</code></pre>
<h3 id="5-3-2-更新jar包"><a href="#5-3-2-更新jar包" class="headerlink" title="5.3.2 更新jar包"></a>5.3.2 更新jar包</h3><ul>
<li><p>将hbase-site.xml放到phoenix-4.14.0-cdh5.14.2-client.jar这个jar包里面去</p>
</li>
<li><p>我们在第一步找到了hbase-site.xml和phoenix-4.14.0-cdh5.14.2-client.jar 这两个文件之后，我们需要使用解压缩工具，将phoenix-4.14.0-cdh5.14.2-client.jar 这个jar包解压开，然后将hbase-site.xml放入到phoenix-4.14.0-cdh5.14.2-client.jar 这个jar包里面去</p>
</li>
</ul>
<p><img src="/Users/dingchuangshi/Downloads/20191115-HBase第四次课/phoenix安装部署/assets/1571282342354.png" alt="1571282342354"></p>
<h3 id="5-3-3-通过dbeaver连接phoenix"><a href="#5-3-3-通过dbeaver连接phoenix" class="headerlink" title="5.3.3 通过dbeaver连接phoenix"></a>5.3.3 通过dbeaver连接phoenix</h3><p><img src="/Users/dingchuangshi/Downloads/20191115-HBase第四次课/phoenix安装部署/assets/1571282405612.png" alt="1571282405612"></p>
<p><img src="/Users/dingchuangshi/Downloads/20191115-HBase第四次课/phoenix安装部署/assets/1571282452922.png" alt="1571282452922"></p>
<p><img src="/Users/dingchuangshi/Downloads/20191115-HBase第四次课/phoenix安装部署/assets/1571282684917.png" alt="1571282684917"></p>
<ul>
<li>注意：如果连接不上，可能不是操作配置的问题，有可能是因为dbeaver软件的问题，将dbeaver软件重启几次试试看</li>
</ul>
<h3 id="5-4-4-创建数据库表，并实现sql进行操作"><a href="#5-4-4-创建数据库表，并实现sql进行操作" class="headerlink" title="5.4.4 创建数据库表，并实现sql进行操作"></a>5.4.4 创建数据库表，并实现sql进行操作</h3><ul>
<li>直接在phoenix当中通过sql语句的方式来创建表并</li>
</ul>
<pre><code class="sql">CREATE TABLE IF NOT EXISTS US_POPULATION (
      state CHAR(2) NOT NULL,
      city VARCHAR NOT NULL,
      population BIGINT
      CONSTRAINT my_pk PRIMARY KEY (state, city));

UPSERT INTO US_POPULATION (state, city, population) values (&#39;NY&#39;,&#39;New York&#39;,8143197);
UPSERT INTO US_POPULATION (state, city, population) values (&#39;CA&#39;,&#39;Los Angeles&#39;,3844829);

SELECT * FROM US_POPULATION WHERE population &gt; 8000000;
</code></pre>
<h2 id="5-4-JDBC调用方式"><a href="#5-4-JDBC调用方式" class="headerlink" title="5.4 JDBC调用方式"></a>5.4 JDBC调用方式</h2><ul>
<li>创建maven工程并导入jar包</li>
</ul>
<pre><code class="xml">&lt;dependencies&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.apache.phoenix&lt;/groupId&gt;
        &lt;artifactId&gt;phoenix-core&lt;/artifactId&gt;
        &lt;version&gt;4.14.0-cdh5.14.2&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;junit&lt;/groupId&gt;
        &lt;artifactId&gt;junit&lt;/artifactId&gt;
        &lt;version&gt;4.12&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;dependency&gt;
        &lt;groupId&gt;org.testng&lt;/groupId&gt;
        &lt;artifactId&gt;testng&lt;/artifactId&gt;
        &lt;version&gt;6.14.3&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;/dependencies&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;!-- 限制jdk版本插件 --&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.0&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;source&gt;1.8&lt;/source&gt;
                    &lt;target&gt;1.8&lt;/target&gt;
                    &lt;encoding&gt;UTF-8&lt;/encoding&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
</code></pre>
<ul>
<li>代码开发</li>
</ul>
<pre><code class="java">import org.testng.annotations.BeforeTest;
import org.testng.annotations.Test;
import java.sql.*;
public class PhoenixSearch {
    private Connection connection;
    private Statement statement;
    private ResultSet rs;
    @BeforeTest
    public void init() throws SQLException {
        //定义phoenix的连接url地址
        String url=&quot;jdbc:phoenix:node01:2181&quot;;
        connection = DriverManager.getConnection(url);
        //构建Statement对象
        statement = connection.createStatement();
    }
    @Test
    public void queryTable() throws SQLException {
        //定义查询的sql语句，注意大小写
        String sql=&quot;select * from US_POPULATION&quot;;
        //执行sql语句
        try {
            rs=statement.executeQuery(sql);
            while(rs.next()){
                System.out.println(&quot;state:&quot;+rs.getString(&quot;state&quot;));
                System.out.println(&quot;city:&quot;+rs.getString(&quot;city&quot;));
                System.out.println(&quot;population:&quot;+rs.getInt(&quot;population&quot;));
                System.out.println(&quot;-------------------------&quot;);
            }
        } catch (SQLException e) {
            e.printStackTrace();
        }finally {
            if(connection!=null){
                connection.close();
            }
        }
    }
}
</code></pre>

        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        

        

    </ul>
    
    <p>
        <span>/</span>
        
        <span><a href="https://blog.sev7e0.site/">大数据施工现场</a></span>
        <span>/</span>
        
        <span><a href="https://wangchujiang.com/linux-command/">linux命令行工具</a></span>
        <span>/</span>
        
        <span><a href="https://github.com/orchid-ding">github</a></span>
        <span>/</span>
        
    </p>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

<script src="/js/gitment.js"></script>
<script>
    var gitment = new Gitment({
        id: 'Phoenix环境部署安装',
        owner: 'orchid-ding',
        repo: 'kfly-blog-comment',
        oauth: {
            client_id: '0770cdab79393197b6f5',
            client_secret: '376fb6c7bcd5047718b356712f596b89e490360c',
        },
    })
    gitment.render('comment-container')
</script>




</html>
