<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="天行健、君子以自强不息；地势坤，君子以厚德载物。">
    <meta name="keyword"  content="兰草">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        大数据环境搭建 - Kaffir Lily的博客 | Kaffir Lily&#39;s Blog
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i> 君子谦谦，温和有礼，有才而不骄，得志而不傲，居于谷而不卑。 </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar ">
            <img src="/img/avatar.jpg" />
        </div>
        <div class="name">
            <i>kfly</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="icon-font icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
 	   <li >
                <a href="/spec/">
                    <i class="icon-font icon-shouye1"></i>
                    <span>专题</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archive">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
            <li>
                <a id="search">
                    <i class="iconfont icon-sousuo1"></i>
                    <span>搜索</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#大数据环境搭建-MAC"><span class="toc-text">大数据环境搭建(MAC)</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#1-Linux-环境配置"><span class="toc-text">1. Linux 环境配置</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-1-Vmware-Funsion-Linux网络配置"><span class="toc-text">1.1 Vmware Funsion Linux网络配置</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-1-查看本机网络"><span class="toc-text">1.1.1 查看本机网络</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-1-2-配置linux网络"><span class="toc-text">1.1.2 配置linux网络</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-2-Linux-设置免密登陆"><span class="toc-text">1.2. Linux 设置免密登陆</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-1-设置用户-amp-权限"><span class="toc-text">1.2.1 设置用户 &amp; 权限</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-2-2-免密登陆"><span class="toc-text">1.2.2 免密登陆</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#1-3-时间同步"><span class="toc-text">1.3 时间同步</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-1-同步阿里云"><span class="toc-text">1.3.1 同步阿里云</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-3-2-同步node01时间"><span class="toc-text">1.3.2 同步node01时间</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#2-Hadoop环境搭建"><span class="toc-text">2.Hadoop环境搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#2-1-配置hadoop-env-sh"><span class="toc-text">2.1 配置hadoop-env.sh</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-2-配置core-site-xml"><span class="toc-text">2.2 配置core-site.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-3-配置hdfs-site-xml"><span class="toc-text">2.3 配置hdfs-site.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-4-配置mapred-site-xml"><span class="toc-text">2.4 配置mapred-site.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-5-配置yarn-site-xml"><span class="toc-text">2.5 配置yarn-site.xml</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-6-编辑slaves"><span class="toc-text">2.6 编辑slaves</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-7-创建文件存放目录"><span class="toc-text">2.7 创建文件存放目录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-8-拷贝到其他节点"><span class="toc-text">2.8 拷贝到其他节点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-9-格式化节点"><span class="toc-text">2.9 格式化节点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#1-10-访问"><span class="toc-text">1.10 访问</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-hive环境搭建"><span class="toc-text">3. hive环境搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#3-1-mysql安装"><span class="toc-text">3.1 mysql安装</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-2-hive安装"><span class="toc-text">3.2 hive安装</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-1-下载hive的安装包"><span class="toc-text">3.2.1 下载hive的安装包</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-2-hive-env-sh"><span class="toc-text">3.2.2 hive-env.sh</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-3-hive-site-xml"><span class="toc-text">3.2.3 hive-site.xml</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-2-4-日志路径"><span class="toc-text">3.2.4 日志路径</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#3-4-5-lib包"><span class="toc-text">3.4.5  lib包</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-zookeeper环境搭建"><span class="toc-text">4. zookeeper环境搭建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-HBase环境搭建"><span class="toc-text">5. HBase环境搭建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-Flume环境搭建"><span class="toc-text">6. Flume环境搭建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#7-Sqoop环境搭建"><span class="toc-text">7. Sqoop环境搭建</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#8-zakaban环境搭建"><span class="toc-text">8. zakaban环境搭建</span></a></li></ol></li></ol></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>

        <div class="index-about-mobile">
            <i> 君子谦谦，温和有礼，有才而不骄，得志而不傲，居于谷而不卑。 </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        大数据环境搭建
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2019-11-26 19:27:29</span></span>
        
        <span class="attr">标签：/
        
        <a class="tag" href="/tags/#环境搭建" title="环境搭建">环境搭建</a>
        <span>/</span>
        
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <h1 id="大数据环境搭建-MAC"><a href="#大数据环境搭建-MAC" class="headerlink" title="大数据环境搭建(MAC)"></a>大数据环境搭建(MAC)</h1><h2 id="1-Linux-环境配置"><a href="#1-Linux-环境配置" class="headerlink" title="1. Linux 环境配置"></a>1. Linux 环境配置</h2><h3 id="1-1-Vmware-Funsion-Linux网络配置"><a href="#1-1-Vmware-Funsion-Linux网络配置" class="headerlink" title="1.1 Vmware Funsion Linux网络配置"></a>1.1 Vmware Funsion Linux网络配置</h3><h4 id="1-1-1-查看本机网络"><a href="#1-1-1-查看本机网络" class="headerlink" title="1.1.1 查看本机网络"></a>1.1.1 查看本机网络</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1. 查看vmnet网络配置，本机mac上</span></span><br><span class="line">cat /Library/Preferences/VMware\ Fusion/vmnet8/nat.conf </span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. 可以看到如下部分信息，记住下面信息，用来配置linux</span></span><br><span class="line">[host]</span><br><span class="line"><span class="meta">#</span><span class="bash"> NAT gateway address</span></span><br><span class="line">ip = 192.168.83.2</span><br><span class="line">netmask = 255.255.255.0</span><br></pre></td></tr></table></figure>
<h4 id="1-1-2-配置linux网络"><a href="#1-1-2-配置linux网络" class="headerlink" title="1.1.2 配置linux网络"></a>1.1.2 配置linux网络</h4><ol>
<li>setting -&gt; Network Adapter -&gt; Share with my msc  如下图</li>
</ol>
<p><img src="assets/image-20191127172534764.png" alt="image-20191127172534764" style="zoom:50%;"></p>
<ol start="2">
<li><p>点击上图左下角 Advanced options，点击Generate（生成MAC Address）</p>
<p><img src="assets/image-20191127172700292.png" alt="image-20191127172700292" style="zoom:50%;"></p>
</li>
<li><p>启动虚拟机</p>
</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1. 修改配置文件</span></span><br><span class="line">sudo vi /etc/sysconf/network-scripts/ifcg-ens192</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. 修改下面内容</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 改为静态</span></span><br><span class="line">BOOTPROTO=static</span><br><span class="line">ONBOOT=yes</span><br><span class="line"><span class="meta">#</span><span class="bash"> 与上面网段保持一致</span></span><br><span class="line">IPPADDR=192.168.83.100</span><br><span class="line"><span class="meta">#</span><span class="bash"> 与上面一致</span></span><br><span class="line">NETMASK=255.255.255.0</span><br><span class="line"><span class="meta">#</span><span class="bash"> 与上面ip一致</span></span><br><span class="line">GATEWAY=192.168.83.2</span><br><span class="line">DNS1=8.8.8.8</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">3. 修改之后，重启network</span></span><br><span class="line">service network restart</span><br></pre></td></tr></table></figure>
<ol start="4">
<li>关闭防火墙，selinux</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 关闭</span></span><br><span class="line">systemctl stop firewalld</span><br><span class="line"><span class="meta">#</span><span class="bash"> 永久关闭</span></span><br><span class="line">systemctl disable firewalld</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 关闭selinux，修改下面文件内容</span></span><br><span class="line">vi /etc/selinux/config #进入selinux设置文件</span><br><span class="line">SELINUX=disabled</span><br></pre></td></tr></table></figure>
<h3 id="1-2-Linux-设置免密登陆"><a href="#1-2-Linux-设置免密登陆" class="headerlink" title="1.2. Linux 设置免密登陆"></a>1.2. Linux 设置免密登陆</h3><h4 id="1-2-1-设置用户-amp-权限"><a href="#1-2-1-设置用户-amp-权限" class="headerlink" title="1.2.1 设置用户 &amp; 权限"></a>1.2.1 设置用户 &amp; 权限</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1. 创建hadoop用户</span></span><br><span class="line">useradd hadoop #添加hadoop用户</span><br><span class="line">passwd hadoop #给hadoop用户添加密码</span><br><span class="line">hadoop #密码设为hadoop</span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. 设置用户权限 </span></span><br><span class="line">visudo #进入用户权限配置文件</span><br><span class="line"><span class="meta">#</span><span class="bash"><span class="comment"># Allow root to run any commands anywhere</span></span></span><br><span class="line">root    ALL=(ALL)       ALL</span><br><span class="line">hadoop  ALL=(ALL)	    ALL # 给hadoop用户添加所有权限</span><br><span class="line"><span class="meta">#</span><span class="bash"> 3. 切换到hadoop用户</span></span><br><span class="line">su - hadoop # 加上- 表示切换同时拥有权限</span><br></pre></td></tr></table></figure>
<h4 id="1-2-2-免密登陆"><a href="#1-2-2-免密登陆" class="headerlink" title="1.2.2 免密登陆"></a>1.2.2 免密登陆</h4><ol>
<li>修改/etc/hosts 文件</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">sudo vi /etc/hosts</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 添加如下内容</span></span><br><span class="line">192.168.83.100 node01</span><br><span class="line">192.168.83.110 node02</span><br><span class="line">192.168.83.120 node03</span><br></pre></td></tr></table></figure>
<ol start="2">
<li>配置免密登陆</li>
</ol>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1. hadoop用户下执行下列命令，必须！</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 下面操作node01，node02，node03 都执行，回车next。</span></span><br><span class="line">ssh-keygen -t rsa #生成公钥</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. 三台机器的公钥全部拷贝到node01</span></span><br><span class="line">ssh-copy-id node01 </span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3. 第一台机器执行，“:PWD”的意思是：拷贝目标文件位置和node01的位置一致。</span></span><br><span class="line">cd /home/hadoop/.ssh/</span><br><span class="line">scp authorized_keys node02:$PWD #将node01的授权文件拷贝到node02</span><br><span class="line">scp authorized_keys node03:$PWD #将node01的授权文件拷贝到node03</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">4. 验证免密登录</span></span><br><span class="line"><span class="meta">#</span><span class="bash">在node01执行</span></span><br><span class="line">ssh node02 #在node01登录node02，不需要密码就ok</span><br><span class="line">ssh node03 #在node01登录node02，不需要密码就ok</span><br><span class="line"><span class="meta">#</span><span class="bash">回到node01</span></span><br><span class="line">logout</span><br></pre></td></tr></table></figure>
<h3 id="1-3-时间同步"><a href="#1-3-时间同步" class="headerlink" title="1.3 时间同步"></a>1.3 时间同步</h3><h4 id="1-3-1-同步阿里云"><a href="#1-3-1-同步阿里云" class="headerlink" title="1.3.1 同步阿里云"></a>1.3.1 同步阿里云</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装ntpdate</span></span><br><span class="line">sudo yum -y install ntpdate</span><br><span class="line">crontab -e </span><br><span class="line">*/1 * * * * /usr/sbin/ntpdate time1.aliyun.com</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果时间不通可以执行</span></span><br><span class="line">sudo ntpdate -u asia.pool.ntp.org</span><br></pre></td></tr></table></figure>
<h4 id="1-3-2-同步node01时间"><a href="#1-3-2-同步node01时间" class="headerlink" title="1.3.2 同步node01时间"></a>1.3.2 同步node01时间</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 1. 安装ntp软件（所有）</span></span><br><span class="line">sudo yum  -y  install ntp</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. 设置时区为中国上海（所有）</span></span><br><span class="line">timedatectl set-timezone Asia/Shanghai</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3. node01启动ntp服务，作为服务端供其他节点同步时间</span></span><br><span class="line">systemctl start ntpd</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4. node01设置开机启动</span></span><br><span class="line">systemctl enable ntpd</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 5.修改配置 node01上</span></span><br><span class="line">sudo vi /etc/ntp.conf</span><br><span class="line"><span class="meta">#</span><span class="bash"> 注释掉以下四行，添加最后两行。对应自己的vmnt8内容</span></span><br><span class="line"><span class="meta">#</span><span class="bash">server 0.centos.pool.ntp.org iburst</span></span><br><span class="line"><span class="meta">#</span><span class="bash">server 1.centos.pool.ntp.org iburst</span></span><br><span class="line"><span class="meta">#</span><span class="bash">server 2.centos.pool.ntp.org iburst</span></span><br><span class="line"><span class="meta">#</span><span class="bash">server 3.centos.pool.ntp.org iburst</span></span><br><span class="line"></span><br><span class="line">restrict 192.168.83.2 mask 255.255.255.0 nomodify notrap</span><br><span class="line">server 127.127.1.0</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 5.1 node02 node03修改配置</span></span><br><span class="line">sudo vi /etc/sysconfig/ntpdate</span><br><span class="line"><span class="meta">#</span><span class="bash"> 修改为 yes</span></span><br><span class="line">SYNC_HWCLOCK=yes</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 6. 重启服务</span></span><br><span class="line">systemctl restart ntpd</span><br></pre></td></tr></table></figure>
<h2 id="2-Hadoop环境搭建"><a href="#2-Hadoop环境搭建" class="headerlink" title="2.Hadoop环境搭建"></a>2.Hadoop环境搭建</h2><h4 id="2-1-配置hadoop-env-sh"><a href="#2-1-配置hadoop-env-sh" class="headerlink" title="2.1 配置hadoop-env.sh"></a>2.1 配置hadoop-env.sh</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> hadoop 用户下</span></span><br><span class="line">su - hadoop</span><br><span class="line"></span><br><span class="line">vi /kfly/install/hadoop-2.6.0-cdh5.14.2/etc/hadoop/hadoop-env.sh </span><br><span class="line">export JAVA_HOME=/kfly/install/jdk1.8.0_141 #修改为此变量</span><br></pre></td></tr></table></figure>
<h4 id="2-2-配置core-site-xml"><a href="#2-2-配置core-site-xml" class="headerlink" title="2.2 配置core-site.xml"></a>2.2 配置core-site.xml</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">在hadoop用户下打开配置文件：</span></span><br><span class="line">vi /kfly/install/hadoop-2.6.0-cdh5.14.2/etc/hadoop/core-site.xml</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.defaultFS<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>hdfs://node01:8020<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>hadoop.tmp.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>/kfly/install/hadoop-2.6.0/hadoopDatas/tempDatas<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--  缓冲区大小，实际工作中根据服务器性能动态调整 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>io.file.buffer.size<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>4096<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.trash.interval<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">value</span>&gt;</span>10080<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">description</span>&gt;</span>检查点被删除后的分钟数。 如果为零，垃圾桶功能将被禁用。 </span><br><span class="line">      该选项可以在服务器和客户端上配置。 如果垃圾箱被禁用服务器端，则检查客户端配置。 </span><br><span class="line">      如果在服务器端启用垃圾箱，则会使用服务器上配置的值，并忽略客户端配置值。</span><br><span class="line">    <span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">name</span>&gt;</span>fs.trash.checkpoint.interval<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">value</span>&gt;</span>0<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">       <span class="tag">&lt;<span class="name">description</span>&gt;</span>垃圾检查点之间的分钟数。 应该小于或等于fs.trash.interval。 </span><br><span class="line">       如果为零，则将该值设置为fs.trash.interval的值。 每次检查指针运行时，</span><br><span class="line">       它都会从当前创建一个新的检查点，并删除比fs.trash.interval更早创建的检查点。</span><br><span class="line">    <span class="tag">&lt;/<span class="name">description</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="2-3-配置hdfs-site-xml"><a href="#2-3-配置hdfs-site-xml" class="headerlink" title="2.3 配置hdfs-site.xml"></a>2.3 配置hdfs-site.xml</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">在hadoop用户下打开配置文件：</span></span><br><span class="line">vi /kkb/install/hadoop-2.6.0/etc/hadoop/hdfs-site.xml</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- NameNode存储元数据信息的路径，实际工作中，一般先确定磁盘的挂载目录，然后多个目录用，进行分割   --&gt;</span> </span><br><span class="line">	<span class="comment">&lt;!--   集群动态上下线 </span></span><br><span class="line"><span class="comment">	&lt;property&gt;</span></span><br><span class="line"><span class="comment">		&lt;name&gt;dfs.hosts&lt;/name&gt;</span></span><br><span class="line"><span class="comment">		&lt;value&gt;/kfly/install/hadoop-2.6.0/etc/hadoop/accept_host&lt;/value&gt;</span></span><br><span class="line"><span class="comment">	&lt;/property&gt;</span></span><br><span class="line"><span class="comment">	&lt;property&gt;</span></span><br><span class="line"><span class="comment">		&lt;name&gt;dfs.hosts.exclude&lt;/name&gt;</span></span><br><span class="line"><span class="comment">		&lt;value&gt;/kfly/install/hadoop-2.6.0/etc/hadoop/deny_host&lt;/value&gt;</span></span><br><span class="line"><span class="comment">	&lt;/property&gt;</span></span><br><span class="line"><span class="comment">	 --&gt;</span></span><br><span class="line">	 <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.secondary.http-address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">value</span>&gt;</span>node01:50090<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.http-address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>node01:50070<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.name.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///kfly/install/hadoop-2.6.0/hadoopDatas/namenodeDatas<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--  定义dataNode数据存储的节点位置，实际工作中，一般先确定磁盘的挂载目录，然后多个目录用，进行分割  --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.datanode.data.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///kfly/install/hadoop-2.6.0/hadoopDatas/datanodeDatas<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.edits.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///kfly/install/hadoop-2.6.0/hadoopDatas/dfs/nn/edits<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.checkpoint.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///kfly/install/hadoop-2.6.0/hadoopDatas/dfs/snn/name<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.namenode.checkpoint.edits.dir<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>file:///kfly/install/hadoop-2.6.0/hadoopDatas/dfs/nn/snn/edits<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.replication<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>3<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.permissions<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>dfs.blocksize<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>134217728<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="2-4-配置mapred-site-xml"><a href="#2-4-配置mapred-site-xml" class="headerlink" title="2.4 配置mapred-site.xml"></a>2.4 配置mapred-site.xml</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">在hadoop用户下操作,进入指定文件夹：</span></span><br><span class="line">cd /kfly/install/hadoop-2.6.0-cdh5.14.2/etc/hadoop/</span><br><span class="line"><span class="meta">#</span><span class="bash">由于原来没有mapred-site.xml配置文件，需要根据模板复制一份：</span></span><br><span class="line">cp  mapred-site.xml.template mapred-site.xml</span><br><span class="line">vi /kfly/install/hadoop-2.6.0-cdh5.14.2/etc/hadoop/mapred-site.xml</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--指定运行mapreduce的环境是yarn --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">   <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.framework.name<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>yarn<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.job.ubertask.enable<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>node01:10020<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>mapreduce.jobhistory.webapp.address<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>node01:19888<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="2-5-配置yarn-site-xml"><a href="#2-5-配置yarn-site-xml" class="headerlink" title="2.5 配置yarn-site.xml"></a>2.5 配置yarn-site.xml</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">在hadoop用户下操作</span></span><br><span class="line">vi /kfly/install/hadoop-2.6.0/etc/hadoop/yarn-site.xml</span><br></pre></td></tr></table></figure>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.hostname<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>node01<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.aux-services<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>mapreduce_shuffle<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log-aggregation-enable<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">		 <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log.server.url<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">		 <span class="tag">&lt;<span class="name">value</span>&gt;</span>http://node01:19888/jobhistory/logs<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--多长时间聚合删除一次日志 此处--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.log-aggregation.retain-seconds<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>2592000<span class="tag">&lt;/<span class="name">value</span>&gt;</span><span class="comment">&lt;!--30 day--&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--时间在几秒钟内保留用户日志。只适用于如果日志聚合是禁用的--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.log.retain-seconds<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>604800<span class="tag">&lt;/<span class="name">value</span>&gt;</span><span class="comment">&lt;!--7 day--&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!--指定文件压缩类型用于压缩汇总日志--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.log-aggregation.compression-type<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>gz<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- nodemanager本地文件存储目录--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.nodemanager.local-dirs<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>/kkb/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/yarn/local<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">	<span class="comment">&lt;!-- resourceManager  保存最大的任务完成个数 --&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">name</span>&gt;</span>yarn.resourcemanager.max-completed-applications<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">value</span>&gt;</span>1000<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="2-6-编辑slaves"><a href="#2-6-编辑slaves" class="headerlink" title="2.6 编辑slaves"></a>2.6 编辑slaves</h4><p>此文件用于配置集群有多少个数据节点,我们把node2，node3作为数据节点,node1作为集群管理节点</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">在hadoop用户下操作</span></span><br><span class="line">vim /kfly/install/hadoop-2.6.0/etc/hadoop/slaves</span><br><span class="line"></span><br><span class="line">node01 #添加</span><br><span class="line">node02 #添加</span><br><span class="line">node03 #添加</span><br></pre></td></tr></table></figure>
<h4 id="2-7-创建文件存放目录"><a href="#2-7-创建文件存放目录" class="headerlink" title="2.7 创建文件存放目录"></a>2.7 创建文件存放目录</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">在hadoop用户下操作</span></span><br><span class="line">mkdir -p /kfly/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/tempDatas</span><br><span class="line">mkdir -p /kfly/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/namenodeDatas</span><br><span class="line">mkdir -p /kfly/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/datanodeDatas</span><br><span class="line">mkdir -p /kfly/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/dfs/nn/edits</span><br><span class="line">mkdir -p /kfly/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/dfs/snn/name</span><br><span class="line">mkdir -p /kfly/install/hadoop-2.6.0-cdh5.14.2/hadoopDatas/dfs/nn/snn/edits</span><br></pre></td></tr></table></figure>
<h4 id="2-8-拷贝到其他节点"><a href="#2-8-拷贝到其他节点" class="headerlink" title="2.8 拷贝到其他节点"></a>2.8 拷贝到其他节点</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 分发到各个节点下,<span class="variable">$PWD</span> 相同目录</span></span><br><span class="line">scp -r hadoop-2.6.0 node02:$PWD</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">分发配置文件</span></span><br><span class="line">scp /etc/profile node02:$PWD</span><br></pre></td></tr></table></figure>
<h4 id="2-9-格式化节点"><a href="#2-9-格式化节点" class="headerlink" title="2.9 格式化节点"></a>2.9 格式化节点</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">下面命令只在node01上执行</span></span><br><span class="line">hdfs namenode -format #格式化</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 启动</span></span><br><span class="line">start-all.sh</span><br></pre></td></tr></table></figure>
<h4 id="1-10-访问"><a href="#1-10-访问" class="headerlink" title="1.10 访问"></a>1.10 访问</h4><ul>
<li><p>hadoop webui <a href="http://node01:50070/" target="_blank" rel="noopener">http://node01:50070/</a></p>
</li>
<li><p>hadoop application <a href="http://node01:8088" target="_blank" rel="noopener">http://node01:8088</a></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 启动 jobhistory</span></span><br><span class="line">mr-jobhistory-daemon.sh start historyserver</span><br></pre></td></tr></table></figure>
</li>
<li><p>hadoop job <a href="http://node01:19888" target="_blank" rel="noopener">http://node01:19888</a></p>
</li>
</ul>
<h3 id="3-hive环境搭建"><a href="#3-hive环境搭建" class="headerlink" title="3. hive环境搭建"></a>3. hive环境搭建</h3><h4 id="3-1-mysql安装"><a href="#3-1-mysql安装" class="headerlink" title="3.1 mysql安装"></a>3.1 mysql安装</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 安装wget</span></span><br><span class="line">sudo yum install wget</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 1. 换源</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 1.1 备份系统源</span></span><br><span class="line">sudo mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.backup</span><br><span class="line"><span class="meta">#</span><span class="bash"> 1.2 下载阿里云CENTOS7镜像文件</span></span><br><span class="line">wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo</span><br><span class="line"><span class="meta">#</span><span class="bash"> 1.3 清理缓存、生成新的缓存</span></span><br><span class="line">sudo yum clean all</span><br><span class="line">sudo yum makecache</span><br><span class="line"><span class="meta">#</span><span class="bash"> 1.4 更新源</span></span><br><span class="line">sudo yum update -y</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 2. 使用yum安装MySQL,下载并安装MySQL官方的 Yum Repository</span></span><br><span class="line">sudo wget -i -c http://dev.mysql.com/get/mysql57-community-release-el7-10.noarch.rpm</span><br><span class="line">sudo yum -y install mysql57-community-release-el7-10.noarch.rpm</span><br><span class="line">sudo yum -y install mysql-community-server</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 3. 启动mysql，查看运行状态</span></span><br><span class="line">systemctl start  mysqld.service</span><br><span class="line">systemctl status mysqld.service</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 4. 找出默认密码如下图所示</span></span><br><span class="line">sudo grep "password" /var/log/mysqld.log</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 5. 登陆、修改密码</span></span><br><span class="line">mysql -uroot -p     # 回车后会提示输入密码</span><br><span class="line">ALTER USER 'root'@'localhost' IDENTIFIED BY 'new password';</span><br><span class="line"><span class="meta"> #</span><span class="bash"> 注意： 如果失败，修改密码策略,先修改一个复杂的密码，在修改策略，修改密码</span></span><br><span class="line">ALTER USER 'root'@'localhost' IDENTIFIED BY 'z?guwrBhH7p&gt;';</span><br><span class="line">set global validate_password_policy=0;</span><br><span class="line">set global validate_password_policy=1;</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 6. 设置mysql可以外部连接</span></span><br><span class="line">grant all on *.* to root@'%' identified by '数据库密码';</span><br></pre></td></tr></table></figure>
<h4 id="3-2-hive安装"><a href="#3-2-hive安装" class="headerlink" title="3.2 hive安装"></a>3.2 hive安装</h4><h5 id="3-2-1-下载hive的安装包"><a href="#3-2-1-下载hive的安装包" class="headerlink" title="3.2.1 下载hive的安装包"></a>3.2.1 下载hive的安装包</h5><ul>
<li><a href="http://archive.cloudera.com/cdh5/cdh/5/hive-1.1.0-cdh5.14.2.tar.gz" target="_blank" rel="noopener">http://archive.cloudera.com/cdh5/cdh/5/hive-1.1.0-cdh5.14.2.tar.gz</a></li>
</ul>
<h5 id="3-2-2-hive-env-sh"><a href="#3-2-2-hive-env-sh" class="headerlink" title="3.2.2 hive-env.sh"></a>3.2.2 hive-env.sh</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">vim hive-env.sh</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">配置HADOOP_HOME路径</span></span><br><span class="line">export HADOOP_HOME=/kfly/install/hadoop-2.6.0</span><br><span class="line"><span class="meta">#</span><span class="bash">配置HIVE_CONF_DIR路径</span></span><br><span class="line">export HIVE_CONF_DIR=/kfly/install/hive-1.1.0-cdh5.14.2/conf</span><br></pre></td></tr></table></figure>
<h5 id="3-2-3-hive-site-xml"><a href="#3-2-3-hive-site-xml" class="headerlink" title="3.2.3 hive-site.xml"></a>3.2.3 hive-site.xml</h5><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?</span>xml-stylesheet type=<span class="string">"text/xsl"</span> href=<span class="string">"configuration.xsl"</span><span class="meta">?&gt;</span></span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionURL<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>jdbc:mysql://node02:3306/hive?createDatabaseIfNotExist=true&amp;amp;characterEncoding=latin1&amp;amp;useSSL=false<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionDriverName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>com.mysql.jdbc.Driver<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionUserName<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>root<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>javax.jdo.option.ConnectionPassword<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>123456<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.cli.print.current.db<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.cli.print.header<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">name</span>&gt;</span>hive.server2.thrift.bind.host<span class="tag">&lt;/<span class="name">name</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">value</span>&gt;</span>node02<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h5 id="3-2-4-日志路径"><a href="#3-2-4-日志路径" class="headerlink" title="3.2.4 日志路径"></a>3.2.4 日志路径</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">vim hive-log4j.properties</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">更改以下内容，设置我们的日志文件存放的路径</span></span><br><span class="line">hive.log.dir=/kkb/install/hive-1.1.0-cdh5.14.2/logs/</span><br></pre></td></tr></table></figure>
<h5 id="3-4-5-lib包"><a href="#3-4-5-lib包" class="headerlink" title="3.4.5  lib包"></a>3.4.5  lib包</h5><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ps: ==需要将mysql的驱动包上传到hive的lib目录下==</span><br><span class="line"> * 例如 mysql-connector-java-5.1.38.jar</span><br></pre></td></tr></table></figure>
<h3 id="4-zookeeper环境搭建"><a href="#4-zookeeper环境搭建" class="headerlink" title="4. zookeeper环境搭建"></a>4. zookeeper环境搭建</h3><h3 id="5-HBase环境搭建"><a href="#5-HBase环境搭建" class="headerlink" title="5. HBase环境搭建"></a>5. HBase环境搭建</h3><h3 id="6-Flume环境搭建"><a href="#6-Flume环境搭建" class="headerlink" title="6. Flume环境搭建"></a>6. Flume环境搭建</h3><h3 id="7-Sqoop环境搭建"><a href="#7-Sqoop环境搭建" class="headerlink" title="7. Sqoop环境搭建"></a>7. Sqoop环境搭建</h3><h3 id="8-zakaban环境搭建"><a href="#8-zakaban环境搭建" class="headerlink" title="8. zakaban环境搭建"></a>8. zakaban环境搭建</h3>
        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>

    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        

        

    </ul>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span>PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span>UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = "search.json"
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
