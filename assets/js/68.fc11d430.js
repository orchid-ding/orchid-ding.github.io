(window.webpackJsonp=window.webpackJsonp||[]).push([[68],{553:function(s,a,n){"use strict";n.r(a);var t=n(19),e=Object(t.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("hr"),s._v(" "),n("p",[n("a",{attrs:{href:"http://developer.51cto.com/art/201904/595698.htm",target:"_blank",rel:"noopener noreferrer"}},[s._v("漫画学习HBase----最易懂的Hbase架构原理解析"),n("OutboundLink")],1)]),s._v(" "),n("p",[n("em",[s._v("HBase基于Google的BigTable论文，是建立的__HDFS__之上，提供"),n("strong",[s._v("高可靠性")]),s._v("、"),n("strong",[s._v("高性能")]),s._v("、"),n("strong",[s._v("列存储")]),s._v("、"),n("strong",[s._v("可伸缩")]),s._v("、"),n("strong",[s._v("实时读写")]),s._v("的分布式数据库系统。")])]),s._v(" "),n("p",[n("em",[s._v("在需要__实时读写随机访问__超大规模数据集时，可以使用HBase。")])]),s._v(" "),n("div",{staticClass:"language- extra-class"},[n("pre",[n("code",[s._v("[点击跳转](https://kfly.top/2019/11/26/hadoop/%E5%A4%A7%E6%95%B0%E6%8D%AE%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/)\n")])])]),n("h2",{attrs:{id:"数据模型"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#数据模型"}},[s._v("#")]),s._v(" 数据模型")]),s._v(" "),n("p",[n("img",{attrs:{src:"http://kflys.gitee.io/upic/2020/04/01/uPic/hbase/assets/hbase-data-model.png.png#height=331&id=e1t5M&originHeight=331&originWidth=1748&originalType=binary&ratio=1&status=done&style=none&width=1748",alt:""}})]),s._v(" "),n("ul",[n("li",[s._v("rowkey行键\n"),n("ul",[n("li",[s._v("table的主键，table中的记录按照rowkey 的字典序进行排序")]),s._v(" "),n("li",[s._v("Row key行键可以是任意字符串(最大长度是 64KB，实际应用中长度一般为 10-100bytes)")])])]),s._v(" "),n("li",[s._v("Column Family列族\n"),n("ul",[n("li",[s._v("列族或列簇")]),s._v(" "),n("li",[s._v("HBase表中的每个列，都归属与某个列族")]),s._v(" "),n("li",[s._v("列族是表的schema的一部分(而列不是)，即建表时至少指定一个列族")]),s._v(" "),n("li",[s._v("比如创建一张表，名为"),n("code",[s._v("user")]),s._v("，有两个列族，分别是"),n("code",[s._v("info")]),s._v("和"),n("code",[s._v("data")]),s._v("，建表语句"),n("code",[s._v("create 'user', 'info', 'data'")])])])]),s._v(" "),n("li",[s._v("Column列\n"),n("ul",[n("li",[s._v("列肯定是表的某一列族下的一个列，用"),n("code",[s._v("列族名:列名")]),s._v("表示，如"),n("code",[s._v("info")]),s._v("列族下的"),n("code",[s._v("name")]),s._v("列，表示为"),n("code",[s._v("info:name")])]),s._v(" "),n("li",[s._v("属于某一个ColumnFamily,类似于我们mysql当中创建的具体的列")])])]),s._v(" "),n("li",[s._v("cell单元格\n"),n("ul",[n("li",[s._v("指定row key行键、列族、列，可以确定的一个cell单元格")]),s._v(" "),n("li",[s._v("cell中的数据是没有类型的，全部是以字节数组进行存储")])])])]),s._v(" "),n("p",[n("img",{attrs:{src:"http://kflys.gitee.io/upic/2020/04/01/uPic/hbase/assets/Image201911072218.png#height=182&id=Cp6m4&originHeight=182&originWidth=1126&originalType=binary&ratio=1&status=done&style=none&width=1126",alt:""}})]),s._v(" "),n("ul",[n("li",[s._v("Timestamp时间戳\n"),n("ul",[n("li",[s._v("可以对表中的Cell多次赋值，每次赋值操作时的时间戳timestamp，可看成Cell值的版本号version number")]),s._v(" "),n("li",[s._v("即一个Cell可以有多个版本的值")])])])]),s._v(" "),n("h2",{attrs:{id:"整体架构"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#整体架构"}},[s._v("#")]),s._v(" 整体架构")]),s._v(" "),n("p",[n("img",{attrs:{src:"http://kflys.gitee.io/upic/2020/04/01/uPic/hbase/assets/hbase-Hmaster-Hregionserver.png#height=715&id=XVOfT&originHeight=715&originWidth=1352&originalType=binary&ratio=1&status=done&style=none&width=1352",alt:""}})]),s._v(" "),n("ul",[n("li",[s._v("Client客户端\n"),n("ul",[n("li",[s._v("Client是操作HBase集群的入口\n"),n("ul",[n("li",[s._v("对于管理类的操作，如表的增、删、改操纵，Client通过RPC与HMaster通信完成")]),s._v(" "),n("li",[s._v("对于表数据的读写操作，Client通过RPC与RegionServer交互，读写数据")])])]),s._v(" "),n("li",[s._v("Client类型：\n"),n("ul",[n("li",[s._v("HBase shell / Java编程接口 /Thrift、Avro、Rest等等")])])])])]),s._v(" "),n("li",[s._v("ZooKeeper集群\n"),n("ul",[n("li",[s._v("实现了HMaster的高可用，多HMaster间进行主备选举")]),s._v(" "),n("li",[s._v("保存了HBase的元数据信息meta表，提供了HBase表中region的寻址入口的线索数据")]),s._v(" "),n("li",[s._v("对HMaster和HRegionServer实现了监控")])])]),s._v(" "),n("li",[s._v("HMaster\n"),n("ul",[n("li",[s._v("HBase集群也是主从架构，HMaster是主的角色，是老大")]),s._v(" "),n("li",[s._v("主要负责Table表和Region的相关管理工作：")]),s._v(" "),n("li",[s._v("关于Table\n"),n("ul",[n("li",[s._v("管理Client对Table的增删改的操作")]),s._v(" "),n("li",[s._v("关于Region\n"),n("ul",[n("li",[s._v("在Region分裂后，负责新Region分配到指定的HRegionServer上")]),s._v(" "),n("li",[s._v("管理HRegionServer间的负载均衡，迁移region分布")]),s._v(" "),n("li",[s._v("当HRegionServer宕机后，负责其上的region的迁移")])])])])])])]),s._v(" "),n("li",[s._v("HRegionServer")]),s._v(" "),n("li",[s._v("HBase集群中从的角色，是小弟\n"),n("ul",[n("li",[s._v("响应客户端的读写数据请求")]),s._v(" "),n("li",[s._v("负责管理一系列的Region")]),s._v(" "),n("li",[s._v("切分在运行过程中变大的region")])])]),s._v(" "),n("li",[s._v("Region\n"),n("ul",[n("li",[s._v("HBase集群中分布式存储的最小单元")]),s._v(" "),n("li",[s._v("一个Region对应一个Table表的部分数据")])])])]),s._v(" "),n("blockquote",[n("p",[s._v("HBase使用，主要有两种形式：①命令；②Java编程")])]),s._v(" "),n("h2",{attrs:{id:"hbase-client"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hbase-client"}},[s._v("#")]),s._v(" HBase Client")]),s._v(" "),n("h3",{attrs:{id:"hbase-shell"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#hbase-shell"}},[s._v("#")]),s._v(" HBase Shell")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("cd")]),s._v(" /kfly/install/hbase-1.2.0-cdh5.14.2/\nbin/HBase shell\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# list table")]),s._v("\nlist\n \n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# create table")]),s._v("\ncreate "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'info'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'data'")]),s._v("\ncreate "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("NAME "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'info'")]),s._v(", VERSIONS "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'3'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("，"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("NAME "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'data'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 向user表中插入信息，row key为rk0001，列族info中添加名为age 、 name的列，值为zhangsan")]),s._v("\nput "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rk0001'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'info:age'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'zhangsan'")]),s._v("\nput "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rk0001'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'info:name'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'female'")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取user表中row key为rk0001的所有信息（即所有cell的数据）")]),s._v("\nget "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rk0001'")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取user表中row key为rk0001，info列族的所有信息")]),s._v("\nget "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rk0001'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'info'")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取user表中row key为rk0001，info列族的name、age列的信息")]),s._v("\nget "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rk0001'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'info:name'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'info:age'")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取多个列镞的信息")]),s._v("\nget "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rk0001'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'info'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'data'")]),s._v("\nget "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rk0001'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("COLUMN "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'info'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'data'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nget "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rk0001'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("COLUMN "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'info:name'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'data:pic'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定rowkey与列值过滤器查询")]),s._v("\nget "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rk0001'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("FILTER "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"ValueFilter(=, 'binary:zhangsan')\"")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 获取user表中row key为rk0001，列标示符中含有a的信息")]),s._v("\nget "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rk0001'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("FILTER "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"(QualifierFilter(=,'substring:a'))\"")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\nget "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rk0002'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("FILTER "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"ValueFilter(=, 'binary:中国')\"")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查询user表中的所有信息")]),s._v("\nscan "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v("\nscan "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("COLUMNS")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'info'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nscan "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("COLUMNS")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'info'")]),s._v(", RAW "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" true, VERSIONS "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nscan "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("COLUMNS")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'info'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'data'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\nscan "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("COLUMNS")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'info:name'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定多个列族与按照数据值模糊查询")]),s._v("\nscan "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("COLUMNS")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'info'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'data'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(", FILTER "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"(QualifierFilter(=,'substring:a'))\"")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  指定rowkey的范围查询")]),s._v("\nscan "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),n("span",{pre:!0,attrs:{class:"token environment constant"}},[s._v("COLUMNS")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'info'")]),s._v(", STARTROW "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rk0001'")]),s._v(", ENDROW "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rk0003'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  指定rowkey模糊查询")]),s._v("\nscan "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(","),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("FILTER"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("\"PrefixFilter('rk')\"")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定数据版本的范围查询")]),s._v("\nscan "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("TIMERANGE "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1392368783980")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1392380169184")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br")])]),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 更新数据值 将user表的f1列族版本数改为5")]),s._v("\nalter "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", NAME "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'info'")]),s._v(", VERSIONS "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 指定rowkey以及列名进行删除")]),s._v("\ndelete "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rk0001'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'info:name'")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  指定rowkey，列名以及版本号进行删除")]),s._v("\ndelete "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'rk0001'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'info:name'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("1392383705316")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除一个列镞")]),s._v("\nalter "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", NAME "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'info'")]),s._v(", METHOD "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'delete'")]),s._v(" \n或 alter "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'delete'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'info'")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 清空表数据")]),s._v("\ntruncate "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 删除表")]),s._v("\ndisable "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v("\ndrop "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 统计有多少数据")]),s._v("\ncount "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br")])]),n("h2",{attrs:{id:"高级shell管理命令"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#高级shell管理命令"}},[s._v("#")]),s._v(" 高级shell管理命令")]),s._v(" "),n("div",{staticClass:"language-shell line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-shell"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示服务器状态")]),s._v("\nstatus "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'node01'")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 显示HBase当前用户，例如：")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("whoami")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  显示当前所有的表")]),s._v("\nHBase "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  list\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  统计指定表的记录数，例如：")]),s._v("\nHBase"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" count "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(" \n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  展示表结构信息")]),s._v("\nHBase"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" describe "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  检查表是否存在，适用于表量特别多的情况")]),s._v("\nHBase"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" exists "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  检查表是否启用或禁用")]),s._v("\nHBase"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" is_enabled "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v("\nHBase"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" is_disabled "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  该命令可以改变表和列族的模式，例如：")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  **为当前表增加列族：**")]),s._v("\nHBase"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" alter "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", NAME "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'CF2'")]),s._v(", VERSIONS "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  **为当前表删除列族：**")]),s._v("\nHBase"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("main"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(":002:"),n("span",{pre:!0,attrs:{class:"token operator"}},[n("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v(">")]),s._v("  alter "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v(", "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'delete'")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'CF2'")]),s._v("\n\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#  禁用一张表/启用一张表")]),s._v("\nHBase"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" disable "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v("\nHBase"),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("enable")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v("'user'")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br")])]),n("h2",{attrs:{id:"javaapi"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#javaapi"}},[s._v("#")]),s._v(" JavaAPI")]),s._v(" "),n("ul",[n("li",[s._v("HBase是一个分布式的NoSql数据库，在实际工作当中，我们一般都可以通过JavaAPI来进行各种数据的操作，包括创建表，以及数据的增删改查等等")]),s._v(" "),n("li",[s._v("讲如下内容作为maven工程中pom.xml的repositories的内容")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("  <dependency>\n    <groupId>org.apache.hadoop</groupId>\n    <artifactId>hadoop-client</artifactId>\n    <version>2.6.0-mr1-cdh5.14.2</version>\n</dependency>\n<dependency>\n  <groupId>org.apache.HBase</groupId>\n  <artifactId>hbase-client</artifactId>\n  <version>1.2.0-cdh5.14.2</version>\n</dependency>\n<dependency>\n  <groupId>org.apache.HBase</groupId>\n  <artifactId>hbase-server</artifactId>\n  <version>1.2.0-cdh5.14.2</version>\n</dependency>\n<dependency>\n  <groupId>junit</groupId>\n  <artifactId>junit</artifactId>\n  <version>4.12</version>\n  <scope>test</scope>\n</dependency>\n<dependency>\n  <groupId>org.testng</groupId>\n  <artifactId>testng</artifactId>\n  <version>6.14.3</version>\n  <scope>test</scope>\n</dependency>\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])]),n("h3",{attrs:{id:"基础api"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#基础api"}},[s._v("#")]),s._v(" 基础Api")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('// 1. 连接HBase\nConfiguration configuration = HBaseConfiguration.create();\n//连接HBase集群不需要指定HBase主节点的ip地址和端口号\nconfiguration.set("HBase.zookeeper.quorum","node01:2181,node02:2181,node03:2181");\n//创建连接对象\nConnection connection = ConnectionFactory.createConnection(configuration);\t\n\n\n//2. 获取管理员对象，来对手数据库进行DDL的操作\nAdmin admin = connection.getAdmin();\n\n// 3. 建表\nHTableDescriptor hTableDescriptor = new HTableDescriptor(TableName.valueOf("myuser"));\n//指定列族\nHColumnDescriptor f1 = new HColumnDescriptor("f1");\nhTableDescriptor.addFamily(f1);\nadmin.createTable(hTableDescriptor);\n\n// 4. 添加数据\nTable table = connection.getTable(TableName.valueOf(TABLE_NAME));\nPut put = new Put("0001".getBytes());//创建put对象，并指定rowkey值\nput.addColumn("f1".getBytes(),"name".getBytes(),"zhangsan".getBytes());\ntable.put(put);\n\n// 5. 查询数据\n//通过get对象，指定rowkey\nGet get = new Get(Bytes.toBytes("0003"));\nget.addFamily("f1".getBytes());//限制只查询f1列族下面所有列的值\n//查询f2列族 phone这个字段\nget.addColumn("f2".getBytes(),"phone".getBytes());\n//通过get查询，返回一个result对象，所有的字段的数据都是封装在result里面了\nResult result = table.get(get);\n\n// 6. 遍历结果\nList<Cell> cells = result.listCells();  //获取一条数据所有的cell，所有数据值都是在cell里面 的\nfor (Cell cell : cells) {\n  byte[] family_name = CellUtil.cloneFamily(cell);//获取列族名\n  byte[] column_name = CellUtil.cloneQualifier(cell);//获取列名\n  byte[] rowkey = CellUtil.cloneRow(cell);//获取rowkey\n  byte[] cell_value = CellUtil.cloneValue(cell);//获取cell值\n  // 需要判断字段的数据类型，使用对应的转换的方法，才能够获取到值\n  if("age".equals(Bytes.toString(column_name))  || "id".equals(Bytes.toString(column_name))){}else{}\n}\n\n// 7. scan查询\nScan scan = new Scan();//没有指定startRow以及stopRow  全表扫描\n//扫描f1列族\nscan.addFamily("f1".getBytes());\n//扫描 f2列族 phone  这个字段\nscan.addColumn("f2".getBytes(),"phone".getBytes());\nscan.setStartRow("0003".getBytes());\nscan.setStopRow("0007".getBytes());\n//通过getScanner查询获取到了表里面所有的数据，是多条数据\nResultScanner scanner = table.getScanner(scan);\n\n//遍历ResultScanner 得到每一条数据，每一条数据都是封装在result对象里面了\nfor (Result result : scanner) {\n  List<Cell> cells = result.listCells();\n  for (Cell cell : cells) {\n    byte[] family_name = CellUtil.cloneFamily(cell);\n    byte[] qualifier_name = CellUtil.cloneQualifier(cell);\n    byte[] rowkey = CellUtil.cloneRow(cell);\n    byte[] value = CellUtil.cloneValue(cell);\n  }\n}\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br"),n("span",{staticClass:"line-number"},[s._v("32")]),n("br"),n("span",{staticClass:"line-number"},[s._v("33")]),n("br"),n("span",{staticClass:"line-number"},[s._v("34")]),n("br"),n("span",{staticClass:"line-number"},[s._v("35")]),n("br"),n("span",{staticClass:"line-number"},[s._v("36")]),n("br"),n("span",{staticClass:"line-number"},[s._v("37")]),n("br"),n("span",{staticClass:"line-number"},[s._v("38")]),n("br"),n("span",{staticClass:"line-number"},[s._v("39")]),n("br"),n("span",{staticClass:"line-number"},[s._v("40")]),n("br"),n("span",{staticClass:"line-number"},[s._v("41")]),n("br"),n("span",{staticClass:"line-number"},[s._v("42")]),n("br"),n("span",{staticClass:"line-number"},[s._v("43")]),n("br"),n("span",{staticClass:"line-number"},[s._v("44")]),n("br"),n("span",{staticClass:"line-number"},[s._v("45")]),n("br"),n("span",{staticClass:"line-number"},[s._v("46")]),n("br"),n("span",{staticClass:"line-number"},[s._v("47")]),n("br"),n("span",{staticClass:"line-number"},[s._v("48")]),n("br"),n("span",{staticClass:"line-number"},[s._v("49")]),n("br"),n("span",{staticClass:"line-number"},[s._v("50")]),n("br"),n("span",{staticClass:"line-number"},[s._v("51")]),n("br"),n("span",{staticClass:"line-number"},[s._v("52")]),n("br"),n("span",{staticClass:"line-number"},[s._v("53")]),n("br"),n("span",{staticClass:"line-number"},[s._v("54")]),n("br"),n("span",{staticClass:"line-number"},[s._v("55")]),n("br"),n("span",{staticClass:"line-number"},[s._v("56")]),n("br"),n("span",{staticClass:"line-number"},[s._v("57")]),n("br"),n("span",{staticClass:"line-number"},[s._v("58")]),n("br"),n("span",{staticClass:"line-number"},[s._v("59")]),n("br"),n("span",{staticClass:"line-number"},[s._v("60")]),n("br"),n("span",{staticClass:"line-number"},[s._v("61")]),n("br"),n("span",{staticClass:"line-number"},[s._v("62")]),n("br"),n("span",{staticClass:"line-number"},[s._v("63")]),n("br"),n("span",{staticClass:"line-number"},[s._v("64")]),n("br"),n("span",{staticClass:"line-number"},[s._v("65")]),n("br")])]),n("h3",{attrs:{id:"过滤器"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#过滤器"}},[s._v("#")]),s._v(" 过滤器")]),s._v(" "),n("ul",[n("li",[s._v("过滤器的作用是在服务端判断数据是否满足条件，然后只将满足条件的数据返回给客户端")]),s._v(" "),n("li",[s._v("过滤器的类型很多，但是可以分为两大类\n"),n("ul",[n("li",[s._v("比较过滤器")]),s._v(" "),n("li",[s._v("专用过滤器")])])]),s._v(" "),n("li",[s._v("HBase过滤器的"),n("strong",[s._v("比较运算符")]),s._v("：")])]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[s._v("LESS  "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<")]),s._v("\nLESS_OR_EQUAL "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),s._v("\nEQUAL "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("\nNOT_EQUAL "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<>")]),s._v("\nGREATER_OR_EQUAL "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">=")]),s._v("\nGREATER "),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\nNO_OP 排除所有\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("ul",[n("li",[s._v("Hbase过滤器的"),n("strong",[s._v("比较器")]),s._v("（指定比较机制）：")])]),s._v(" "),n("div",{staticClass:"language-sql line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-sql"}},[n("code",[s._v("BinaryComparator  按字节索引顺序比较指定字节数组，采用Bytes"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("compareTo"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("byte"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nBinaryPrefixComparator 跟前面相同，只是比较左端的数据是否相同\nNullComparator 判断给定的是否为空\nBitComparator 按位比较\nRegexStringComparator 提供一个正则的比较器，仅支持 EQUAL 和非EQUAL\nSubstringComparator 判断提供的子串是否出现在中。\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('// 比rowKey  0003小的所有值出来,获取我们比较对象\nBinaryComparator binaryComparator = new BinaryComparator("0003".getBytes());\nRowFilter rowFilter = new RowFilter(CompareFilter.CompareOp.GREATER, binaryComparator);\n\n// 列镞名包含f2的数据\nSubstringComparator substringComparator = new SubstringComparator("f2");\nFamilyFilter familyFilter = new FamilyFilter(CompareFilter.CompareOp.EQUAL, substringComparator);\n\n// 定义列名过滤器，只查询列名包含name的列\nSubstringComparator substringComparator = new SubstringComparator("name");\nQualifierFilter qualifierFilter = new QualifierFilter(CompareFilter.CompareOp.EQUAL, substringComparator);\n\n// 列值过滤器，过滤列值当中包含数字8的所有的列\nSubstringComparator substringComparator = new SubstringComparator("8");\nValueFilter valueFilter = new ValueFilter(CompareFilter.CompareOp.EQUAL, substringComparator);\n\n// 单列值过滤器，过滤  f1 列族  name  列  值为刘备的数据\nSingleColumnValueFilter singleColumnValueFilter = new SingleColumnValueFilter("f1".getBytes(), "name".getBytes(), CompareFilter.CompareOp.EQUAL, "刘备".getBytes());\n\n// 列值排除过滤器SingleColumnValueExcludeFilter,与SingleColumnValueFilter相反，会排除掉指定的列，其他的列全部返回\n\n// 前缀过滤器，过滤rowkey以  00开头的数据\nPrefixFilter prefixFilter = new PrefixFilter("00".getBytes());\n\n\nscan.setFilter(filter);\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("h5",{attrs:{id:"pagefilter"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#pagefilter"}},[s._v("#")]),s._v(" PageFilter")]),s._v(" "),n("ul",[n("li",[s._v("通过pageFilter实现分页过滤器")])]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('// 1. 获取第一页的数据\nscan.setMaxResultSize(pageSize);\nscan.setStartRow("".getBytes()); // 第一页的开始row为 “”空字符串\n//使用分页过滤器来实现数据的分页\nPageFilter filter = new PageFilter(pageSize);\nscan.setFilter(filter);\nResultScanner scanner = table.getScanner(scan);\n\n// 2. 获取第n(n > 1)页的数据\nString  startRow = "";\n// （扫描跳过前面的数据）扫描数据的调试 扫描(pageNum - 1) * pageSize + 1条数据\nint scanDatas = (pageNum - 1) * pageSize + 1;\nscan.setMaxResultSize(scanDatas);//设置一步往前扫描多少条数据\nPageFilter filter = new PageFilter(scanDatas);\nscan.setFilter(filter);\nResultScanner scanner = table.getScanner(scan);\n// 到现在已经扫过目标值前面数据，最后一条作为目标页的startRowKey\nfor (Result result : scanner) {\n  byte[] row = result.getRow();//获取rowkey\n  //最后一次startRow的值就是目标值\n  startRow= Bytes.toString(row);//循环遍历我们多有获取到的数据的rowkey\n}\n// 现在开始获取目标页数据\nscan.setStartRow(startRow.getBytes());\nscan.setMaxResultSize(pageSize);//设置我们扫描多少条数据\nPageFilter filter1 = new PageFilter(pageSize);\nscan.setFilter(filter1);\nResultScanner scanner1 = table.getScanner(scan);\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br")])]),n("h5",{attrs:{id:"filterlist"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#filterlist"}},[s._v("#")]),s._v(" FilterList")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("Scan scan = new Scan();\nFilterList filterList = new FilterList();\nfilterList.addFilter(singleColumnValueFilter);\nfilterList.addFilter(prefixFilter);\nscan.setFilter(filterList);\nResultScanner scanner = table.getScanner(scan);\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("h3",{attrs:{id:"删除操作"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#删除操作"}},[s._v("#")]),s._v(" 删除操作")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('// 根据rowkey删除数据\nDelete delete = new Delete("0003".getBytes());\ntable.delete(delete);\n\n//删除一张表\nadmin.disableTable(TableName.valueOf(TABLE_NAME));\nadmin.deleteTable(TableName.valueOf(TABLE_NAME));\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])])])}),[],!1,null,null,null);a.default=e.exports}}]);