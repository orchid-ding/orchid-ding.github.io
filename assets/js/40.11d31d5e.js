(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{526:function(s,n,a){"use strict";a.r(n);var e=a(19),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("​\t\t通过回放我们的成都以及海口数据，使用flume采集我们的日志数据，然后将数据放入到kafka当中去，通过sparkStreaming消费我们的kafka当中的数据，然后将数据保存到hbase，并且将海口数据保存到redis当中去，实现实时轨迹监控以及历史轨迹回放的功能。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/kflys/uPic/raw/master/uPic/1593619386344-feb15b14-cfea-4a6c-8f5b-983a89fb882a.png",alt:""}})]),s._v(" "),a("p",[s._v("​\t\t为了模拟数据的实时生成，我们可以通过数据回放程序来实现订单数据的回放功能，主要数据参见课件当中的数据，我们这里主要使用到了成都以及海口的数据来实现数据的回放。")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/kflys/uPic/raw/master/uPic/1593619386470-92515ef5-7f96-4079-a370-7a13682446d7.png",alt:""}})]),s._v(" "),a("h2",{attrs:{id:"第一步-上传数据到服务器"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第一步-上传数据到服务器"}},[s._v("#")]),s._v(" 第一步：上传数据到服务器")]),s._v(" "),a("p",[s._v("将海口数据上传到node01服务器的/kfly/datas/sourcefile这个路径下")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("node01执行以下命令创建文件夹，然后上传数据\nmkdir -p /kfly/datas/sourcefile\n\n将成都数据上传到node02服务器的/kfly/datas/sorucefile这个路径下\nnode02执行以下命令创建文件夹，然后上传数据\nmkdir -p /kfly/datas/sourcefile\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h2",{attrs:{id:"第二步-通过脚本回放数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第二步-通过脚本回放数据"}},[s._v("#")]),s._v(" 第二步：通过脚本回放数据")]),s._v(" "),a("p",[s._v("使用课件当中的FileOperate-1.0-SNAPSHOT-jar-with-dependencies.jar这个jar包来实现数据的读取然后写入到另外一个文件当中去\n将FileOperate-1.0-SNAPSHOT-jar-with-dependencies.jar 这个jar包上传到node01服务器的/home/hadoop路径下去")]),s._v(" "),a("p",[s._v("在node01服务器的/home/hadoop/bin路径下创建shell脚本，用于数据的回放")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd /home/hadoop/bin\nvim start_stop_generate_data.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('#!/bin/bash\nscp /home/hadoop/FileOperate-1.0-SNAPSHOT-jar-with-dependencies.jar  node02:/home/hadoop/\n#休眠时间控制\nsleepTime=1000\n\nif [ ! -n "$2" ];then\n echo ""\n else\n sleepTime=$2\nfi\ncase $1 in\n"start" ){\n for i in  node01 node02\n  do\n    echo "-----------$i启动数据回放--------------"\n      ssh $i "source /etc/profile;nohup java -jar /home/hadoop/FileOperate-1.0-SNAPSHOT-jar-with-dependencies.jar /kfly/datas/sourcefile /kfly/datas/destfile $2   > /dev/null 2>&1 & "\n\n  done\n};;\n"stop"){\n  for i in node02 node01\n    do\n      echo "-----------停止 $i 数据回放-------------"\n      ssh $i "source /etc/profile; ps -ef | grep FileOperate-1.0-SNAPSHOT-jar | grep -v grep |awk \'{print \\$2}\' | xargs kill"\n    done\n};;\nesac\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br")])]),a("p",[s._v("给脚本赋予执行权限")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd /home/hadoop/bin\nchmod 777 start_stop_generate_data.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"第三步-通过flume来采集数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第三步-通过flume来采集数据"}},[s._v("#")]),s._v(" 第三步：通过flume来采集数据")]),s._v(" "),a("p",[a("img",{attrs:{src:"https://gitee.com/kflys/uPic/raw/master/uPic/1593619386599-16bbb146-7e57-4e9b-bf73-11d29f5f6c66.png",alt:""}})]),s._v(" "),a("h3",{attrs:{id:"node01开发flume的配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node01开发flume的配置文件"}},[s._v("#")]),s._v(" node01开发flume的配置文件")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd /kfly/install/apache-flume-1.6.0-cdh5.14.2-bin/conf/\nvim flume_client.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("a1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# Describe/configure the source\n\n#配置source\na1.sources.r1.type = taildir\na1.sources.r1.positionFile = /kfly/datas/flume_temp/flume_posit/haikou.json\na1.sources.r1.filegroups = f1\na1.sources.r1.filegroups.f1 = /kfly/datas/destfile/part.+\na1.sources.r1.fileHeader = true\na1.sources.r1.channels = c1\na1.sources.r1.interceptors = i1\na1.sources.r1.interceptors.i1.type = static\n\n##  static拦截器的功能就是往采集到的数据的header中插入自己定## 义的key-value对\n\na1.sources.r1.interceptors.i1.key = type\na1.sources.r1.interceptors.i1.value = hai_kou_gps_topic\n#flume监听轨迹文件内容的变化 tuch gps\n#配置sink\n#a1.sinks.k1.type = org.apache.flume.sink.kafka.KafkaSink\n#flume监听的文件数据发送到此kafka的主题当中\n#a1.sinks.k1.topic = hai_kou_gps_topic\n#a1.sinks.k1.brokerList= node01:9092,node02:9092,node03:9092\n#a1.sinks.k1.batchSize = 20\n#a1.sinks.k1.requiredAcks = 1\n#a1.sinks.k1.producer.linger.ms = 1\n\n#配置sink\n\na1.sinks.k1.type = avro\na1.sinks.k1.hostname = node03\na1.sinks.k1.port = 41414\n#配置channel\na1.channels.c1.type = file\n#检查点文件目录\na1.channels.c1.checkpointDir=/kfly/datas/flume_temp/flume_check\n#缓存数据文件夹\na1.channels.c1.dataDirs=/kfly/datas/flume_temp/flume_cache\n\n# Bind the source and sink to the channel\n\na1.sources.r1.channels = c1\na1.sinks.k1.channel = c1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br")])]),a("h3",{attrs:{id:"node02开发flume的配置文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node02开发flume的配置文件"}},[s._v("#")]),s._v(" node02开发flume的配置文件")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd /kfly/install/apache-flume-1.6.0-cdh5.14.2-bin/conf/\nvim flume_client.conf\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("a1.sources = r1\na1.sinks = k1\na1.channels = c1\n\n# Describe/configure the source\n\n#配置source\na1.sources.r1.type = taildir\na1.sources.r1.positionFile = /kfly/datas/flume_temp/flume_posit/chengdu.json\na1.sources.r1.filegroups = f1\na1.sources.r1.filegroups.f1 = /kfly/datas/destfile/part.+\na1.sources.r1.fileHeader = true\na1.sources.r1.channels = c1\na1.sources.r1.interceptors = i1\na1.sources.r1.interceptors.i1.type = static\n\n##  static拦截器的功能就是往采集到的数据的header中插入自己定## 义的key-value对\n\na1.sources.r1.interceptors.i1.key = type\na1.sources.r1.interceptors.i1.value = cheng_du_gps_topic\n#flume监听轨迹文件内容的变化 tuch gps\n#配置sink\n#a1.sinks.k1.type = org.apache.flume.sink.kafka.KafkaSink\n#flume监听的文件数据发送到此kafka的主题当中\n#a1.sinks.k1.topic = cheng_du_gps_topic\n#a1.sinks.k1.brokerList= node01:9092,node02:9092,node03:9092\n#a1.sinks.k1.batchSize = 20\n#a1.sinks.k1.requiredAcks = 1\n#a1.sinks.k1.producer.linger.ms = 1\n\na1.sinks.k1.type = avro\na1.sinks.k1.hostname = node03\na1.sinks.k1.port = 41414\n\n#配置channel\na1.channels.c1.type = file\n#检查点文件目录\na1.channels.c1.checkpointDir=/kfly/datas/flume_temp/flume_check\n#缓存数据文件夹\na1.channels.c1.dataDirs=/kfly/datas/flume_temp/flume_cache\n\n# Bind the source and sink to the channel\n\na1.sources.r1.channels = c1\na1.sinks.k1.channel = c1\n\nnode03开发flume的配置文件\ncd /kfly/install/apache-flume-1.6.0-cdh5.14.2-bin/conf/\nvim flume2kafka.conf\n\na1.sources = r1\na1.sinks = k1\na1.channels = c1\n#定义source\na1.sources.r1.type = avro\na1.sources.r1.bind = node03\na1.sources.r1.port =41414\n#添加时间拦截器\na1.sources.r1.interceptors = i1\na1.sources.r1.interceptors.i1.type = org.apache.flume.interceptor.TimestampInterceptor$Builder\n#定义channels\n#配置channel\na1.channels.c1.type = file\n#检查点文件目录\na1.channels.c1.checkpointDir=/kfly/datas/flume_temp/flume_check\n#缓存数据文件夹\na1.channels.c1.dataDirs=/kfly/datas/flume_temp/flume_cache\n#定义sink\n#flume监听轨迹文件内容的变化 tuch gps\n#配置sink\na1.sinks.k1.type = org.apache.flume.sink.kafka.KafkaSink\nflume监听的文件数据发送到此kafka的主题当中\na1.sinks.k1.topic = %{type}\na1.sinks.k1.brokerList= node01:9092,node02:9092,node03:9092\na1.sinks.k1.batchSize = 20\na1.sinks.k1.requiredAcks = 1\na1.sinks.k1.producer.linger.ms = 1\n#组装source、channel、sink\na1.sources.r1.channels = c1\na1.sinks.k1.channel = c1\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br"),a("span",{staticClass:"line-number"},[s._v("71")]),a("br"),a("span",{staticClass:"line-number"},[s._v("72")]),a("br"),a("span",{staticClass:"line-number"},[s._v("73")]),a("br"),a("span",{staticClass:"line-number"},[s._v("74")]),a("br"),a("span",{staticClass:"line-number"},[s._v("75")]),a("br"),a("span",{staticClass:"line-number"},[s._v("76")]),a("br"),a("span",{staticClass:"line-number"},[s._v("77")]),a("br"),a("span",{staticClass:"line-number"},[s._v("78")]),a("br"),a("span",{staticClass:"line-number"},[s._v("79")]),a("br"),a("span",{staticClass:"line-number"},[s._v("80")]),a("br")])]),a("h2",{attrs:{id:"第四步-开发flume启动停止脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第四步-开发flume启动停止脚本"}},[s._v("#")]),s._v(" 第四步：开发flume启动停止脚本")]),s._v(" "),a("h3",{attrs:{id:"node01执行脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node01执行脚本"}},[s._v("#")]),s._v(" node01执行脚本")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd /home/hadoop/bin/\nvim flume_start_stop.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('#!/bin/bash\ncase $1 in\n"start" ){\n for i in node03 node02 node01\n  do\n    echo "-----------启动 $i 采集flume-------------"\n    if [ "node03" = $i ];then\n      ssh $i "source /etc/profile;nohup /kfly/install/apache-flume-1.6.0-cdh5.14.2-bin/bin/flume-ng agent -n a1 -c /kfly/install/apache-flume-1.6.0-cdh5.14.2-bin/conf -f /kfly/install/apache-flume-1.6.0-cdh5.14.2-bin/conf/flume2kafka.conf -Dflume.root.logger=info,console > /dev/null 2>&1 & "\n    else\n      ssh $i "source /etc/profile;nohup /kfly/install/apache-flume-1.6.0-cdh5.14.2-bin/bin/flume-ng agent -n a1 -c /kfly/install/apache-flume-1.6.0-cdh5.14.2-bin/conf -f /kfly/install/apache-flume-1.6.0-cdh5.14.2-bin/conf/flume_client.conf -Dflume.root.logger=info,console > /dev/null 2>&1 &  "\n    fi\n  done\n};;\n"stop"){\n  for i in node03 node02 node01\n    do\n      echo "-----------停止 $i 采集flume-------------"\n      ssh $i "source /etc/profile; ps -ef | grep flume | grep -v grep |awk \'{print \\$2}\' | xargs kill"\n    done\n};;\nesac\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("chmod 777  flume_start_stop.sh\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h2",{attrs:{id:"第五步-创建kafka的topic"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第五步-创建kafka的topic"}},[s._v("#")]),s._v(" 第五步：创建kafka的topic")]),s._v(" "),a("p",[s._v("node01执行以下命令创建kafka的topic")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd /kfly/install/kafka_2.11-1.1.0/\n\nbin/kafka-topics.sh --create --zookeeper node01:2181 --replication-factor 2 --partitions 9 --topic cheng_du_gps_topic\nbin/kafka-topics.sh --create --zookeeper node01:2181 --replication-factor 2 --partitions 9 --topic hai_kou_gps_topic\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h2",{attrs:{id:"第六步-订单回放、flume采集"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第六步-订单回放、flume采集"}},[s._v("#")]),s._v(" 第六步：订单回放、flume采集")]),s._v(" "),a("h3",{attrs:{id:"node01启动订单回放脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node01启动订单回放脚本"}},[s._v("#")]),s._v(" node01启动订单回放脚本")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd /home/hadoop/bin/\nsh start_stop_generate_data.sh start 3000\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h3",{attrs:{id:"node01启动flume采集数据脚本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node01启动flume采集数据脚本"}},[s._v("#")]),s._v(" node01启动flume采集数据脚本")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd /home/hadoop/bin/\nsh flume_start_stop.sh start\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("h2",{attrs:{id:"第七步-消费kafka数据"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#第七步-消费kafka数据"}},[s._v("#")]),s._v(" 第七步：消费kafka数据")]),s._v(" "),a("p",[s._v("node01执行以下命令消费kafka当中的数据")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cd /kfly/install/kafka_2.11-1.1.0/\nbin/kafka-console-consumer.sh --topic cheng_du_gps_topic  --zookeeper node01:2181,node02:2181,node03:2181\n\nbin/kafka-console-consumer.sh --topic hai_kou_gps_topic  --zookeeper node01:2181,node02:2181,node03:2181\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);