(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{529:function(t,a,s){"use strict";s.r(a);var n=s(19),e=Object(n.a)({},(function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("p",[t._v("前面我们已经通过flume采集日志数据，包括订单日志数据，以及经纬度上报信息数据，然后将数据接入到kafka当中去，通过sparStreaming来消费kafka的数据，实现将数据保存到Hbase以及redis当中，实现了数据的实时处理，然后对hbase当中的数据，通过spark程序读取，进行处理，计算我们的虚拟车站结果。到此为止我们实现了日志数据的采集和处理等功能模块，那么我们接下来就来看一下我们通过业务库实时解析数据，实现订单的实时解析")]),t._v(" "),s("img",{staticStyle:{zoom:"150%"},attrs:{src:"https://gitee.com/kflys/uPic/raw/master/uPic/1593619388929-04fae5fc-b623-48ed-a1dc-b981e68d6d15.png"}}),t._v(" "),s("p",[s("img",{attrs:{src:"https://gitee.com/kflys/uPic/raw/master/uPic/1593619389036-4c001ce8-7652-46b3-84ec-4533c430ed8d.png",alt:""}})]),t._v(" "),s("h2",{attrs:{id:"_1、maxwell的基本介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1、maxwell的基本介绍"}},[t._v("#")]),t._v(" 1、maxwell的基本介绍")]),t._v(" "),s("p",[t._v("maxwell是一款专业解析mysql的binlog的数据同步的工具，功能与canal类似（canal是阿里开源的一款数据实时同步工具），我们可以通过maxwell或者canal来实现binlog的实时解析，实现数据的实时同步\n官方网址：\n"),s("a",{attrs:{href:"http://maxwells-daemon.io/",target:"_blank",rel:"noopener noreferrer"}},[t._v("http://maxwells-daemon.io/"),s("OutboundLink")],1)]),t._v(" "),s("h2",{attrs:{id:"_2、maxwell与canal的比较"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2、maxwell与canal的比较"}},[t._v("#")]),t._v(" 2、maxwell与canal的比较")]),t._v(" "),s("p",[t._v("主要区别：\n1、虽然Maxwell不能直接支持HA，但是它支持断点还原，即错误解决后重启继续上次点儿读取数据。\n2、Canal是服务端，数据过来了并不能直接写出去，需要一个客户端：syncClient去获取数据\nMaxwell即是服务端也是客户端。\n3、Maxwell支持Bootstrap，即刷全量的数据，而Canal不支持。\n4、Maxwell只支持Json，而Canel数据格式自由")]),t._v(" "),s("p",[t._v("个人选择Maxwell：\na、服务端和客户端是一体的\nb、Maxwell是轻量级的，出错风险低，Canal经常出错\nc、虽然部署的是单台，但是具有断点还原能力，出错好解决\nd、Maxwell代码质量非常好，且社区更加的活跃")]),t._v(" "),s("h2",{attrs:{id:"_3、maxwell的安装以及使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3、maxwell的安装以及使用"}},[t._v("#")]),t._v(" 3、maxwell的安装以及使用")]),t._v(" "),s("p",[t._v("后续会给出")]),t._v(" "),s("h2",{attrs:{id:"_4、涉及到的业务数据库表介绍"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_4、涉及到的业务数据库表介绍"}},[t._v("#")]),t._v(" 4、涉及到的业务数据库表介绍")]),t._v(" "),s("p",[t._v("这里我们主要涉及到四张数据库表，分别是司机表，乘客表，订单表以及司管方表，我们的数据分析主要以这四张表为基础，对业务库当中的数据进行脱敏之后对我们的数据进行分析")]),t._v(" "),s("h3",{attrs:{id:"司机表-driver-info"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#司机表-driver-info"}},[t._v("#")]),t._v(" 司机表：driver_info")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("字段名称")]),t._v(" "),s("th",[t._v("字段类型")]),t._v(" "),s("th",[t._v("字段含义")]),t._v(" "),s("th",[t._v("字段描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("id_")]),t._v(" "),s("td",[t._v("Int")]),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("主键id")]),t._v(" "),s("td",[t._v("表的主键id唯一且自增")]),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("mobile")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("手机号")]),t._v(" "),s("td",[t._v("司机手机号码")])]),t._v(" "),s("tr",[s("td",[t._v("driver_name")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("姓名")]),t._v(" "),s("td",[t._v("司机姓名")])]),t._v(" "),s("tr",[s("td",[t._v("create_time")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("创建时间")]),t._v(" "),s("td",[t._v("司机注册时间")])]),t._v(" "),s("tr",[s("td",[t._v("register_city")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("注册城市（城市编码字典")]),t._v(" "),s("td",[t._v("司机注册城市编码")])]),t._v(" "),s("tr",[s("td",[t._v("driver_type")]),t._v(" "),s("td",[t._v("Int")]),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("司机所属业务类型，")]),t._v(" "),s("td",[t._v('"1":快车 "2":出租车 "3":专车')]),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("cancel_count")]),t._v(" "),s("td",[t._v("Int")]),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("司机当天有责取消订单的次数")]),t._v(" "),s("td",[t._v("司机当天取消的单数，每天从0开始累计")]),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("driver_management_id")]),t._v(" "),s("td",[t._v("Int")]),t._v(" "),s("td",[t._v("司管方id")]),t._v(" "),s("td",[t._v("司机所属司管方id")])])])]),t._v(" "),s("h3",{attrs:{id:"乘客表-renter-info"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#乘客表-renter-info"}},[t._v("#")]),t._v(" 乘客表：renter_info")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("字段名称")]),t._v(" "),s("th",[t._v("字段类型")]),t._v(" "),s("th",[t._v("字段含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("id_")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("主键id")])]),t._v(" "),s("tr",[s("td",[t._v("create_time")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("创建时间")])]),t._v(" "),s("tr",[s("td",[t._v("last_login_city")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("最后一次登录的城市")])]),t._v(" "),s("tr",[s("td",[t._v("last_logon_time")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("最后一次登录的时间")])]),t._v(" "),s("tr",[s("td",[t._v("city_name")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("注册城市")])])])]),t._v(" "),s("h3",{attrs:{id:"订单表-order-info"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#订单表-order-info"}},[t._v("#")]),t._v(" 订单表：order_info")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("字段名称")]),t._v(" "),s("th",[t._v("字段含义")]),t._v(" "),s("th",[t._v("备注")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("id_")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("订单id")])]),t._v(" "),s("tr",[s("td",[t._v("order_no")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("订单编号：目前和订单id一样，14位{日期(年月)6位+8位序列号（位数不足补0）}")])]),t._v(" "),s("tr",[s("td",[t._v("vehicle_id")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("车辆id")])]),t._v(" "),s("tr",[s("td",[t._v("vehicle_series_id")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("车型/车系ID")])]),t._v(" "),s("tr",[s("td",[t._v("vehicle_brand")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("车辆品牌描述")])]),t._v(" "),s("tr",[s("td",[t._v("vehicle_series")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("车辆型号描述")])]),t._v(" "),s("tr",[s("td",[t._v("vehicle_license")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("车牌号")])]),t._v(" "),s("tr",[s("td",[t._v("driver_id")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("司机id")])]),t._v(" "),s("tr",[s("td",[t._v("driver_name")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("司机姓名")])]),t._v(" "),s("tr",[s("td",[t._v("driver_mobile")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("司机手机")])]),t._v(" "),s("tr",[s("td",[t._v("renter_id")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("乘客id")])]),t._v(" "),s("tr",[s("td",[t._v("renter_full_name")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("乘客姓名")])]),t._v(" "),s("tr",[s("td",[t._v("renter_mobile")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("乘客手机")])]),t._v(" "),s("tr",[s("td",[t._v("order_type")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("订单类型。0、实时订单1、预约订单")])]),t._v(" "),s("tr",[s("td",[t._v("state")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("订单流转状态：1已下单，2、已接单，3用车中，4到达目的地，5未支付，6已支付完成，7司机到达约定地点")])]),t._v(" "),s("tr",[s("td",[t._v("cancel")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("cancel：0未取消，1用户取消，2司机取消，3超时未接单，系统自动取消")])]),t._v(" "),s("tr",[s("td",[t._v("work_flow")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("work_flow：0未结束，1已结束；")])]),t._v(" "),s("tr",[s("td",[t._v("close_remark")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("关闭订单备注(运营平台操作)")])]),t._v(" "),s("tr",[s("td",[t._v("close_time")]),t._v(" "),s("td",[t._v("datetime")]),t._v(" "),s("td",[t._v("关闭订单时间")])]),t._v(" "),s("tr",[s("td",[t._v("close_user_id")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("关闭订单管理员Id")])]),t._v(" "),s("tr",[s("td",[t._v("end_reason")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("取消原因。数据字典。以逗号相隔。")])]),t._v(" "),s("tr",[s("td",[t._v("create_time")]),t._v(" "),s("td",[t._v("datetime")]),t._v(" "),s("td",[t._v("订单创建时间")])]),t._v(" "),s("tr",[s("td",[t._v("cancel_time")]),t._v(" "),s("td",[t._v("datetime")]),t._v(" "),s("td",[t._v("取消时间")])]),t._v(" "),s("tr",[s("td",[t._v("estimate_geton_time")]),t._v(" "),s("td",[t._v("datetime")]),t._v(" "),s("td",[t._v("预估上车时间")])]),t._v(" "),s("tr",[s("td",[t._v("wait_time")]),t._v(" "),s("td",[t._v("mediumtext")]),t._v(" "),s("td",[t._v("等待时长。单位：s")])]),t._v(" "),s("tr",[s("td",[t._v("wait_mile")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("空驶里程")])]),t._v(" "),s("tr",[s("td",[t._v("plan_model")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("预定车型")])]),t._v(" "),s("tr",[s("td",[t._v("actual_model")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("实际使用车型")])]),t._v(" "),s("tr",[s("td",[t._v("begin_time")]),t._v(" "),s("td",[t._v("datetime")]),t._v(" "),s("td",[t._v("订单分时计费开始时间\\r\\n注：\\r\\n分时：1、创建订单后15分钟没取车，")])]),t._v(" "),s("tr",[s("td",[t._v("时间为创建时间+15分钟，\\r\\n2、15分钟内取车，为取车时间\\r\\n日租：为")]),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("end_time")]),t._v(" "),s("td",[t._v("datetime")]),t._v(" "),s("td",[t._v("用户还车成功时间，或者客服关闭订单时间")])]),t._v(" "),s("tr",[s("td",[t._v("get_on_time")]),t._v(" "),s("td",[t._v("datetime")]),t._v(" "),s("td",[t._v("乘客上车时间")])]),t._v(" "),s("tr",[s("td",[t._v("begin_address_code")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("发起地行政区域代码")])]),t._v(" "),s("tr",[s("td",[t._v("navigation_brand")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("1.百度2.高德。默认为2：高德地图")])]),t._v(" "),s("tr",[s("td",[t._v("Encrypt")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("1：GCJ-02测绘局标准\\r\\n2：WGS84GPS标准\\r\\n3：BD-09百度标准\\r\\n4：其他")])]),t._v(" "),s("tr",[s("td",[t._v("city_name")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("下单所属城市名称")])]),t._v(" "),s("tr",[s("td",[t._v("open_lng")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("订单起始位置经度。乘客预计上车地点经度")])]),t._v(" "),s("tr",[s("td",[t._v("open_lat")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("订单起始位置纬度。乘客预计上车地点纬度")])]),t._v(" "),s("tr",[s("td",[t._v("open_location")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("订单起始位置信息。乘客预计上车地点位置信息")])]),t._v(" "),s("tr",[s("td",[t._v("close_lng")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("订单结束位置经度。乘客预计下车地点经度")])]),t._v(" "),s("tr",[s("td",[t._v("close_lat")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("订单结束位置纬度。乘客预计下车地点纬度")])]),t._v(" "),s("tr",[s("td",[t._v("close_location")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("订单结束位置信息。乘客预计下车地点位置信息")])]),t._v(" "),s("tr",[s("td",[t._v("receive_lng")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("司机接单位置经度")])]),t._v(" "),s("tr",[s("td",[t._v("receive_lat")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("司机接单位置纬度")])]),t._v(" "),s("tr",[s("td",[t._v("go_on_lng")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("乘客上车位置经度。司机点击用户已上车的按钮后记录")])]),t._v(" "),s("tr",[s("td",[t._v("receive_location")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("司机接单位置信息")])]),t._v(" "),s("tr",[s("td",[t._v("go_on_lat")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("乘客上车位置纬度。司机点击用户已上车的按钮后记录")])]),t._v(" "),s("tr",[s("td",[t._v("go_on_location")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("乘客上车位置信息。司机点击用户已上车的按钮后记录")])]),t._v(" "),s("tr",[s("td",[t._v("arrive_lng")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("司机到达位置经度。乘客实际下车位置的经度")])]),t._v(" "),s("tr",[s("td",[t._v("arrive_lat")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("司机到达位置纬度。乘客实际下车位置的纬度")])]),t._v(" "),s("tr",[s("td",[t._v("arrive_location")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("司机到达位置信息。乘客实际下车的位置信息")])]),t._v(" "),s("tr",[s("td",[t._v("close_gps_time")]),t._v(" "),s("td",[t._v("datetime")]),t._v(" "),s("td",[t._v("结束时上传gps时间")])]),t._v(" "),s("tr",[s("td",[t._v("charge_mileage")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("订单里程")])]),t._v(" "),s("tr",[s("td",[t._v("price_low_speed")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("低速等待时长")])]),t._v(" "),s("tr",[s("td",[t._v("peak_up_price")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("高峰时段时间加价金额。单位：分")])]),t._v(" "),s("tr",[s("td",[t._v("night_up_price")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("夜间时段里程加价金额。单位：分")])]),t._v(" "),s("tr",[s("td",[t._v("pay_type")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("支付方式：1-微信支付，2-支付宝，3-余额，4-企业支付")])]),t._v(" "),s("tr",[s("td",[t._v("pay_enterprise_id")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("支付企业id")])]),t._v(" "),s("tr",[s("td",[t._v("pay_time")]),t._v(" "),s("td",[t._v("datetime")]),t._v(" "),s("td",[t._v("支付完成时间")])]),t._v(" "),s("tr",[s("td",[t._v("call_mode")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("叫车方式（0：实时：1预约）")])]),t._v(" "),s("tr",[s("td",[t._v("act_id")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("活动ID")])]),t._v(" "),s("tr",[s("td",[t._v("markup_multiple")]),t._v(" "),s("td",[t._v("decimal")]),t._v(" "),s("td",[t._v("加价倍率")])]),t._v(" "),s("tr",[s("td",[t._v("passenger_num")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("乘客人数")])]),t._v(" "),s("tr",[s("td",[t._v("appointment_start_time")]),t._v(" "),s("td",[t._v("datetime")]),t._v(" "),s("td",[t._v("预约开始时间")])]),t._v(" "),s("tr",[s("td",[t._v("appointment_end_time")]),t._v(" "),s("td",[t._v("datetime")]),t._v(" "),s("td",[t._v("预约结束时间")])]),t._v(" "),s("tr",[s("td",[t._v("pay_estimate")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("预估费用。单位：分")])]),t._v(" "),s("tr",[s("td",[t._v("esDistance")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("预估里程")])]),t._v(" "),s("tr",[s("td",[t._v("esTime")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("预估时间")])]),t._v(" "),s("tr",[s("td",[t._v("pay_all")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("支付费用(可能比产生费用少，比如优惠券之类)")])]),t._v(" "),s("tr",[s("td",[t._v("pay_normal")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("产生费用：里程费+时间费+过桥费+停车费+高速费+远途费+...")])]),t._v(" "),s("tr",[s("td",[t._v("book_tip")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("预约服务费。单位：分")])]),t._v(" "),s("tr",[s("td",[t._v("passenger_tip")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("附加费。单位：分")])]),t._v(" "),s("tr",[s("td",[t._v("parking_tip")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("停车费。单位：分")])]),t._v(" "),s("tr",[s("td",[t._v("pontage_tip")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("过桥费。单位：分")])]),t._v(" "),s("tr",[s("td",[t._v("tollfee_tip")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("高速费。单位：分")])]),t._v(" "),s("tr",[s("td",[t._v("mileage_price")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("里程费。单位：分")])]),t._v(" "),s("tr",[s("td",[t._v("hour_price")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("时长费。单位：分")])]),t._v(" "),s("tr",[s("td",[t._v("empty_price")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("空驶费。单位：分")])]),t._v(" "),s("tr",[s("td",[t._v("far_up_price")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("远途加价金额。单位：分")])]),t._v(" "),s("tr",[s("td",[t._v("other_up_price")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("其他加价金额。单位：分")])]),t._v(" "),s("tr",[s("td",[t._v("service_fee")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("抽成比例")])]),t._v(" "),s("tr",[s("td",[t._v("driver_income")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("抽成之后的实际价格。司机最终收入（司机端显示）。")])]),t._v(" "),s("tr",[s("td",[t._v("单位：分")]),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("company_income")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("平台收入。单位：分")])]),t._v(" "),s("tr",[s("td",[t._v("disbursements")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("是否系统垫付。0：否1：是")])]),t._v(" "),s("tr",[s("td",[t._v("driver_evaluate_state")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("用户评价状态。0、未评审1、已评审2、系统评价")])]),t._v(" "),s("tr",[s("td",[t._v("renter_evaluate_state")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("用户评价状态。0、未评审1、已评审2、系统评价")])]),t._v(" "),s("tr",[s("td",[t._v("cancel_reason_desc")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("取消原因")])]),t._v(" "),s("tr",[s("td",[t._v("field1")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("系统保留字段")])]),t._v(" "),s("tr",[s("td",[t._v("fieid2")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("系统保留字段")])]),t._v(" "),s("tr",[s("td",[t._v("field3")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("系统保留字段")])]),t._v(" "),s("tr",[s("td",[t._v("field4")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("系统保留字段")])]),t._v(" "),s("tr",[s("td",[t._v("field5")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("系统保留字段")])]),t._v(" "),s("tr",[s("td",[t._v("expected_vehuse_time")]),t._v(" "),s("td",[t._v("datetime")]),t._v(" "),s("td",[t._v("预计用车时间")])]),t._v(" "),s("tr",[s("td",[t._v("renter_order_remark")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("乘客备注")])]),t._v(" "),s("tr",[s("td",[t._v("bespeak_type")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("预约类型(BESPEAK：预约IMMEDIATE：即时SHUTTLE：")])]),t._v(" "),s("tr",[s("td",[t._v("接送机DAILY_RENT：日租HALF_DAILY_RENT：半日租)")]),t._v(" "),s("td"),t._v(" "),s("td")]),t._v(" "),s("tr",[s("td",[t._v("is_voice")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("是否语音订单")])]),t._v(" "),s("tr",[s("td",[t._v("by_car_type")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v('用户下单操作"1":快车"2":出租车"3":专车4：一键呼叫多种车型')])]),t._v(" "),s("tr",[s("td",[t._v("push_order_type")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("下单场景1：常规订单，2：摇一摇订单")])]),t._v(" "),s("tr",[s("td",[t._v("order_business_type")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v('订单业务类型："1":快车"2":出租车"3":专车系统派单成功后，更新该字段的值')])]),t._v(" "),s("tr",[s("td",[t._v("order_base_id")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("订单基础表id")])]),t._v(" "),s("tr",[s("td",[t._v("driver_arrive_appoint_time")]),t._v(" "),s("td",[t._v("datetime")]),t._v(" "),s("td",[t._v("司机到达约定地点时间")])]),t._v(" "),s("tr",[s("td",[t._v("driver_arrive_appoint_lng")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("司机到达约定地点经度")])]),t._v(" "),s("tr",[s("td",[t._v("driver_arrive_appoint_lat")]),t._v(" "),s("td",[t._v("double")]),t._v(" "),s("td",[t._v("司机到达约定地点纬度")])]),t._v(" "),s("tr",[s("td",[t._v("driver_arrive_appoint_location")]),t._v(" "),s("td",[t._v("varchar")]),t._v(" "),s("td",[t._v("司机到达约定地点名称")])]),t._v(" "),s("tr",[s("td",[t._v("order_source")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("订单来源，1、东风出行APP2、高德地图3、H5")])]),t._v(" "),s("tr",[s("td",[t._v("is_invoice")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("是否已开票，0、未开票1、已开票")])]),t._v(" "),s("tr",[s("td",[t._v("company_service_fee")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("司管公司分成比例")])]),t._v(" "),s("tr",[s("td",[t._v("company_service_income")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("司管分成金额。单位：分")])]),t._v(" "),s("tr",[s("td",[t._v("vehiclel_company_service_fee")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("车管公司分成比例")])]),t._v(" "),s("tr",[s("td",[t._v("vehiclel_company_service_income")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("车管分成金额。单位：分")])]),t._v(" "),s("tr",[s("td",[t._v("channel_service_fee")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("渠道分成比例")])]),t._v(" "),s("tr",[s("td",[t._v("channel_service_income")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("渠道分成金额。单位：分")])]),t._v(" "),s("tr",[s("td",[t._v("driver_fee")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("司机分成比例")])]),t._v(" "),s("tr",[s("td",[t._v("vehiclel_company_id")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("车管方id")])]),t._v(" "),s("tr",[s("td",[t._v("company_service_id")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("司管方id")])]),t._v(" "),s("tr",[s("td",[t._v("channel_service_id")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("渠道方id")])]),t._v(" "),s("tr",[s("td",[t._v("first_renter_no")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("一级账号(父账号)")])]),t._v(" "),s("tr",[s("td",[t._v("second_renter_no")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("二级账号（祖账号）")])]),t._v(" "),s("tr",[s("td",[t._v("first_reward_per")]),t._v(" "),s("td",[t._v("tinyint")]),t._v(" "),s("td",[t._v("一级分成占比")])]),t._v(" "),s("tr",[s("td",[t._v("second_reward_per")]),t._v(" "),s("td",[t._v("tinyint")]),t._v(" "),s("td",[t._v("二级分成占比")])]),t._v(" "),s("tr",[s("td",[t._v("first_order_award")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("一级订单分成金额（父）")])]),t._v(" "),s("tr",[s("td",[t._v("second_order_award")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("二级订单分成金额（祖）")])])])]),t._v(" "),s("h3",{attrs:{id:"司管方表-opt-alliance-business"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#司管方表-opt-alliance-business"}},[t._v("#")]),t._v(" 司管方表：opt_alliance_business")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("字段名称")]),t._v(" "),s("th",[t._v("字段类型")]),t._v(" "),s("th",[t._v("字段含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("id_")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("主键")])]),t._v(" "),s("tr",[s("td",[t._v("alliance_name")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("加盟商名称")])]),t._v(" "),s("tr",[s("td",[t._v("organization_code")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("组织机构代码")])]),t._v(" "),s("tr",[s("td",[t._v("alliance_role")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("加盟商角色，0、车管 1、司管 ，多种角色英文逗号")])]),t._v(" "),s("tr",[s("td",[t._v("linkman")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("联系人姓名")])]),t._v(" "),s("tr",[s("td",[t._v("contact_number")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("联系电话")])]),t._v(" "),s("tr",[s("td",[t._v("create_user")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("创建人")])]),t._v(" "),s("tr",[s("td",[t._v("create_time")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("创建时间")])]),t._v(" "),s("tr",[s("td",[t._v("update_user")]),t._v(" "),s("td",[t._v("int")]),t._v(" "),s("td",[t._v("修改人")])]),t._v(" "),s("tr",[s("td",[t._v("update_time")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("修改时间")])]),t._v(" "),s("tr",[s("td",[t._v("state")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("状态，0、正常 1、停用")])]),t._v(" "),s("tr",[s("td",[t._v("del_state")]),t._v(" "),s("td",[t._v("String")]),t._v(" "),s("td",[t._v("删除标识 0：未删除 1：已删除")])])])]),t._v(" "),s("p"),t._v(" "),s("h2",{attrs:{id:"_5、业务库订单数据回放功能实现实时binlog进入kafka"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_5、业务库订单数据回放功能实现实时binlog进入kafka"}},[t._v("#")]),t._v(" 5、业务库订单数据回放功能实现实时binlog进入kafka")]),t._v(" "),s("p",[t._v("通过模拟订单数据回放，实现我们的订单数据实时解析，参见课件资料当中的业务库数据资料，实现业务库当中的数据回放功能，通过maxwell实现解析binlog，并将binlog数据接入到kafka当中去")]),t._v(" "),s("h3",{attrs:{id:"第一步-开发maxwell配置"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第一步-开发maxwell配置"}},[t._v("#")]),t._v(" 第一步：开发maxwell配置")]),t._v(" "),s("p",[t._v("node03执行以下命令开发maxwell配置文件")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd /kfly/install/maxwell-1.22.1\nvim travel.properties\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("log_level=INFO\nproducer=kafka\nkafka.bootstrap.servers=node01:9092,node02:9092,node03:9092\nhost=node03.kaikeba.com\nuser=maxwell\npassword=123456\nproducer_ack_timeout = 600000\nport=3306\n_######### output format stuff ###############_\noutput_binlog_position=ture\noutput_server_id=true\noutput_thread_id=ture\noutput_commit_info=true\noutput_row_query=true\noutput_ddl=false\noutput_nulls=true\noutput_xoffset=true\noutput_schema_id=true\n_######### output format stuff ###############_\nkafka_topic= veche\nkafka_partition_hash=murmur3\nkafka_key_format=hash\nkafka.compression.type=snappy\nkafka.retries=5\nkafka.acks=all\nproducer_partition_by=primary_key\n_############ kafka stuff #############_\n_############## misc stuff ###########_\nbootstrapper=async\n_############## misc stuff ##########_\n_############## filter ###############_\nfilter=exclude:*.*, include: travel.order_info_201904,include: travel.order_info_201905,include: travel.order_info_201906,include: travel.order_info_201907,include: travel.order_info_201908,include: travel.order_info_201906,include: travel.order_info_201910,include: travel.order_info_201911,include: travel.order_info_201912,include: travel.renter_info,include: travel.driver_info ,include: travel.opt_alliance_business\n_############## filter ###############_\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br")])]),s("h3",{attrs:{id:"第二步-创建kafka的topic"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第二步-创建kafka的topic"}},[t._v("#")]),t._v(" 第二步：创建kafka的topic")]),t._v(" "),s("p",[t._v("node01执行以下命令创建kafka的topic")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd /kfly/install/kafka_2.11-1.0.1/\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("bin/kafka-topics.sh  --create  --topic veche --partitions  3 --replication-factor 1 --zookeeper node01:2181,node02:2181,node03:2181\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h3",{attrs:{id:"第三步-将数据上传到mysql所在机器"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第三步-将数据上传到mysql所在机器"}},[t._v("#")]),t._v(" 第三步：将数据上传到mysql所在机器")]),t._v(" "),s("p",[t._v("由于我的mysql安装在node03服务器，所以我将数据资料上传到node03服务器的/kfly/datas/dbdatas 这个路径下（mysql安装在哪一台，就将数据上传到哪一台服务器的/kfly/datas/dbdatas这个路径下）")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("mkdir -p /kfly/datas/dbdatas\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[s("img",{attrs:{src:"https://gitee.com/kflys/uPic/raw/master/uPic/1593619389268-49e298e3-55fb-482e-85e9-acdf7ad947da.png",alt:""}})]),t._v(" "),s("h3",{attrs:{id:"第四步-开发maxwell以及数据回放脚本"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第四步-开发maxwell以及数据回放脚本"}},[t._v("#")]),t._v(" 第四步：开发maxwell以及数据回放脚本")]),t._v(" "),s("p",[t._v("在mysql所在的集群的/home/hadoop/bin路径下创建数据回放脚本，由于我的mysql安装在node03服务器，所以我这个脚本也在node03服务器上面执行")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("mkdir -p /home/hadoop/bin/\ncd /home/hadoop/bin/\nvim maxOrder.sh\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('_#!/bin/bash_\ncase $1 in \n"start" ){\n nohup /kfly/install/maxwell-1.21.1/bin/maxwell --daemon --config /kfly/install/maxwell-1.21.1/travel.properties 2>&1 >> /kfly/install/maxwell-1.21.1/maxwell.log &\necho $#\n/usr/bin/mysql -h$2  -u$3 -p$4 < /kfly/datas/dbdatas/createdb.sql\n\nif [ $# -lt  6 ];\nthen\n    echo "请分别传入启动还是停止，mysql连接主机名，mysql连接用户名，mysql连接密码，数据路径,插入数据休眠时间（毫秒值）"\n    exit\nfi\nsource /etc/profile\nnohup java -jar /kfly/datas/dbdatas/db.jar $2 $3 $4 $5 $6 >/dev/null 2>&1 &\n};;\n"stop"){\n  ps -ef | grep Maxwell | grep -v grep |awk \'{print $2}\' | xargs kill \n  ps -ef | grep db.jar | grep -v grep |awk \'{print $2}\' | xargs kill \n};;\nesac\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br")])]),s("h3",{attrs:{id:"第五步-启动"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#第五步-启动"}},[t._v("#")]),t._v(" 第五步：启动")]),t._v(" "),s("ul",[s("li",[t._v("启动数据回放脚本以及kafka消费端，确认数据进入kafka")])]),t._v(" "),s("p",[t._v("node03执行以下命令启动数据回放脚本")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd /home/hadoop/bin/\n\nsh maxOrder.sh  start localhost root 123456 /kfly/datas/dbdatas 3000\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("如果需要停止maxwell以及数据插入，执行以下命令即可")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd /home/hadoop/bin/\n\nsh maxOrder.sh stop\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("p",[t._v("node01执行以下命令启动kafka的消费者")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("cd /kfly/install/kafka_2.11-1.0.1\n\nbin/kafka-console-consumer.sh --topic veche --zookeeper node01:2181\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("h2",{attrs:{id:"_6、提前创建hbase表"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_6、提前创建hbase表"}},[t._v("#")]),t._v(" 6、提前创建Hbase表")]),t._v(" "),s("p",[t._v("通过解析kafka当中的binlog数据，将所有的表数据保存到对应的Hbase表当中去，我们需要考虑到Hbase表的预分区的操作，提前创建hbase的对应的表，并考虑我们的rowkey的设计，实现数据的均匀的分区，避免Hbase数据的倾斜\n在我们的travel_spark模块下src/main/java路径下，创建package   com.travel.hbase 创建java文件CreateHbaseTableInit.java来实现Hbase表的提前创建")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('package com.travel.hbase;\n\nimport com.travel.common.Constants;\nimport com.travel.utils.HbaseTools;\nimport org.apache.commons.lang3.StringUtils;\nimport org.apache.hadoop.hbase.HColumnDescriptor;\nimport org.apache.hadoop.hbase.HTableDescriptor;\nimport org.apache.hadoop.hbase.TableName;\nimport org.apache.hadoop.hbase.client.Admin;\nimport org.apache.hadoop.hbase.client.Connection;\nimport org.apache.hadoop.hbase.util.Bytes;\nimport java.io.IOException;\n\npublic class CreateHbaseTableInit {\n    public static void **main**(String[] args) throws Exception {\n        Connection hbaseConn = HbaseTools.**getHbaseConn**();\n        CreateHbaseTableInit createHbaseTableInit = new **CreateHbaseTableInit**();\n        /**_\n         * syn.table.order_info="order_info"_\n         * syn.table.renter_info="renter_info"_\n         * syn.table.driver_info="driver_info"_\n         * syn.table.opt_alliance_business="opt_alliance_business"_\n         */_\n        String[] tableNames = new String[]{"order_info","renter_info","driver_info","opt_alliance_business"};\n        for (String tableName : tableNames) {\n            createHbaseTableInit.**createTable**(hbaseConn,Constants.DEFAULT_REGION_NUM,tableName);\n        }\n        hbaseConn.**close**();\n    }\n\n    public void **createTable**(Connection connection,int regionNum,String tableName) throws IOException {\n        Admin admin = connection.**getAdmin**();\n        if(admin.**tableExists**(TableName.**valueOf**(tableName))){\n            admin.**disableTable**(TableName.**valueOf**(tableName));\n            admin.**deleteTable**(TableName.**valueOf**(tableName));\n        }\n         /*  //HBase自带的分区工具类，自动帮我们进行分区_\n            //获取到的是16进制的字符串_\n            RegionSplitter.HexStringSplit spliter = new RegionSplitter.HexStringSplit();_\n            byte[][] split = spliter.split(8);_\n            //适合rowkey经过hash或者md5之后的字符串_\n            RegionSplitter.UniformSplit uniformSplit = new RegionSplitter.UniformSplit();_\n            byte[][] split1 = uniformSplit.split(8);*/_\n        HTableDescriptor hTableDescriptor = new **HTableDescriptor**(TableName.**valueOf**(tableName));\n        HColumnDescriptor hColumnDescriptor = new **HColumnDescriptor**(Constants.DEFAULT_DB_FAMILY);\n        hTableDescriptor.**addFamily**(hColumnDescriptor);\n        byte[][] splitKey = **getSplitKey**(regionNum);\n        admin.**createTable**(hTableDescriptor,splitKey);\n        admin.**close**();\n    }\n\n    public byte[][] **getSplitKey**(int regionNum){\n        byte[][] byteNum = new byte[regionNum][];\n        for(int i =0;i<regionNum;i++){\n            String leftPad = StringUtils.**leftPad**(i+"",4,"0");\n            byteNum[i] = Bytes.**toBytes**(leftPad + "|");\n        }\n        return byteNum;\n    }\n}\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br")])]),s("h2",{attrs:{id:"_7、解析kafka数据进入hbase"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_7、解析kafka数据进入hbase"}},[t._v("#")]),t._v(" 7、解析kafka数据进入hbase")]),t._v(" "),s("p",[t._v("通过maxwell来解析mysql的binlog日志，实现了实时捕获mysql数据库当中的数据到kafka当中，然后我们就可以通过sparkStreaming程序来实现")]),t._v(" "),s("p",[t._v("在travel_spark模块下的src/main/scala路径下，创建package\ncom.travel.programApp，然后在这个package下面创建scala的object文件StreamingMaxwellKafka用于实现解析kafka当中的json格式的数据，保存到Hbase当中去")]),t._v(" "),s("div",{staticClass:"language-scala line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-scala"}},[s("code",[s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("travel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("common"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ConfigUtil"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Constants"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("com"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("travel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("utils"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("HbaseTools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" JsonParse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("kafka"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("clients"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("consumer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),t._v("ConsumerRecord\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("kafka"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("common"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("serialization"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),t._v("StringDeserializer\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("spark"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sql"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),t._v("SparkSession\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("spark"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("streaming"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dstream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),t._v("InputDStream\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("spark"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("streaming"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("kafka010"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("CanCommitOffsets"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" HasOffsetRanges"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" OffsetRange"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("spark"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("streaming"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Seconds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" StreamingContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("org"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("apache"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("spark"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("SparkConf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" SparkContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token namespace"}},[t._v("scala"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("util"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")])]),t._v("Try\n\n"),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("object")]),t._v(" StreamingMaxwellKafka "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\n  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("def")]),t._v(" main"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("args"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Unit")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" brokers "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ConfigUtil"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getConfig"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Constants"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("KAFKABOOTSTRAPSERVERS"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" topics "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("Constants"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("VECHE"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" conf "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" SparkConf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setMaster"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"local[4]"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setAppName"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"sparkMaxwell"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" groupid"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"vechgroup"')]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" kafkaParams "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" Map"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" Object"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bootstrap.servers"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" brokers"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"key.deserializer"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" classOf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("StringDeserializer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"value.deserializer"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" classOf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("StringDeserializer"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"group.id"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" groupid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"auto.offset.reset"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"earliest"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// earliest,latest,和none")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"enable.auto.commit"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("->")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" java"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("lang"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Boolean")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" sparkSession"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" SparkSession "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" SparkSession"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("builder"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("config"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("conf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getOrCreate"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" context"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" SparkContext "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" sparkSession"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("sparkContext\n    context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("setLogLevel"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"WARN"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// val streamingContext = new StreamingContext(conf,Seconds(5))")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取streamingContext")]),t._v("\n\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" ssc"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" StreamingContext "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" StreamingContext"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("context"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("Seconds"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" getDataFromKafka"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" InputDStream"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ConsumerRecord"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" HbaseTools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getStreamingContextFromHBase"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ssc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("kafkaParams"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("topics"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("groupid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"veche"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n    getDataFromKafka"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("foreachRDD"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eachRdd "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),t._v("eachRdd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("isEmpty"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" catchResult "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("   Try"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          eachRdd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("foreachPartition"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eachPartition "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//每个分区获取一次连接")]),t._v("\n\n            "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" conn "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" HbaseTools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("getHbaseConn\n            eachPartition"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("foreach"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eachLine "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//获取到每条数据")]),t._v("\n\n              "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" jsonStr"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" eachLine"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("value"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n              "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//（表名称 ， bean）")]),t._v("\n\n              "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" parse"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Any")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" JsonParse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("parse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("jsonStr"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n              HbaseTools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("saveBusinessDatas"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("parse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("parse"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("conn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            HbaseTools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("closeConn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("conn"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//每个分区更新数据")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("  eachRdd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("foreachPartition"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eachPartition "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("=>")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" list"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" List"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("ConsumerRecord"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" eachPartition"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("toList\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" finalResult"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" ConsumerRecord"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("String")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("list"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("size "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" endOffset"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Long")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" finalResult"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//结束offset")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" topic"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" finalResult"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("topic\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" partition"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" finalResult"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("partition\n          HbaseTools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("saveBatchOffset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("groupid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("topic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("partition"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("endOffset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//更新offset")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" offsetRanges"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" Array"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("OffsetRange"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" eachRdd"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("asInstanceOf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("HasOffsetRanges"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("offsetRanges\n        getDataFromKafka"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("asInstanceOf"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("CanCommitOffsets"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("commitAsync"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("offsetRanges"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//将offset提交到默认的kafka的topic里面去保存")]),t._v("\n\n        "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("eachrange "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("<-")]),t._v("  offsetRanges"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" startOffset"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Long")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" eachrange"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("fromOffset  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//起始offset")]),t._v("\n\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" endOffset"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Long")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" eachrange"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("untilOffset  "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//结束offset")]),t._v("\n\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" topic"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("String")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" eachrange"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("topic\n          "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("val")]),t._v(" partition"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("Int")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" eachrange"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("partition\n          HbaseTools"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("saveBatchOffset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("groupid"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("topic"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("partition"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("+")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('""')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("endOffset"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    ssc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("start"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n    ssc"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("awaitTermination"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br"),s("span",{staticClass:"line-number"},[t._v("25")]),s("br"),s("span",{staticClass:"line-number"},[t._v("26")]),s("br"),s("span",{staticClass:"line-number"},[t._v("27")]),s("br"),s("span",{staticClass:"line-number"},[t._v("28")]),s("br"),s("span",{staticClass:"line-number"},[t._v("29")]),s("br"),s("span",{staticClass:"line-number"},[t._v("30")]),s("br"),s("span",{staticClass:"line-number"},[t._v("31")]),s("br"),s("span",{staticClass:"line-number"},[t._v("32")]),s("br"),s("span",{staticClass:"line-number"},[t._v("33")]),s("br"),s("span",{staticClass:"line-number"},[t._v("34")]),s("br"),s("span",{staticClass:"line-number"},[t._v("35")]),s("br"),s("span",{staticClass:"line-number"},[t._v("36")]),s("br"),s("span",{staticClass:"line-number"},[t._v("37")]),s("br"),s("span",{staticClass:"line-number"},[t._v("38")]),s("br"),s("span",{staticClass:"line-number"},[t._v("39")]),s("br"),s("span",{staticClass:"line-number"},[t._v("40")]),s("br"),s("span",{staticClass:"line-number"},[t._v("41")]),s("br"),s("span",{staticClass:"line-number"},[t._v("42")]),s("br"),s("span",{staticClass:"line-number"},[t._v("43")]),s("br"),s("span",{staticClass:"line-number"},[t._v("44")]),s("br"),s("span",{staticClass:"line-number"},[t._v("45")]),s("br"),s("span",{staticClass:"line-number"},[t._v("46")]),s("br"),s("span",{staticClass:"line-number"},[t._v("47")]),s("br"),s("span",{staticClass:"line-number"},[t._v("48")]),s("br"),s("span",{staticClass:"line-number"},[t._v("49")]),s("br"),s("span",{staticClass:"line-number"},[t._v("50")]),s("br"),s("span",{staticClass:"line-number"},[t._v("51")]),s("br"),s("span",{staticClass:"line-number"},[t._v("52")]),s("br"),s("span",{staticClass:"line-number"},[t._v("53")]),s("br"),s("span",{staticClass:"line-number"},[t._v("54")]),s("br"),s("span",{staticClass:"line-number"},[t._v("55")]),s("br"),s("span",{staticClass:"line-number"},[t._v("56")]),s("br"),s("span",{staticClass:"line-number"},[t._v("57")]),s("br"),s("span",{staticClass:"line-number"},[t._v("58")]),s("br"),s("span",{staticClass:"line-number"},[t._v("59")]),s("br"),s("span",{staticClass:"line-number"},[t._v("60")]),s("br"),s("span",{staticClass:"line-number"},[t._v("61")]),s("br"),s("span",{staticClass:"line-number"},[t._v("62")]),s("br"),s("span",{staticClass:"line-number"},[t._v("63")]),s("br"),s("span",{staticClass:"line-number"},[t._v("64")]),s("br"),s("span",{staticClass:"line-number"},[t._v("65")]),s("br"),s("span",{staticClass:"line-number"},[t._v("66")]),s("br"),s("span",{staticClass:"line-number"},[t._v("67")]),s("br"),s("span",{staticClass:"line-number"},[t._v("68")]),s("br"),s("span",{staticClass:"line-number"},[t._v("69")]),s("br"),s("span",{staticClass:"line-number"},[t._v("70")]),s("br"),s("span",{staticClass:"line-number"},[t._v("71")]),s("br"),s("span",{staticClass:"line-number"},[t._v("72")]),s("br"),s("span",{staticClass:"line-number"},[t._v("73")]),s("br"),s("span",{staticClass:"line-number"},[t._v("74")]),s("br"),s("span",{staticClass:"line-number"},[t._v("75")]),s("br"),s("span",{staticClass:"line-number"},[t._v("76")]),s("br"),s("span",{staticClass:"line-number"},[t._v("77")]),s("br"),s("span",{staticClass:"line-number"},[t._v("78")]),s("br"),s("span",{staticClass:"line-number"},[t._v("79")]),s("br"),s("span",{staticClass:"line-number"},[t._v("80")]),s("br"),s("span",{staticClass:"line-number"},[t._v("81")]),s("br"),s("span",{staticClass:"line-number"},[t._v("82")]),s("br"),s("span",{staticClass:"line-number"},[t._v("83")]),s("br"),s("span",{staticClass:"line-number"},[t._v("84")]),s("br"),s("span",{staticClass:"line-number"},[t._v("85")]),s("br")])]),s("p")])}),[],!1,null,null,null);a.default=e.exports}}]);