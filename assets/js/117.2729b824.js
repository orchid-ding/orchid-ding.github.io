(window.webpackJsonp=window.webpackJsonp||[]).push([[117],{603:function(s,t,a){"use strict";a.r(t);var n=a(19),r=Object(n.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"_2-6-主成分分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-主成分分析"}},[s._v("#")]),s._v(" 2.6 主成分分析")]),s._v(" "),a("h2",{attrs:{id:"学习目标"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#学习目标"}},[s._v("#")]),s._v(" 学习目标")]),s._v(" "),a("ul",[a("li",[s._v("目标\n"),a("ul",[a("li",[s._v("应用PCA实现特征的降维")])])]),s._v(" "),a("li",[s._v("应用\n"),a("ul",[a("li",[s._v("用户与物品类别之间主成分分析")])])])]),s._v(" "),a("h2",{attrs:{id:"_2-6-1-什么是主成分分析-pca"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-1-什么是主成分分析-pca"}},[s._v("#")]),s._v(" 2.6.1 什么是主成分分析(PCA)")]),s._v(" "),a("ul",[a("li",[s._v("定义："),a("strong",[s._v("高维数据转化为低维数据的过程")]),s._v("，在此过程中"),a("strong",[s._v("可能会舍弃原有数据、创造新的变量")])]),s._v(" "),a("li",[s._v("作用："),a("strong",[s._v("是数据维数压缩，尽可能降低原数据的维数（复杂度），损失少量信息。")])]),s._v(" "),a("li",[s._v("应用：回归分析或者聚类分析当中")])]),s._v(" "),a("p",[s._v("那么更好的理解这个过程呢？我们来看一张图")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://kflys.gitee.io/upic/2020/03/22/uPic/mlib/images/PCA%E8%A7%A3%E9%87%8A%E5%9B%BE.png",alt:"PCA解释图"}})]),s._v(" "),a("h3",{attrs:{id:"_1-计算案例理解-了解-无需记忆"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-计算案例理解-了解-无需记忆"}},[s._v("#")]),s._v(" 1 计算案例理解(了解，无需记忆)")]),s._v(" "),a("p",[s._v("假设对于给定5个点，数据如下")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("(-1,-2)\n(-1, 0)\n( 0, 0)\n( 2, 1)\n( 0, 1)\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("p",[a("img",{attrs:{src:"http://kflys.gitee.io/upic/2020/03/22/uPic/mlib/images/PCA%E8%AE%A1%E7%AE%97%E5%9B%BE.png",alt:"PCA计算图"}})]),s._v(" "),a("p",[s._v("要求：将这个二维的数据简化成一维？ 并且损失少量的信息")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://kflys.gitee.io/upic/2020/03/22/uPic/mlib/images/PCA%E5%9D%90%E6%A0%87%E8%BD%B4%E7%BB%93%E6%9E%9C.png",alt:"PCA坐标轴结果"}})]),s._v(" "),a("p",[s._v("这个过程如何计算的呢？"),a("strong",[s._v("找到一个合适的直线，通过一个矩阵运算得出主成分分析的结果（不需要理解）")])]),s._v(" "),a("p",[a("img",{attrs:{src:"http://kflys.gitee.io/upic/2020/03/22/uPic/mlib/images/pca%E9%99%8D%E7%BB%B4%E8%AE%A1%E7%AE%97.png",alt:"PCA运算过程"}})]),s._v(" "),a("h3",{attrs:{id:"_2-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-api"}},[s._v("#")]),s._v(" 2 API")]),s._v(" "),a("ul",[a("li",[s._v("sklearn.decomposition.PCA(n_components=None)\n"),a("ul",[a("li",[s._v("将数据分解为较低维数空间")]),s._v(" "),a("li",[s._v("n_components:\n"),a("ul",[a("li",[a("strong",[s._v("小数：表示保留百分之多少的信息")])]),s._v(" "),a("li",[a("strong",[s._v("整数：减少到多少特征")])])])]),s._v(" "),a("li",[s._v("PCA.fit_transform(X) X:numpy array格式的数据[n_samples,n_features]")]),s._v(" "),a("li",[s._v("返回值：转换后指定维度的array")])])])]),s._v(" "),a("h3",{attrs:{id:"_3-数据计算"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-数据计算"}},[s._v("#")]),s._v(" 3 数据计算")]),s._v(" "),a("p",[s._v("先拿个简单的数据计算一下")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" sklearn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("decomposition "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" PCA\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("def")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("pca_demo")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(":")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token triple-quoted-string string"}},[s._v('"""\n    对数据进行PCA降维\n    :return: None\n    """')]),s._v("\n    data "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1、实例化PCA, 小数——保留多少信息")]),s._v("\n    transfer "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" PCA"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("n_components"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.9")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2、调用fit_transform")]),s._v("\n    data1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" transfer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fit_transform"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"保留90%的信息，降维结果为：\\n"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" data1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1、实例化PCA, 整数——指定降维到的维数")]),s._v("\n    transfer2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" PCA"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("n_components"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2、调用fit_transform")]),s._v("\n    data2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" transfer2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fit_transform"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("print")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"降维到3维的结果：\\n"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" data2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("return")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[s._v("None")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br")])]),a("p",[s._v("返回结果：")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[s._v("保留"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("90")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("%")]),s._v("的信息，降维结果为：\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.13587302e-16")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.82970843e+00")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.74456265e+00")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.91485422e+00")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.74456265e+00")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.91485422e+00")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n降维到"),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("维的结果：\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.13587302e-16")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.82970843e+00")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.59544715e-16")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.74456265e+00")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.91485422e+00")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.59544715e-16")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.74456265e+00")]),s._v("  "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.91485422e+00")]),s._v("   "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.59544715e-16")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h2",{attrs:{id:"_2-6-2-案例-探究用户对物品类别的喜好细分降维"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-6-2-案例-探究用户对物品类别的喜好细分降维"}},[s._v("#")]),s._v(" 2.6.2 案例：探究用户对物品类别的喜好细分降维")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://kflys.gitee.io/upic/2020/03/22/uPic/mlib/images/instacart.png",alt:"instacart"}})]),s._v(" "),a("p",[s._v("数据如下：")]),s._v(" "),a("ul",[a("li",[s._v("order_products__prior.csv：订单与商品信息\n"),a("ul",[a("li",[s._v("字段："),a("strong",[s._v("order_id")]),s._v(", "),a("strong",[s._v("product_id")]),s._v(", add_to_cart_order, reordered")])])]),s._v(" "),a("li",[s._v("products.csv：商品信息\n"),a("ul",[a("li",[s._v("字段："),a("strong",[s._v("product_id")]),s._v(", product_name, "),a("strong",[s._v("aisle_id")]),s._v(", department_id")])])]),s._v(" "),a("li",[s._v("orders.csv：用户的订单信息\n"),a("ul",[a("li",[s._v("字段："),a("strong",[s._v("order_id")]),s._v(","),a("strong",[s._v("user_id")]),s._v(",eval_set,order_number,….")])])]),s._v(" "),a("li",[s._v("aisles.csv：商品所属具体物品类别\n"),a("ul",[a("li",[s._v("字段： "),a("strong",[s._v("aisle_id")]),s._v(", "),a("strong",[s._v("aisle")])])])])]),s._v(" "),a("h3",{attrs:{id:"_1-需求"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-需求"}},[s._v("#")]),s._v(" 1 需求")]),s._v(" "),a("p",[a("img",{attrs:{src:"http://kflys.gitee.io/upic/2020/03/22/uPic/mlib/images/instacart%E6%95%88%E6%9E%9C.png",alt:"instacart效果"}})]),s._v(" "),a("p",[a("img",{attrs:{src:"http://kflys.gitee.io/upic/2020/03/22/uPic/mlib/images/instacartPCA%E7%BB%93%E6%9E%9C.png",alt:"instacartPCA结果"}})]),s._v(" "),a("h3",{attrs:{id:"_2-分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-分析"}},[s._v("#")]),s._v(" 2 分析")]),s._v(" "),a("ul",[a("li",[s._v("合并表，使得"),a("strong",[s._v("user_id")]),s._v("与"),a("strong",[s._v("aisle")]),s._v("在一张表当中")]),s._v(" "),a("li",[s._v("进行交叉表变换")]),s._v(" "),a("li",[s._v("进行降维")])]),s._v(" "),a("h3",{attrs:{id:"_3-完整代码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-完整代码"}},[s._v("#")]),s._v(" 3 完整代码")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" pandas "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("as")]),s._v(" pd\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("from")]),s._v(" sklearn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("decomposition "),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("import")]),s._v(" PCA\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1、获取数据集")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ·商品信息- products.csv：")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Fields：product_id, product_name, aisle_id, department_id")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ·订单与商品信息- order_products__prior.csv：")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Fields：order_id, product_id, add_to_cart_order, reordered ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ·用户的订单信息- orders.csv：")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Fields：order_id, user_id,eval_set, order_number,order_dow, order_hour_of_day, days_since_prior_order ")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ·商品所属具体物品类别- aisles.csv：")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# Fields：aisle_id, aisle     ")]),s._v("\nproducts "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" pd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("read_csv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./instacart/products.csv"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\norder_products "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" pd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("read_csv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./instacart/order_products__prior.csv"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\norders "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" pd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("read_csv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./instacart/orders.csv"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\naisles "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" pd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("read_csv"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"./instacart/aisles.csv"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2、合并表，将user_id和aisle放在一张表上")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1）合并orders和order_products on=order_id tab1:order_id, product_id, user_id")]),s._v("\ntab1 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" pd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("merge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("orders"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" order_products"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" on"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"order_id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"order_id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2）合并tab1和products on=product_id tab2:aisle_id")]),s._v("\ntab2 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" pd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("merge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tab1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" products"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" on"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"product_id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"product_id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3）合并tab2和aisles on=aisle_id tab3:user_id, aisle")]),s._v("\ntab3 "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" pd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("merge"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tab2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" aisles"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" on"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aisle_id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aisle_id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 3、交叉表处理，把user_id和aisle进行分组")]),s._v("\ntable "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" pd"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("crosstab"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("tab3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"user_id"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" tab3"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[s._v('"aisle"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 4、主成分分析的方法进行降维")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 1）实例化一个转换器类PCA")]),s._v("\ntransfer "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" PCA"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("n_components"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.95")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 2）fit_transform")]),s._v("\ndata "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" transfer"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("fit_transform"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("table"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\ndata"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("shape\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br")])]),a("p",[s._v("返回结果：")]),s._v(" "),a("div",{staticClass:"language-python line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-python"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("206209")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("44")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[a("a",{attrs:{href:"https://orchid-ding.github.io/blog-spec/mlib/day01/7-%E6%80%BB%E7%BB%93.html",target:"_blank",rel:"noopener noreferrer"}},[a("OutboundLink")],1)])])}),[],!1,null,null,null);t.default=r.exports}}]);