(window.webpackJsonp=window.webpackJsonp||[]).push([[57],{542:function(s,a,n){"use strict";n.r(a);var e=n(19),t=Object(e.a)({},(function(){var s=this,a=s.$createElement,n=s._self._c||a;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("h2",{attrs:{id:"_1-什么是elasticsearch"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-什么是elasticsearch"}},[s._v("#")]),s._v(" 1. 什么是ElasticSearch")]),s._v(" "),n("blockquote",[n("p",[s._v("Elaticsearch，简称为es， es是一个开源的高扩展的分布式全文检索引擎，它可以近乎实时的存储、检索数据；本身扩展性很好，可以扩展到上百台服务器，处理PB级别的数据。es也使用Java开发并使用Lucene作为其核心来实现所有索引和搜索的功能，但是它的目的是通过简单的RESTful API来隐藏Lucene的复杂性，从而让全文搜索变得简单。")])]),s._v(" "),s._v("r\n"),n("h2",{attrs:{id:"_2-elasticsearch使用案例"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-elasticsearch使用案例"}},[s._v("#")]),s._v(" 2. ElasticSearch使用案例")]),s._v(" "),n("p",[s._v("• 2013年初，GitHub抛弃了Solr，采取ElasticSearch 来做PB级的搜索。 “GitHub使用ElasticSearch搜索20TB的数据，包括13亿文件和1300亿行代码”")]),s._v(" "),n("p",[s._v("• 维基百科：启动以elasticsearch为基础的核心搜索架构")]),s._v(" "),n("p",[s._v("• SoundCloud：“SoundCloud使用ElasticSearch为1.8亿用户提供即时而精准的音乐搜索服务”")]),s._v(" "),n("p",[s._v("• 百度：百度目前广泛使用ElasticSearch作为文本数据分析，采集百度所有服务器上的各类指标数据及用户自定义数据，通过对各种数据进行多维分析展示，辅助定位分析实例异常或业务层面异常。目前覆盖百度内部20多个业务线（包括casio、云分析、网盟、预测、文库、直达号、钱包、风控等），单集群最大100台机器，200个ES节点，每天导入30TB+数据")]),s._v(" "),n("p",[s._v("• 新浪使用ES 分析处理32亿条实时日志")]),s._v(" "),n("p",[s._v("• 阿里使用ES 构建挖财自己的日志采集和分析体系")]),s._v(" "),n("h2",{attrs:{id:"_3-elasticsearch的安装部署"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-elasticsearch的安装部署"}},[s._v("#")]),s._v(" 3. Elasticsearch的安装部署")]),s._v(" "),n("h3",{attrs:{id:"第一步-创建普通用户"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第一步-创建普通用户"}},[s._v("#")]),s._v(" 第一步 ：创建普通用户")]),s._v(" "),n("p",[s._v("注意：ES不能使用root用户来启动，必须使用普通用户来安装启动。这里我们使用hadoop用户来安装我们的es服务")]),s._v(" "),n("h3",{attrs:{id:"第二步-下载并上传压缩-包-然后解压"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第二步-下载并上传压缩-包-然后解压"}},[s._v("#")]),s._v(" 第二步 ：下载并上传压缩 包， 然后解压")]),s._v(" "),n("p",[s._v("将es的安装包下载并上传到node01服务器的/ kfly/soft")]),s._v(" "),n("p",[s._v("node01服务器使用es用户执行以下命令")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[hadoop@node01 ~]$ cd / kfly/soft/\n\n[hadoop@node01 soft]$ wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-6.7.0.tar.gz\n\n \n\n[hadoop@node01 soft]$ tar -zxf elasticsearch-6.7.0.tar.gz  -C / kfly/install/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h3",{attrs:{id:"第三步-修改配置文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第三步-修改配置文件"}},[s._v("#")]),s._v(" 第三步 ：修改配置文件")]),s._v(" "),n("h4",{attrs:{id:"修改-elasticsearch-yml"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#修改-elasticsearch-yml"}},[s._v("#")]),s._v(" 修改 elasticsearch.yml")]),s._v(" "),n("p",[s._v("node01服务器使用hadoop用户来修改配置文件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('cd / kfly/install/elasticsearch-6.7.0/config/\n\nmkdir -p / kfly/install/elasticsearch-6.7.0/logs/\n\nmkdir -p / kfly/install/elasticsearch-6.7.0/datas\n\nvim elasticsearch.yml\n\n \n\ncluster.name: myes\n\nnode.name: node01\n\npath.data: /kfly/install/elasticsearch-6.7.0/datas\n\npath.logs: /kfly/install/elasticsearch-6.7.0/logs\n\nnetwork.host: 192.168.52.100\n\nhttp.port: 9200\n\ndiscovery.zen.ping.unicast.hosts: ["node01", "node02", "node03"]\n\nbootstrap.system_call_filter: false\n\nbootstrap.memory_lock: false\n\nhttp.cors.enabled: true\n\nhttp.cors.allow-origin: "*"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br"),n("span",{staticClass:"line-number"},[s._v("28")]),n("br"),n("span",{staticClass:"line-number"},[s._v("29")]),n("br"),n("span",{staticClass:"line-number"},[s._v("30")]),n("br"),n("span",{staticClass:"line-number"},[s._v("31")]),n("br")])]),n("h4",{attrs:{id:"修改-jvm-option"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#修改-jvm-option"}},[s._v("#")]),s._v(" 修改 jvm.option")]),s._v(" "),n("p",[s._v("修改jvm.option配置文件，调整jvm堆内存大小")]),s._v(" "),n("p",[s._v("node01使用es用户执行以下命令调整jvm堆内存大小，每个人根据自己服务器的内存大小来进行调整")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd / kfly/install/elasticsearch-6.7.0/config\n\nvim jvm.options\n\n \n\n-Xms2g\n\n-Xmx2g\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h3",{attrs:{id:"第四步-将安装包分发到其他服务器上面"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第四步-将安装包分发到其他服务器上面"}},[s._v("#")]),s._v(" 第四步 ：将安装包分发到其他服务器上面")]),s._v(" "),n("p",[s._v("node01使用es用户将安装包分发到其他服务器上面去")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd / kfly/install/\n\nscp -r elasticsearch-6.7.0/ node02:$PWD\n\nscp -r elasticsearch-6.7.0/ node03:$PWD\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h3",{attrs:{id:"第五步-node02-与-node03-修改es-配置文件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第五步-node02-与-node03-修改es-配置文件"}},[s._v("#")]),s._v(" 第五步 ：node02 与 node03 修改es 配置文件")]),s._v(" "),n("p",[s._v("node02与node03也需要修改es配置文件")]),s._v(" "),n("p",[s._v("node02使用hadoop用户执行以下命令修改es配置文件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('cd / kfly/install/elasticsearch-6.7.0/config/\n\nvim elasticsearch.yml\n\n \n\ncluster.name: myes\n\nnode.name: node02\n\npath.data: / kfly/install/elasticsearch-6.7.0/datas\n\npath.logs: / kfly/install/elasticsearch-6.7.0/logs\n\nnetwork.host: 192.168.52.110\n\nhttp.port: 9200\n\ndiscovery.zen.ping.unicast.hosts: ["node01", "node02", "node03"]\n\nbootstrap.system_call_filter: false\n\nbootstrap.memory_lock: false\n\nhttp.cors.enabled: true\n\nhttp.cors.allow-origin: "*"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br"),n("span",{staticClass:"line-number"},[s._v("27")]),n("br")])]),n("p",[s._v("node03使用hadoop")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('cd /kfly/install/elasticsearch-6.7.0/config/ \n\nvim elasticsearch.yml\n\n\ncluster.name: myes\n\nnode.name: node03\n\npath.data: / kfly/install/elasticsearch-6.7.0/datas\n\npath.logs: / kfly/install/elasticsearch-6.7.0/logs\n\nnetwork.host: 192.168.52.120\n\nhttp.port: 9200\n\ndiscovery.zen.ping.unicast.hosts: ["node01", "node02", "node03"]\n\nbootstrap.system_call_filter: false\n\nbootstrap.memory_lock: false\n\nhttp.cors.enabled: true\n\nhttp.cors.allow-origin: "*"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br"),n("span",{staticClass:"line-number"},[s._v("19")]),n("br"),n("span",{staticClass:"line-number"},[s._v("20")]),n("br"),n("span",{staticClass:"line-number"},[s._v("21")]),n("br"),n("span",{staticClass:"line-number"},[s._v("22")]),n("br"),n("span",{staticClass:"line-number"},[s._v("23")]),n("br"),n("span",{staticClass:"line-number"},[s._v("24")]),n("br"),n("span",{staticClass:"line-number"},[s._v("25")]),n("br"),n("span",{staticClass:"line-number"},[s._v("26")]),n("br")])]),n("h3",{attrs:{id:"第六步-修改系统-配置-解决启动时候的问题"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第六步-修改系统-配置-解决启动时候的问题"}},[s._v("#")]),s._v(" 第六步 ： 修改系统 配置 ， 解决启动时候的问题")]),s._v(" "),n("p",[s._v("由于现在使用普通用户来安装es服务，且es服务对服务器的资源要求比较多，包括内存大小，线程数等。所以我们需要给普通用户解开资源的束缚")]),s._v(" "),n("h4",{attrs:{id:"解决-启动问题一-普通用户打开文件的最大数限制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解决-启动问题一-普通用户打开文件的最大数限制"}},[s._v("#")]),s._v(" 解决 启动问题一 ： 普通用户打开文件的最大数限制")]),s._v(" "),n("p",[s._v("问题错误信息描述：")]),s._v(" "),n("p",[n("em",[s._v("max file descriptors [4096] for elasticsearch process likely too low, increase to at least [65536]")])]),s._v(" "),n("p",[s._v("ES因为需要大量的创建索引文件，需要大量的打开系统的文件，所以我们需要解除linux系统当中打开文件最大数目的限制，不然ES启动就会抛错")]),s._v(" "),n("p",[s._v("三台机器使用es用户执行以下命令解除打开文件数据的限制")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo vi /etc/security/limits.conf\n\n \n\\* soft nofile 65536\n\\* hard nofile 131072\n\\* soft nproc 2048\n\\* hard nproc 4096\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br")])]),n("h4",{attrs:{id:"解决-启动问题二-普通-用户启动线程数限制"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#解决-启动问题二-普通-用户启动线程数限制"}},[s._v("#")]),s._v(" 解决 启动问题二： 普通 用户启动线程数限制")]),s._v(" "),n("p",[s._v("三台机器执行以下命令打开文件最大数")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo vi /etc/sysctl.conf\n\n \nvm.max_map_count=655360\n\nfs.file-max=655360\n\n# 执行以下命令生效\n\nsudo sysctl -p\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br")])]),n("p",[s._v("注意：以上两个问题修改完成之后，一定要重新连接linux生效。关闭secureCRT或者XShell工具，然后重新打开工具连接linux即可")]),s._v(" "),n("p",[s._v("重新连接之后执行以下命令，出现这个结果即可准备启动ES了")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("[hadoop@node01 ~]$ ulimit -Hn\n\n131072\n\n[hadoop@node01 ~]$ ulimit -Sn\n\n65536\n\n[hadoop@node01 ~]$ ulimit -Hu\n\n4096\n\n[hadoop@node01 ~]$ ulimit -Su\n\n4096\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h3",{attrs:{id:"第七步-启动-es服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第七步-启动-es服务"}},[s._v("#")]),s._v(" 第七步 ：启动 ES服务")]),s._v(" "),n("p",[s._v("三台机器使用hadoop用户执行以下命令启动es服务")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("nohup / kfly/install/elasticsearch-6.7.0/bin/elasticsearch 2>&1 &\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("启动成功之后jsp即可看到es的服务进程，并且访问页面")]),s._v(" "),n("p",[s._v("http://node01:9200/?pretty")]),s._v(" "),n("p",[s._v("能够看到es启动之后的一些信息")]),s._v(" "),n("p",[s._v("注意：如果哪一台机器服务启动失败，那么就到哪一台机器的")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("/kfly/install/elasticsearch-6.7.0/logs\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br")])]),n("p",[s._v("这个路径下面去查看错误日志")]),s._v(" "),n("h2",{attrs:{id:"_4、-安装elasticsearch-head-插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4、-安装elasticsearch-head-插件"}},[s._v("#")]),s._v(" 4、 安装elasticsearch-head 插件")]),s._v(" "),n("p",[s._v("由于es服务启动之后，访问界面比较丑陋，为了更好的查看索引库当中的信息，我们可以通过安装elasticsearch-head这个插件来实现，这个插件可以更方便快捷的看到es的管理界面")]),s._v(" "),n("h3",{attrs:{id:"_1-、node01-机器安装nodejs"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1-、node01-机器安装nodejs"}},[s._v("#")]),s._v(" 1  、node01 机器安装nodejs")]),s._v(" "),n("p",[s._v("Node.js是一个基于 Chrome V8 引擎的 JavaScript 运行环境。")]),s._v(" "),n("p",[s._v("Node.js是一个Javascript运行环境(runtime environment)，发布于2009年5月，由Ryan Dahl开发，实质是对Chrome V8引擎进行了封装。Node.js 不是一个 JavaScript 框架，不同于CakePHP、Django、Rails。Node.js 更不是浏览器端的库，不能与 jQuery、ExtJS 相提并论。Node.js 是一个让 JavaScript 运行在服务端的开发平台，它让 JavaScript 成为与PHP、Python、Perl、Ruby 等服务端语言平起平坐的脚本语言。")]),s._v(" "),n("p",[s._v("安装步骤参考：https://www.cnblogs.com/kevingrace/p/8990169.html")]),s._v(" "),n("h4",{attrs:{id:"第一步-下载安装包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第一步-下载安装包"}},[s._v("#")]),s._v(" 第一步 ：下载安装包")]),s._v(" "),n("p",[s._v("node01机器执行以下命令下载安装包，然后进行解压")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd / kfly/soft/\nwget https://npm.taobao.org/mirrors/node/v8.1.0/node-v8.1.0-linux-x64.tar.gz\n\ntar -zxf node-v8.1.0-linux-x64.tar.gz  -C / kfly/install/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h4",{attrs:{id:"第二步-创建软连接"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第二步-创建软连接"}},[s._v("#")]),s._v(" 第二步 ：创建软连接")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("node01执行以下命令创建软连接\n\nsudo ln -s / kfly/install/node-v8.1.0-linux-x64/lib/node_modules/npm/bin/npm-cli.js /usr/local/bin/npm\n\nsudo ln -s / kfly/install/node-v8.1.0-linux-x64/bin/node /usr/local/bin/node\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br")])]),n("h4",{attrs:{id:"第三步-修改环境变量"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第三步-修改环境变量"}},[s._v("#")]),s._v(" 第三步 ：修改环境变量")]),s._v(" "),n("p",[s._v("node01服务器添加环境变量")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("sudo vim /etc/profile\n\n*export NODE_HOME=/ kfly/install/node-v8.1.0-linux-x64*\n\n*export PATH=:$PATH:$NODE_HOME/bin*\n\n修改完环境变量使用source生效\n\nsource /etc/profile\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br")])]),n("h4",{attrs:{id:"第四步-验证安装成功"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第四步-验证安装成功"}},[s._v("#")]),s._v(" 第四步 ：验证安装成功")]),s._v(" "),n("p",[s._v("node01执行以下命令验证安装生效")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("node -v\n\nnpm -v\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("img",{staticStyle:{zoom:"150%"},attrs:{src:"C:\\Users\\kfly\\AppData\\Local\\Temp\\ksohtml\\wpsA541.tmp.jpg",alt:"img"}}),s._v(" "),n("h3",{attrs:{id:"_2-、node01-机器-安装-elasticsearch-head-插件"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2-、node01-机器-安装-elasticsearch-head-插件"}},[s._v("#")]),s._v(" 2  、node01 机器 安装 elasticsearch-head 插件")]),s._v(" "),n("p",[s._v("elasticsearch-head这个插件是es提供的一个用于图形化界面查看的一个插件工具，可以安装上这个插件之后，通过这个插件来实现我们通过浏览器查看es当中的数据")]),s._v(" "),n("p",[s._v("安装elasticsearch-head这个插件这里提供两种方式进行安装，第一种方式就是自己下载源码包进行编译，耗时比较长，网络较差的情况下，基本上不可能安装成功")]),s._v(" "),n("p",[s._v("第二种方式就是直接使用我已经编译好的安装包，进行修改配置即可")]),s._v(" "),n("h4",{attrs:{id:"_1、第一种-方式-在线-安装elasticsearch-head-插件-网速慢-不推荐"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_1、第一种-方式-在线-安装elasticsearch-head-插件-网速慢-不推荐"}},[s._v("#")]),s._v(" 1、第一种 方式： 在线 安装elasticsearch-head 插件（ 网速慢 ，不推荐 ）")]),s._v(" "),n("p",[s._v("这里选择node01进行安装")]),s._v(" "),n("h5",{attrs:{id:"第一步-在线-安装必须依赖包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第一步-在线-安装必须依赖包"}},[s._v("#")]),s._v(" 第一步 ： 在线 安装必须依赖包")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("# 初始化目录*\n*cd /kfly/install*\n*# 安装GCC*\n*sudo yum install -y gcc-c++ make git\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("h5",{attrs:{id:"第二步-从-git上面克隆-编译-包-并-进行安装"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第二步-从-git上面克隆-编译-包-并-进行安装"}},[s._v("#")]),s._v(" 第二步 ： 从 git上面克隆 编译 包 并 进行安装")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd /kfly/install\ngit clone https://github.com/mobz/elasticsearch-head.git\n# 进入安装目录\ncd /kfly/install/elasticsearch-head\n# intall 才会有 node-modules\nnpm install\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://gitee.com/kflys/uPic/raw/master/uPic/202111241531785.jpg",alt:"img"}})]),s._v(" "),n("p",[s._v("以下进度信息")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('npm WARN notice [SECURITY] lodash has the following vulnerability: 1 low. Go here for more details: \n\nnpm WARN notice [SECURITY] debug has the following vulnerability: 1 low. Go here for more details: https://nodesecurity.io/advisories?search=debug&version=0.7.4 - Run `npm i npm@latest -g` to upgrade your npm version, and then `npm audit` to get more info.\n\nnpm ERR! Unexpected end of input at 1:2096\n\nnpm ERR! 7c1a1bc21c976bb49f3ea","tarball":"https://registry.npmjs.org/safer-bu\n\nnpm ERR!                                    ^\n\nnpm ERR! A complete log of this run can be found in:\n\nnpm ERR!   / kfly/soft/.npm/_logs/2018-11-27T14_35_39_453Z-debug.log\n\n以上错误可以不用管。\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("h5",{attrs:{id:"第三步-node-01机器-修改-gruntfile-js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第三步-node-01机器-修改-gruntfile-js"}},[s._v("#")]),s._v(" 第三步. node 01机器 修改 Gruntfile.js")]),s._v(" "),n("p",[s._v("第一台机器修改Gruntfile.js这个文件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd / kfly/install/elasticsearch-head\nvim Gruntfile.js\n\n找到以下代码：\n\n添加一行： hostname: '192.168.52.100',\n\nconnect: {\n                        server: {\n                              options: {\n                                     hostname: '192.168.52.100',\n                                     port: 9100,\n                                     base: '.',\n                                     keepalive: travelue\n                                }\n                        }\n                }\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br")])]),n("h5",{attrs:{id:"第四步-node01-机器修改-app-js"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第四步-node01-机器修改-app-js"}},[s._v("#")]),s._v(" 第四步. node01 机器修改 app.js")]),s._v(" "),n("p",[s._v("第一台机器修改app.js")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd / kfly/install/elasticsearch-head/_site\n\nvim app.js \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://gitee.com/kflys/uPic/raw/master/uPic/202111241532509.jpg",alt:"img"}})]),s._v(" "),n("p",[s._v("更改前：http://localhost:9200*\n*更改后：http://node01:9200")]),s._v(" "),n("h4",{attrs:{id:"_2、第二种方式-直接使用提供的编译之后的源码包解压之后修改配置文件即可-强烈推荐"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_2、第二种方式-直接使用提供的编译之后的源码包解压之后修改配置文件即可-强烈推荐"}},[s._v("#")]),s._v(" 2、第二种方式：直接使用提供的编译之后的源码包解压之后修改配置文件即可（强烈推荐）")]),s._v(" "),n("h5",{attrs:{id:"第一步-上传-压缩包-到-kfly-soft-路径下-去"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第一步-上传-压缩包-到-kfly-soft-路径下-去"}},[s._v("#")]),s._v(" 第一步 ：上传 压缩包 到/ kfly/soft 路径下 去")]),s._v(" "),n("p",[s._v("将我们的压缩包 elasticsearch-head-compile-after.tar.gz  上传到node01机器的/ kfly/soft路径下面去")]),s._v(" "),n("h5",{attrs:{id:"第二步-解压-安装包"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第二步-解压-安装包"}},[s._v("#")]),s._v(" 第二步 ：解压 安装包")]),s._v(" "),n("p",[s._v("node01执行以下命令解压安装包")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd / kfly/soft/\n\ntar -zxvf elasticsearch-head-compile-after.tar.gz -C / kfly/install/\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("h5",{attrs:{id:"第三步-node-01机器-修改-gruntfile-js-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第三步-node-01机器-修改-gruntfile-js-2"}},[s._v("#")]),s._v(" 第三步. node 01机器 修改 Gruntfile.js")]),s._v(" "),n("p",[s._v("修改Gruntfile.js这个文件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd / kfly/install/elasticsearch-head\n\nvim Gruntfile.js\n\n找到以下代码：\n\n添加一行： hostname: '192.168.52.100',\n\nconnect: {\n                        server: {\n                              options: {\n                                     hostname: '192.168.52.100',\n                                     port: 9100,\n                                     base: '.',\n                                     keepalive: true\n                                }\n                        }\n                }\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br"),n("span",{staticClass:"line-number"},[s._v("16")]),n("br"),n("span",{staticClass:"line-number"},[s._v("17")]),n("br"),n("span",{staticClass:"line-number"},[s._v("18")]),n("br")])]),n("h5",{attrs:{id:"第四步-node01-机器修改-app-js-2"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#第四步-node01-机器修改-app-js-2"}},[s._v("#")]),s._v(" 第四步. node01 机器修改 app.js")]),s._v(" "),n("p",[s._v("第一台机器修改app.js")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd / kfly/install/elasticsearch-head/_site\n\nvim app.js \n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://gitee.com/kflys/uPic/raw/master/uPic/202111241505552.jpg",alt:"img"}})]),s._v(" "),n("p",[s._v("更改前：http://localhost:9200*\n*更改后：http://node01:9200")]),s._v(" "),n("h3",{attrs:{id:"_3-node01-机器-启动head服务"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_3-node01-机器-启动head服务"}},[s._v("#")]),s._v(" 3. node01 机器 启动head服务")]),s._v(" "),n("p",[s._v("node01启动elasticsearch-head插件")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v("cd / kfly/install/elasticsearch-head/node_modules/grunt/bin/\n\n进程后台启动命令\n\nnohup ./grunt server >/dev/null 2>&1 &\n\n如何停止：elasticsearch-head进程\n\n执行以下命令找到elasticsearch-head的插件进程，然后使用kill  -9  杀死进程即可\n\nsudo yum install net-tools   \n\nnetstat -nltp | grep 9100\n\nkill -9 8328\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br"),n("span",{staticClass:"line-number"},[s._v("5")]),n("br"),n("span",{staticClass:"line-number"},[s._v("6")]),n("br"),n("span",{staticClass:"line-number"},[s._v("7")]),n("br"),n("span",{staticClass:"line-number"},[s._v("8")]),n("br"),n("span",{staticClass:"line-number"},[s._v("9")]),n("br"),n("span",{staticClass:"line-number"},[s._v("10")]),n("br"),n("span",{staticClass:"line-number"},[s._v("11")]),n("br"),n("span",{staticClass:"line-number"},[s._v("12")]),n("br"),n("span",{staticClass:"line-number"},[s._v("13")]),n("br"),n("span",{staticClass:"line-number"},[s._v("14")]),n("br"),n("span",{staticClass:"line-number"},[s._v("15")]),n("br")])]),n("p",[n("img",{attrs:{src:"https://gitee.com/kflys/uPic/raw/master/uPic/202111241534348.jpg",alt:"img"}})]),s._v(" "),n("h3",{attrs:{id:"_4-访问elasticsearch-head界面"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#_4-访问elasticsearch-head界面"}},[s._v("#")]),s._v(" 4. 访问elasticsearch-head界面")]),s._v(" "),n("p",[s._v("打开Google Chrome访问")]),s._v(" "),n("p",[s._v("http://192.168.52.100:9100/")])])}),[],!1,null,null,null);a.default=t.exports}}]);